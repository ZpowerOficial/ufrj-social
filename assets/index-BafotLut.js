const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browser-Bw9u7V_H.js","assets/vendor-PvLDeLfj.js"])))=>i.map(i=>d[i]);
import{r as h,a as zr,g as Fo,c as Ne,R as T,u as Be,L as S,O as Uo,b as Wo,d as Bo,e as Vr,B as qo,f as zo,h as ve,N as Vo}from"./vendor-PvLDeLfj.js";import{M as Ho,S as Ss,B as Sa,a as Ms,b as Jo,c as Yo,H as Pn,U as kt,C as Vt,P as Ht,X as Go,d as Ko,e as ka,f as Xo,T as Qo,F as Zo,g as ec,h as tc,i as sc,R as Pa,L as On,j as rc,G as nc,k as ac,l as br,m as Oa,n as ic,o as oc,p as cc,E as lc,A as jt,q as dc,I as uc,r as hc,s as fc,t as mc,u as _t,v as gc,w as pc,x as vc,y as xc,z as Tn,D as yc,J as An,K as wc,N as Rn,O as Dn,Q as bc,V as jc}from"./ui-CmzjNgmG.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=t(a);fetch(a.href,i)}})();var Ta={exports:{}},Is={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _c=h,Nc=Symbol.for("react.element"),Cc=Symbol.for("react.fragment"),Ec=Object.prototype.hasOwnProperty,Sc=_c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,kc={key:!0,ref:!0,__self:!0,__source:!0};function Aa(s,e,t){var r,a={},i=null,o=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Ec.call(e,r)&&!kc.hasOwnProperty(r)&&(a[r]=e[r]);if(s&&s.defaultProps)for(r in e=s.defaultProps,e)a[r]===void 0&&(a[r]=e[r]);return{$$typeof:Nc,type:s,key:i,ref:o,props:a,_owner:Sc.current}}Is.Fragment=Cc;Is.jsx=Aa;Is.jsxs=Aa;Ta.exports=Is;var n=Ta.exports,jr={},$n=zr;jr.createRoot=$n.createRoot,jr.hydrateRoot=$n.hydrateRoot;const Pc="modulepreload",Oc=function(s){return"/ufrj-social/"+s},Ln={},Pt=function(e,t,r){let a=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(t.map(l=>{if(l=Oc(l),l in Ln)return;Ln[l]=!0;const d=l.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":Pc,d||(f.as="script"),f.crossOrigin="",f.href=l,c&&f.setAttribute("nonce",c),document.head.appendChild(f),d)return new Promise((m,g)=>{f.addEventListener("load",m),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return a.then(o=>{for(const c of o||[])c.status==="rejected"&&i(c.reason);return e().catch(i)})},Tc=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>Pt(async()=>{const{default:r}=await Promise.resolve().then(()=>Rt);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class Hr extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class Ac extends Hr{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Rc extends Hr{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Dc extends Hr{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var _r;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(_r||(_r={}));var $c=function(s,e,t,r){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function c(u){try{d(r.next(u))}catch(f){o(f)}}function l(u){try{d(r.throw(u))}catch(f){o(f)}}function d(u){u.done?i(u.value):a(u.value).then(c,l)}d((r=r.apply(s,e||[])).next())})};class Lc{constructor(e,{headers:t={},customFetch:r,region:a=_r.Any}={}){this.url=e,this.headers=t,this.region=a,this.fetch=Tc(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return $c(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:o}=t;let c={},{region:l}=t;l||(l=this.region),l&&l!=="any"&&(c["x-region"]=l);let d;o&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(c["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(c["Content-Type"]="application/json",d=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),a),body:d}).catch(v=>{throw new Ac(v)}),f=u.headers.get("x-relay-error");if(f&&f==="true")throw new Rc(u);if(!u.ok)throw new Dc(u);let m=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),g;return m==="application/json"?g=yield u.json():m==="application/octet-stream"?g=yield u.blob():m==="text/event-stream"?g=u:m==="multipart/form-data"?g=yield u.formData():g=yield u.text(),{data:g,error:null}}catch(a){return{data:null,error:a}}})}}var ge={},Jr={},Fs={},Xt={},Us={},Ws={},Mc=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ot=Mc();const Ic=Ot.fetch,Ra=Ot.fetch.bind(Ot),Da=Ot.Headers,Fc=Ot.Request,Uc=Ot.Response,Rt=Object.freeze(Object.defineProperty({__proto__:null,Headers:Da,Request:Fc,Response:Uc,default:Ra,fetch:Ic},Symbol.toStringTag,{value:"Module"})),Wc=Fo(Rt);var Bs={};Object.defineProperty(Bs,"__esModule",{value:!0});let Bc=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Bs.default=Bc;var $a=Ne&&Ne.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Ws,"__esModule",{value:!0});const qc=$a(Wc),zc=$a(Bs);let Vc=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=qc.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let a=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,c,l;let d=null,u=null,f=null,m=i.status,g=i.statusText;if(i.ok){if(this.method!=="HEAD"){const b=await i.text();b===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=b:u=JSON.parse(b))}const p=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),x=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");p&&x&&x.length>1&&(f=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(d={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,f=null,m=406,g="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const p=await i.text();try{d=JSON.parse(p),Array.isArray(d)&&i.status===404&&(u=[],d=null,m=200,g="OK")}catch{i.status===404&&p===""?(m=204,g="No Content"):d={message:p}}if(d&&this.isMaybeSingle&&(!((l=d==null?void 0:d.details)===null||l===void 0)&&l.includes("0 rows"))&&(d=null,m=200,g="OK"),d&&this.shouldThrowOnError)throw new zc.default(d)}return{error:d,data:u,count:f,status:m,statusText:g}});return this.shouldThrowOnError||(a=a.catch(i=>{var o,c,l;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(c=i==null?void 0:i.stack)!==null&&c!==void 0?c:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),a.then(e,t)}returns(){return this}overrideTypes(){return this}};Ws.default=Vc;var Hc=Ne&&Ne.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Us,"__esModule",{value:!0});const Jc=Hc(Ws);let Yc=class extends Jc.default{select(e){let t=!1;const r=(e??"*").split("").map(a=>/\s/.test(a)&&!t?"":(a==='"'&&(t=!t),a)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:a,referencedTable:i=a}={}){const o=i?`${i}.order`:"order",c=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${c?`${c},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:a=r}={}){const i=typeof a>"u"?"offset":`${a}.offset`,o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:a=!1,wal:i=!1,format:o="text"}={}){var c;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,a?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(c=this.headers.Accept)!==null&&c!==void 0?c:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${d}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Us.default=Yc;var Gc=Ne&&Ne.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Xt,"__esModule",{value:!0});const Kc=Gc(Us);let Xc=class extends Kc.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:a}={}){let i="";a==="plain"?i="pl":a==="phrase"?i="ph":a==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const a=r?`${r}.or`:"or";return this.url.searchParams.append(a,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}};Xt.default=Xc;var Qc=Ne&&Ne.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Fs,"__esModule",{value:!0});const Wt=Qc(Xt);let Zc=class{constructor(e,{headers:t={},schema:r,fetch:a}){this.url=e,this.headers=t,this.schema=r,this.fetch=a}select(e,{head:t=!1,count:r}={}){const a=t?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(c=>/\s/.test(c)&&!i?"":(c==='"'&&(i=!i),c)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new Wt.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:r=!0}={}){const a="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((c,l)=>c.concat(Object.keys(l)),[]);if(o.length>0){const c=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",c.join(","))}}return new Wt.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:a,defaultToNull:i=!0}={}){const o="POST",c=[`resolution=${r?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&c.push(this.headers.Prefer),a&&c.push(`count=${a}`),i||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(e)){const l=e.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(l.length>0){const d=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new Wt.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const r="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),t&&a.push(`count=${t}`),this.headers.Prefer=a.join(","),new Wt.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Wt.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Fs.default=Zc;var qs={},zs={};Object.defineProperty(zs,"__esModule",{value:!0});zs.version=void 0;zs.version="0.0.0-automated";Object.defineProperty(qs,"__esModule",{value:!0});qs.DEFAULT_HEADERS=void 0;const el=zs;qs.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${el.version}`};var La=Ne&&Ne.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Jr,"__esModule",{value:!0});const tl=La(Fs),sl=La(Xt),rl=qs;let nl=class Ma{constructor(e,{headers:t={},schema:r,fetch:a}={}){this.url=e,this.headers=Object.assign(Object.assign({},rl.DEFAULT_HEADERS),t),this.schemaName=r,this.fetch=a}from(e){const t=new URL(`${this.url}/${e}`);return new tl.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Ma(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:a=!1,count:i}={}){let o;const c=new URL(`${this.url}/rpc/${e}`);let l;r||a?(o=r?"HEAD":"GET",Object.entries(t).filter(([u,f])=>f!==void 0).map(([u,f])=>[u,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([u,f])=>{c.searchParams.append(u,f)})):(o="POST",l=t);const d=Object.assign({},this.headers);return i&&(d.Prefer=`count=${i}`),new sl.default({method:o,url:c,headers:d,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};Jr.default=nl;var Dt=Ne&&Ne.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(ge,"__esModule",{value:!0});ge.PostgrestError=ge.PostgrestBuilder=ge.PostgrestTransformBuilder=ge.PostgrestFilterBuilder=ge.PostgrestQueryBuilder=ge.PostgrestClient=void 0;const Ia=Dt(Jr);ge.PostgrestClient=Ia.default;const Fa=Dt(Fs);ge.PostgrestQueryBuilder=Fa.default;const Ua=Dt(Xt);ge.PostgrestFilterBuilder=Ua.default;const Wa=Dt(Us);ge.PostgrestTransformBuilder=Wa.default;const Ba=Dt(Ws);ge.PostgrestBuilder=Ba.default;const qa=Dt(Bs);ge.PostgrestError=qa.default;var al=ge.default={PostgrestClient:Ia.default,PostgrestQueryBuilder:Fa.default,PostgrestFilterBuilder:Ua.default,PostgrestTransformBuilder:Wa.default,PostgrestBuilder:Ba.default,PostgrestError:qa.default};const{PostgrestClient:il,PostgrestQueryBuilder:Np,PostgrestFilterBuilder:Cp,PostgrestTransformBuilder:Ep,PostgrestBuilder:Sp,PostgrestError:kp}=al,ol="2.11.2",cl={"X-Client-Info":`realtime-js/${ol}`},ll="1.0.0",za=1e4,dl=1e3;var Nt;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(Nt||(Nt={}));var xe;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(xe||(xe={}));var Ce;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(Ce||(Ce={}));var Nr;(function(s){s.websocket="websocket"})(Nr||(Nr={}));var nt;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(nt||(nt={}));class ul{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const a=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const c=r.decode(e.slice(o,o+a));o=o+a;const l=r.decode(e.slice(o,o+i));o=o+i;const d=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:c,event:l,payload:d}}}class Va{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Y;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(Y||(Y={}));const Mn=(s,e,t={})=>{var r;const a=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=hl(o,s,e,a),i),{})},hl=(s,e,t,r)=>{const a=e.find(c=>c.name===s),i=a==null?void 0:a.type,o=t[s];return i&&!r.includes(i)?Ha(i,o):Cr(o)},Ha=(s,e)=>{if(s.charAt(0)==="_"){const t=s.slice(1,s.length);return pl(e,t)}switch(s){case Y.bool:return fl(e);case Y.float4:case Y.float8:case Y.int2:case Y.int4:case Y.int8:case Y.numeric:case Y.oid:return ml(e);case Y.json:case Y.jsonb:return gl(e);case Y.timestamp:return vl(e);case Y.abstime:case Y.date:case Y.daterange:case Y.int4range:case Y.int8range:case Y.money:case Y.reltime:case Y.text:case Y.time:case Y.timestamptz:case Y.timetz:case Y.tsrange:case Y.tstzrange:return Cr(e);default:return Cr(e)}},Cr=s=>s,fl=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},ml=s=>{if(typeof s=="string"){const e=parseFloat(s);if(!Number.isNaN(e))return e}return s},gl=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(e){return console.log(`JSON parse error: ${e}`),s}return s},pl=(s,e)=>{if(typeof s!="string")return s;const t=s.length-1,r=s[t];if(s[0]==="{"&&r==="}"){let i;const o=s.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(c=>Ha(e,c))}return s},vl=s=>typeof s=="string"?s.replace(" ","T"):s,Ja=s=>{let e=s;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class sr{constructor(e,t,r={},a=za){this.channel=e,this.event=t,this.payload=r,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var In;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(In||(In={}));class qt{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},a=>{const{onJoin:i,onLeave:o,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=qt.syncState(this.state,a,i,o),this.pendingDiffs.forEach(l=>{this.state=qt.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],c()}),this.channel._on(r.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=qt.syncDiff(this.state,a,i,o),c())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,a){const i=this.cloneDeep(e),o=this.transformState(t),c={},l={};return this.map(i,(d,u)=>{o[d]||(l[d]=u)}),this.map(o,(d,u)=>{const f=i[d];if(f){const m=u.map(x=>x.presence_ref),g=f.map(x=>x.presence_ref),v=u.filter(x=>g.indexOf(x.presence_ref)<0),p=f.filter(x=>m.indexOf(x.presence_ref)<0);v.length>0&&(c[d]=v),p.length>0&&(l[d]=p)}else c[d]=u}),this.syncDiff(i,{joins:c,leaves:l},r,a)}static syncDiff(e,t,r,a){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),a||(a=()=>{}),this.map(i,(c,l)=>{var d;const u=(d=e[c])!==null&&d!==void 0?d:[];if(e[c]=this.cloneDeep(l),u.length>0){const f=e[c].map(g=>g.presence_ref),m=u.filter(g=>f.indexOf(g.presence_ref)<0);e[c].unshift(...m)}r(c,u,l)}),this.map(o,(c,l)=>{let d=e[c];if(!d)return;const u=l.map(f=>f.presence_ref);d=d.filter(f=>u.indexOf(f.presence_ref)<0),e[c]=d,a(c,d,l),d.length===0&&delete e[c]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const a=e[r];return"metas"in a?t[r]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[r]=a,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Fn;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(Fn||(Fn={}));var Un;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(Un||(Un={}));var Fe;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(Fe||(Fe={}));class Yr{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=xe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new sr(this,Ce.join,this.params,this.timeout),this.rejoinTimer=new Va(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=xe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=xe.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=xe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=xe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ce.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new qt(this),this.broadcastEndpointURL=Ja(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,a;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:c}}=this.params;this._onError(u=>e==null?void 0:e(Fe.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(Fe.CLOSED));const l={},d={broadcast:i,presence:o,postgres_changes:(a=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&a!==void 0?a:[],private:c};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:u})=>{var f;if(this.socket.setAuth(),u===void 0){e==null||e(Fe.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,g=(f=m==null?void 0:m.length)!==null&&f!==void 0?f:0,v=[];for(let p=0;p<g;p++){const x=m[p],{filter:{event:b,schema:y,table:j,filter:_}}=x,w=u&&u[p];if(w&&w.event===b&&w.schema===y&&w.table===j&&w.filter===_)v.push(Object.assign(Object.assign({},x),{id:w.id}));else{this.unsubscribe(),e==null||e(Fe.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e(Fe.SUBSCRIBED);return}}).receive("error",u=>{e==null||e(Fe.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Fe.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e,t={}){var r,a;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((a=d.body)===null||a===void 0?void 0:a.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,c,l;const d=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(c=(o=this.params)===null||o===void 0?void 0:o.config)===null||c===void 0?void 0:c.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=xe.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ce.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const a=new sr(this,Ce.leave,{},e);a.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),a.send(),this._canPush()||a.trigger("ok",{})})}async _fetchWithTimeout(e,t,r){const a=new AbortController,i=setTimeout(()=>a.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:a.signal}));return clearTimeout(i),o}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new sr(this,e,t,r);return this._canPush()?a.send():(a.startTimeout(),this.pushBuffer.push(a)),a}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var a,i;const o=e.toLocaleLowerCase(),{close:c,error:l,leave:d,join:u}=Ce;if(r&&[c,l,d,u].indexOf(o)>=0&&r!==this._joinRef())return;let m=this._onMessage(o,t,r);if(t&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(g=>{var v,p,x;return((v=g.filter)===null||v===void 0?void 0:v.event)==="*"||((x=(p=g.filter)===null||p===void 0?void 0:p.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===o}).map(g=>g.callback(m,r)):(i=this.bindings[o])===null||i===void 0||i.filter(g=>{var v,p,x,b,y,j;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const _=g.id,w=(v=g.filter)===null||v===void 0?void 0:v.event;return _&&((p=t.ids)===null||p===void 0?void 0:p.includes(_))&&(w==="*"||(w==null?void 0:w.toLocaleLowerCase())===((x=t.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const _=(y=(b=g==null?void 0:g.filter)===null||b===void 0?void 0:b.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return _==="*"||_===((j=t==null?void 0:t.event)===null||j===void 0?void 0:j.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof m=="object"&&"ids"in m){const v=m.data,{schema:p,table:x,commit_timestamp:b,type:y,errors:j}=v;m=Object.assign(Object.assign({},{schema:p,table:x,commit_timestamp:b,eventType:y,new:{},old:{},errors:j}),this._getPayloadRecords(v))}g.callback(m,r)})}_isClosed(){return this.state===xe.closed}_isJoined(){return this.state===xe.joined}_isJoining(){return this.state===xe.joining}_isLeaving(){return this.state===xe.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const a=e.toLocaleLowerCase(),i={type:a,filter:t,callback:r};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Yr.isEqual(a.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ce.close,{},e)}_onError(e){this._on(Ce.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=xe.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Mn(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Mn(e.columns,e.old_record)),t}}const xl=()=>{},yl=typeof WebSocket<"u",wl=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class bl{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=cl,this.params={},this.timeout=za,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=xl,this.conn=null,this.sendBuffer=[],this.serializer=new ul,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...c)=>Pt(async()=>{const{default:l}=await Promise.resolve().then(()=>Rt);return{default:l}},void 0).then(({default:l})=>l(...c)):o=fetch,(...c)=>o(...c)},this.endPoint=`${e}/${Nr.websocket}`,this.httpEndpoint=Ja(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const a=(r=t==null?void 0:t.params)===null||r===void 0?void 0:r.apikey;if(a&&(this.accessTokenValue=a,this.apiKey=a),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(i,o)=>o(JSON.stringify(i)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Va(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(yl){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new jl(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),Pt(async()=>{const{default:e}=await import("./browser-Bw9u7V_H.js").then(t=>t.b);return{default:e}},__vite__mapDeps([0,1])).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ll}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Nt.connecting:return nt.Connecting;case Nt.open:return nt.Open;case Nt.closing:return nt.Closing;default:return nt.Closed}}isConnected(){return this.connectionState()===nt.Open}channel(e,t={config:{}}){const r=new Yr(`realtime:${e}`,t,this);return this.channels.push(r),r}push(e){const{topic:t,event:r,payload:a,ref:i}=e,o=()=>{this.encode(e,c=>{var l;(l=this.conn)===null||l===void 0||l.send(c)})};this.log("push",`${t} ${r} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(t){let r=null;try{r=JSON.parse(atob(t.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=t,this.channels.forEach(a=>{t&&a.updateJoinPayload({access_token:t}),a.joinedOnce&&a._isJoined()&&a._push(Ce.access_token,{access_token:t})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(dl,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:a,payload:i,ref:o}=t;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${a} ${o&&"("+o+")"||""}`,i),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(a,i,o)),this.stateChangeCallbacks.message.forEach(c=>c(t))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ce.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",a=new URLSearchParams(t);return`${e}${r}${a}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([wl],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}}class jl{constructor(e,t,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Nt.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class Gr extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function oe(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}class _l extends Gr{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Er extends Gr{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Nl=function(s,e,t,r){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function c(u){try{d(r.next(u))}catch(f){o(f)}}function l(u){try{d(r.throw(u))}catch(f){o(f)}}function d(u){u.done?i(u.value):a(u.value).then(c,l)}d((r=r.apply(s,e||[])).next())})};const Ya=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>Pt(async()=>{const{default:r}=await Promise.resolve().then(()=>Rt);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},Cl=()=>Nl(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Pt(()=>Promise.resolve().then(()=>Rt),void 0)).Response:Response}),Sr=s=>{if(Array.isArray(s))return s.map(t=>Sr(t));if(typeof s=="function"||s!==Object(s))return s;const e={};return Object.entries(s).forEach(([t,r])=>{const a=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[a]=Sr(r)}),e};var ct=function(s,e,t,r){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function c(u){try{d(r.next(u))}catch(f){o(f)}}function l(u){try{d(r.throw(u))}catch(f){o(f)}}function d(u){u.done?i(u.value):a(u.value).then(c,l)}d((r=r.apply(s,e||[])).next())})};const rr=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),El=(s,e,t)=>ct(void 0,void 0,void 0,function*(){const r=yield Cl();s instanceof r&&!(t!=null&&t.noResolveJson)?s.json().then(a=>{e(new _l(rr(a),s.status||500))}).catch(a=>{e(new Er(rr(a),a))}):e(new Er(rr(s),s))}),Sl=(s,e,t,r)=>{const a={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(a.body=JSON.stringify(r)),Object.assign(Object.assign({},a),t))};function Qt(s,e,t,r,a,i){return ct(this,void 0,void 0,function*(){return new Promise((o,c)=>{s(t,Sl(e,r,a,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>El(l,c,r))})})}function ks(s,e,t,r){return ct(this,void 0,void 0,function*(){return Qt(s,"GET",e,t,r)})}function Je(s,e,t,r,a){return ct(this,void 0,void 0,function*(){return Qt(s,"POST",e,r,a,t)})}function kl(s,e,t,r,a){return ct(this,void 0,void 0,function*(){return Qt(s,"PUT",e,r,a,t)})}function Pl(s,e,t,r){return ct(this,void 0,void 0,function*(){return Qt(s,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function Ga(s,e,t,r,a){return ct(this,void 0,void 0,function*(){return Qt(s,"DELETE",e,r,a,t)})}var me=function(s,e,t,r){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function c(u){try{d(r.next(u))}catch(f){o(f)}}function l(u){try{d(r.throw(u))}catch(f){o(f)}}function d(u){u.done?i(u.value):a(u.value).then(c,l)}d((r=r.apply(s,e||[])).next())})};const Ol={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Wn={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Tl{constructor(e,t={},r,a){this.url=e,this.headers=t,this.bucketId=r,this.fetch=Ya(a)}uploadOrUpdate(e,t,r,a){return me(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Wn),a);let c=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,c["cache-control"]=`max-age=${o.cacheControl}`,c["content-type"]=o.contentType,l&&(c["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),a!=null&&a.headers&&(c=Object.assign(Object.assign({},c),a.headers));const d=this._removeEmptyFolders(t),u=this._getFinalPath(d),f=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:i,headers:c},o!=null&&o.duplex?{duplex:o.duplex}:{})),m=yield f.json();return f.ok?{data:{path:d,id:m.Id,fullPath:m.Key},error:null}:{data:null,error:m}}catch(i){if(oe(i))return{data:null,error:i};throw i}})}upload(e,t,r){return me(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,a){return me(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),c=new URL(this.url+`/object/upload/sign/${o}`);c.searchParams.set("token",t);try{let l;const d=Object.assign({upsert:Wn.upsert},a),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",d.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",d.cacheControl)):(l=r,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const f=yield this.fetch(c.toString(),{method:"PUT",body:l,headers:u}),m=yield f.json();return f.ok?{data:{path:i,fullPath:m.Key},error:null}:{data:null,error:m}}catch(l){if(oe(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return me(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const a=Object.assign({},this.headers);t!=null&&t.upsert&&(a["x-upsert"]="true");const i=yield Je(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:a}),o=new URL(this.url+i.url),c=o.searchParams.get("token");if(!c)throw new Gr("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:c},error:null}}catch(r){if(oe(r))return{data:null,error:r};throw r}})}update(e,t,r){return me(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return me(this,void 0,void 0,function*(){try{return{data:yield Je(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(oe(a))return{data:null,error:a};throw a}})}copy(e,t,r){return me(this,void 0,void 0,function*(){try{return{data:{path:(yield Je(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(oe(a))return{data:null,error:a};throw a}})}createSignedUrl(e,t,r){return me(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),i=yield Je(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(oe(a))return{data:null,error:a};throw a}})}createSignedUrls(e,t,r){return me(this,void 0,void 0,function*(){try{const a=yield Je(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(oe(a))return{data:null,error:a};throw a}})}download(e,t){return me(this,void 0,void 0,function*(){const a=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=i?`?${i}`:"";try{const c=this._getFinalPath(e);return{data:yield(yield ks(this.fetch,`${this.url}/${a}/${c}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(c){if(oe(c))return{data:null,error:c};throw c}})}info(e){return me(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield ks(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Sr(r),error:null}}catch(r){if(oe(r))return{data:null,error:r};throw r}})}exists(e){return me(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Pl(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(oe(r)&&r instanceof Er){const a=r.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),a=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&a.push(i);const c=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&a.push(l);let d=a.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${r}${d}`)}}}remove(e){return me(this,void 0,void 0,function*(){try{return{data:yield Ga(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(oe(t))return{data:null,error:t};throw t}})}list(e,t,r){return me(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},Ol),t),{prefix:e||""});return{data:yield Je(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},r),error:null}}catch(a){if(oe(a))return{data:null,error:a};throw a}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Al="2.7.1",Rl={"X-Client-Info":`storage-js/${Al}`};var mt=function(s,e,t,r){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function c(u){try{d(r.next(u))}catch(f){o(f)}}function l(u){try{d(r.throw(u))}catch(f){o(f)}}function d(u){u.done?i(u.value):a(u.value).then(c,l)}d((r=r.apply(s,e||[])).next())})};class Dl{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},Rl),t),this.fetch=Ya(r)}listBuckets(){return mt(this,void 0,void 0,function*(){try{return{data:yield ks(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(oe(e))return{data:null,error:e};throw e}})}getBucket(e){return mt(this,void 0,void 0,function*(){try{return{data:yield ks(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(oe(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return mt(this,void 0,void 0,function*(){try{return{data:yield Je(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(oe(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return mt(this,void 0,void 0,function*(){try{return{data:yield kl(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(oe(r))return{data:null,error:r};throw r}})}emptyBucket(e){return mt(this,void 0,void 0,function*(){try{return{data:yield Je(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(oe(t))return{data:null,error:t};throw t}})}deleteBucket(e){return mt(this,void 0,void 0,function*(){try{return{data:yield Ga(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(oe(t))return{data:null,error:t};throw t}})}}class $l extends Dl{constructor(e,t={},r){super(e,t,r)}from(e){return new Tl(this.url,this.headers,e,this.fetch)}}const Ll="2.49.1";let Bt="";typeof Deno<"u"?Bt="deno":typeof document<"u"?Bt="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Bt="react-native":Bt="node";const Ml={"X-Client-Info":`supabase-js-${Bt}/${Ll}`},Il={headers:Ml},Fl={schema:"public"},Ul={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Wl={};var Bl=function(s,e,t,r){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function c(u){try{d(r.next(u))}catch(f){o(f)}}function l(u){try{d(r.throw(u))}catch(f){o(f)}}function d(u){u.done?i(u.value):a(u.value).then(c,l)}d((r=r.apply(s,e||[])).next())})};const ql=s=>{let e;return s?e=s:typeof fetch>"u"?e=Ra:e=fetch,(...t)=>e(...t)},zl=()=>typeof Headers>"u"?Da:Headers,Vl=(s,e,t)=>{const r=ql(t),a=zl();return(i,o)=>Bl(void 0,void 0,void 0,function*(){var c;const l=(c=yield e())!==null&&c!==void 0?c:s;let d=new a(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",s),d.has("Authorization")||d.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},o),{headers:d}))})};var Hl=function(s,e,t,r){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function c(u){try{d(r.next(u))}catch(f){o(f)}}function l(u){try{d(r.throw(u))}catch(f){o(f)}}function d(u){u.done?i(u.value):a(u.value).then(c,l)}d((r=r.apply(s,e||[])).next())})};function Jl(s){return s.replace(/\/$/,"")}function Yl(s,e){const{db:t,auth:r,realtime:a,global:i}=s,{db:o,auth:c,realtime:l,global:d}=e,u={db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},c),r),realtime:Object.assign(Object.assign({},l),a),global:Object.assign(Object.assign({},d),i),accessToken:()=>Hl(this,void 0,void 0,function*(){return""})};return s.accessToken?u.accessToken=s.accessToken:delete u.accessToken,u}const Ka="2.68.0",bt=30*1e3,kr=3,nr=kr*bt,Gl="http://localhost:9999",Kl="supabase.auth.token",Xl={"X-Client-Info":`gotrue-js/${Ka}`},Pr="X-Supabase-Api-Version",Xa={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function Ql(s){return Math.round(Date.now()/1e3)+s}function Zl(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){const e=Math.random()*16|0;return(s=="x"?e:e&3|8).toString(16)})}const Te=()=>typeof window<"u"&&typeof document<"u",tt={tested:!1,writable:!1},zt=()=>{if(!Te())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(tt.tested)return tt.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),tt.tested=!0,tt.writable=!0}catch{tt.tested=!0,tt.writable=!1}return tt.writable};function ed(s){const e={},t=new URL(s);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((a,i)=>{e[i]=a})}catch{}return t.searchParams.forEach((r,a)=>{e[a]=r}),e}const Qa=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>Pt(async()=>{const{default:r}=await Promise.resolve().then(()=>Rt);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},td=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",Za=async(s,e,t)=>{await s.setItem(e,JSON.stringify(t))},us=async(s,e)=>{const t=await s.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},hs=async(s,e)=>{await s.removeItem(e)};function sd(s){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",r,a,i,o,c,l,d,u=0;for(s=s.replace("-","+").replace("_","/");u<s.length;)o=e.indexOf(s.charAt(u++)),c=e.indexOf(s.charAt(u++)),l=e.indexOf(s.charAt(u++)),d=e.indexOf(s.charAt(u++)),r=o<<2|c>>4,a=(c&15)<<4|l>>2,i=(l&3)<<6|d,t=t+String.fromCharCode(r),l!=64&&a!=0&&(t=t+String.fromCharCode(a)),d!=64&&i!=0&&(t=t+String.fromCharCode(i));return t}class Vs{constructor(){this.promise=new Vs.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Vs.promiseConstructor=Promise;function Bn(s){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=s.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=t[1];return JSON.parse(sd(r))}async function rd(s){return await new Promise(e=>{setTimeout(()=>e(null),s)})}function nd(s,e){return new Promise((r,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await s(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){a(o);return}}})()})}function ad(s){return("0"+s.toString(16)).substr(-2)}function id(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let a="";for(let i=0;i<56;i++)a+=t.charAt(Math.floor(Math.random()*r));return a}return crypto.getRandomValues(e),Array.from(e,ad).join("")}async function od(s){const t=new TextEncoder().encode(s),r=await crypto.subtle.digest("SHA-256",t),a=new Uint8Array(r);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}function cd(s){return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ld(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const t=await od(s);return cd(t)}async function gt(s,e,t=!1){const r=id();let a=r;t&&(a+="/PASSWORD_RECOVERY"),await Za(s,`${e}-code-verifier`,a);const i=await ld(r);return[i,r===i?"plain":"s256"]}const dd=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ud(s){const e=s.headers.get(Pr);if(!e||!e.match(dd))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class Kr extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function A(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class hd extends Kr{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function fd(s){return A(s)&&s.name==="AuthApiError"}class ei extends Kr{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class lt extends Kr{constructor(e,t,r,a){super(e,r,a),this.name=t,this.status=r}}class ze extends lt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function md(s){return A(s)&&s.name==="AuthSessionMissingError"}class ar extends lt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class fs extends lt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class ms extends lt{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function gd(s){return A(s)&&s.name==="AuthImplicitGrantRedirectError"}class qn extends lt{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Or extends lt{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function ir(s){return A(s)&&s.name==="AuthRetryableFetchError"}class zn extends lt{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}var pd=function(s,e){var t={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(s);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(s,r[a])&&(t[r[a]]=s[r[a]]);return t};const st=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),vd=[502,503,504];async function Vn(s){var e;if(!td(s))throw new Or(st(s),0);if(vd.includes(s.status))throw new Or(st(s),s.status);let t;try{t=await s.json()}catch(i){throw new ei(st(i),i)}let r;const a=ud(s);if(a&&a.getTime()>=Xa["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new zn(st(t),s.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new ze}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new zn(st(t),s.status,t.weak_password.reasons);throw new hd(st(t),s.status||500,r)}const xd=(s,e,t,r)=>{const a={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),t))};async function M(s,e,t,r){var a;const i=Object.assign({},r==null?void 0:r.headers);i[Pr]||(i[Pr]=Xa["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(a=r==null?void 0:r.query)!==null&&a!==void 0?a:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const c=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await yd(s,e,t+c,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function yd(s,e,t,r,a,i){const o=xd(e,r,a,i);let c;try{c=await s(t,Object.assign({},o))}catch(l){throw console.error(l),new Or(st(l),0)}if(c.ok||await Vn(c),r!=null&&r.noResolveJson)return c;try{return await c.json()}catch(l){await Vn(l)}}function Ve(s){var e;let t=null;_d(s)&&(t=Object.assign({},s),s.expires_at||(t.expires_at=Ql(s.expires_in)));const r=(e=s.user)!==null&&e!==void 0?e:s;return{data:{session:t,user:r},error:null}}function Hn(s){const e=Ve(s);return!e.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=s.weak_password),e}function Ye(s){var e;return{data:{user:(e=s.user)!==null&&e!==void 0?e:s},error:null}}function wd(s){return{data:s,error:null}}function bd(s){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:a,verification_type:i}=s,o=pd(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:e,email_otp:t,hashed_token:r,redirect_to:a,verification_type:i},l=Object.assign({},o);return{data:{properties:c,user:l},error:null}}function jd(s){return s}function _d(s){return s.access_token&&s.refresh_token&&s.expires_in}var Nd=function(s,e){var t={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(s);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(s,r[a])&&(t[r[a]]=s[r[a]]);return t};class Cd{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=Qa(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await M(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(A(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await M(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Ye})}catch(r){if(A(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=Nd(e,["options"]),a=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(a.new_email=r==null?void 0:r.newEmail,delete a.newEmail),await M(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:bd,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(A(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await M(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ye})}catch(t){if(A(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,a,i,o,c,l;try{const d={nextPage:null,lastPage:0,total:0},u=await M(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(i=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:jd});if(u.error)throw u.error;const f=await u.json(),m=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(l=(c=u.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(v=>{const p=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(v.split(";")[1].split("=")[1]);d[`${x}Page`]=p}),d.total=parseInt(m)),{data:Object.assign(Object.assign({},f),d),error:null}}catch(d){if(A(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){try{return await M(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ye})}catch(t){if(A(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await M(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Ye})}catch(r){if(A(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){try{return await M(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Ye})}catch(r){if(A(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:t,error:r}=await M(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:t,error:r}}catch(t){if(A(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await M(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(A(t))return{data:null,error:t};throw t}}}const Ed={getItem:s=>zt()?globalThis.localStorage.getItem(s):null,setItem:(s,e)=>{zt()&&globalThis.localStorage.setItem(s,e)},removeItem:s=>{zt()&&globalThis.localStorage.removeItem(s)}};function Jn(s={}){return{getItem:e=>s[e]||null,setItem:(e,t)=>{s[e]=t},removeItem:e=>{delete s[e]}}}function Sd(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const pt={debug:!!(globalThis&&zt()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ti extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class kd extends ti{}async function Pd(s,e,t){pt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),pt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async a=>{if(a){pt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,a.name);try{return await t()}finally{pt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,a.name)}}else{if(e===0)throw pt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new kd(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(pt.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}Sd();const Od={url:Gl,storageKey:Kl,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Xl,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Yn(s,e,t){return await t()}class Jt{constructor(e){var t,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Jt.nextInstanceID,Jt.nextInstanceID+=1,this.instanceID>0&&Te()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},Od),e);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new Cd({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=Qa(a.fetch),this.lock=a.lock||Yn,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:Te()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=Pd:this.lock=Yn,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?a.storage?this.storage=a.storage:zt()?this.storage=Ed:(this.memoryStorage={},this.storage=Jn(this.memoryStorage)):(this.memoryStorage={},this.storage=Jn(this.memoryStorage)),Te()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Ka}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=ed(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),Te()&&this.detectSessionInUrl&&r!=="none"){const{data:a,error:i}=await this._getSessionFromURL(t,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),gd(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:c}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",c),await this._saveSession(o),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return A(t)?{error:t}:{error:new ei("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,a;try{const i=await M(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:Ve}),{data:o,error:c}=i;if(c||!o)return{data:{user:null,session:null},error:c};const l=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(i){if(A(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,r,a;try{let i;if("email"in e){const{email:u,password:f,options:m}=e;let g=null,v=null;this.flowType==="pkce"&&([g,v]=await gt(this.storage,this.storageKey)),i=await M(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:u,password:f,data:(t=m==null?void 0:m.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:g,code_challenge_method:v},xform:Ve})}else if("phone"in e){const{phone:u,password:f,options:m}=e;i=await M(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:f,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},channel:(a=m==null?void 0:m.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Ve})}else throw new fs("You must provide either an email or phone number and a password");const{data:o,error:c}=i;if(c||!o)return{data:{user:null,session:null},error:c};const l=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(i){if(A(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:o,options:c}=e;t=await M(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:Hn})}else if("phone"in e){const{phone:i,password:o,options:c}=e;t=await M(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:Hn})}else throw new fs("You must provide either an email or phone number and a password");const{data:r,error:a}=t;return a?{data:{user:null,session:null},error:a}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new ar}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:a})}catch(t){if(A(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,a,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await us(this.storage,`${this.storageKey}-code-verifier`),[r,a]=(t??"").split("/");try{const{data:i,error:o}=await M(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Ve});if(await hs(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new ar}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(A(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:r,token:a,access_token:i,nonce:o}=e,c=await M(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Ve}),{data:l,error:d}=c;return d?{data:{user:null,session:null},error:d}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new ar}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:d})}catch(t){if(A(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,a,i,o;try{if("email"in e){const{email:c,options:l}=e;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await gt(this.storage,this.storageKey));const{error:f}=await M(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:c,options:l}=e,{data:d,error:u}=await M(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(a=l==null?void 0:l.data)!==null&&a!==void 0?a:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new fs("You must provide either an email or phone number.")}catch(c){if(A(c))return{data:{user:null,session:null},error:c};throw c}}async verifyOtp(e){var t,r;try{let a,i;"options"in e&&(a=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:c}=await M(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:Ve});if(c)throw c;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,d=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(a){if(A(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var t,r,a;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await gt(this.storage,this.storageKey)),await M(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:wd})}catch(i){if(A(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new ze;const{error:a}=await M(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if(A(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:a,options:i}=e,{error:o}=await M(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:a,options:i}=e,{data:o,error:c}=await M(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:c}}throw new fs("You must provide either an email or phone number and a type")}catch(t){if(A(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await us(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<nr:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,d,u)=>(!o&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,d,u))})}return{data:{session:e},error:null}}const{session:a,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await M(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ye}):await this._useSession(async t=>{var r,a,i;const{data:o,error:c}=t;if(c)throw c;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ze}:await M(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:Ye})})}catch(t){if(A(t))return md(t)&&(await this._removeSession(),await hs(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:a,error:i}=r;if(i)throw i;if(!a.session)throw new ze;const o=a.session;let c=null,l=null;this.flowType==="pkce"&&e.email!=null&&([c,l]=await gt(this.storage,this.storageKey));const{data:d,error:u}=await M(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:l}),jwt:o.access_token,xform:Ye});if(u)throw u;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(A(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return Bn(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ze;const t=Date.now()/1e3;let r=t,a=!0,i=null;const o=Bn(e.access_token);if(o.exp&&(r=o.exp,a=r<=t),a){const{session:c,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!c)return{data:{user:null,session:null},error:null};i=c}else{const{data:c,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(A(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:o,error:c}=t;if(c)throw c;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new ze;const{session:a,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(A(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Te())throw new ms("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ms(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new qn("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ms("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new qn("No code detected.");const{data:y,error:j}=await this._exchangeCodeForSession(e.code);if(j)throw j;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:c,expires_at:l,token_type:d}=e;if(!i||!c||!o||!d)throw new ms("No session defined in URL");const u=Math.round(Date.now()/1e3),f=parseInt(c);let m=u+f;l&&(m=parseInt(l));const g=m-u;g*1e3<=bt&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${f}s`);const v=m-f;u-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,m,u):u-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,m,u);const{data:p,error:x}=await this._getUser(i);if(x)throw x;const b={provider_token:r,provider_refresh_token:a,access_token:i,expires_in:f,expires_at:m,refresh_token:o,token_type:d,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:b,redirectType:e.type},error:null}}catch(r){if(A(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await us(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:a,error:i}=t;if(i)return{error:i};const o=(r=a.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:c}=await this.admin.signOut(o,e);if(c&&!(fd(c)&&(c.status===404||c.status===401||c.status===403)))return{error:c}}return e!=="others"&&(await this._removeSession(),await hs(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=Zl(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,a;try{const{data:{session:i},error:o}=t;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let r=null,a=null;this.flowType==="pkce"&&([r,a]=await gt(this.storage,this.storageKey,!0));try{return await M(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:a,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(A(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(A(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:a}=await this._useSession(async i=>{var o,c,l,d,u;const{data:f,error:m}=i;if(m)throw m;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await M(this.fetch,"GET",g,{headers:this.headers,jwt:(u=(d=f.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(a)throw a;return Te()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(A(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,a;const{data:i,error:o}=t;if(o)throw o;return await M(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0})})}catch(t){if(A(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await nd(async a=>(a>0&&await rd(200*Math.pow(2,a-1)),this._debug(t,"refreshing attempt",a),await M(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ve})),(a,i)=>{const o=200*Math.pow(2,a);return i&&ir(i)&&Date.now()+o-r<bt})}catch(r){if(this._debug(t,"error",r),A(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),Te()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const r=await us(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r)){this._debug(t,"session is not valid"),r!==null&&await this._removeSession();return}const a=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<nr;if(this._debug(t,`session has${a?"":" not"} expired with margin of ${nr}s`),a){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),ir(i)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(t,"error",r),console.error(r);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new ze;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Vs;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new ze;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const c={session:i.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(i){if(this._debug(a,"error",i),A(i)){const o={session:null,error:i};return ir(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,t,r=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(e,t)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let c=0;c<i.length;c+=1)console.error(i[c]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Za(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await hs(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Te()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),bt);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((r.expires_at*1e3-e)/bt);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${bt}ms, refresh threshold is ${kr} ticks`),a<=kr&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof ti)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Te()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const a=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&a.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&a.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await gt(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(c.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);a.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&a.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:a,error:i}=t;return i?{data:null,error:i}:await M(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(A(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,a;const{data:i,error:o}=t;if(o)return{data:null,error:o};const c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:d}=await M(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((a=l==null?void 0:l.totp)===null||a===void 0)&&a.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(A(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:a,error:i}=t;if(i)return{data:null,error:i};const{data:o,error:c}=await M(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:c})})}catch(t){if(A(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:a,error:i}=t;return i?{data:null,error:i}:await M(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(A(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],a=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:a,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:a},error:i}=e;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(a.access_token);let c=null;o.aal&&(c=o.aal);let l=c;((r=(t=a.user.factors)===null||t===void 0?void 0:t.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:c,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}}Jt.nextInstanceID=0;const Td=Jt;class Ad extends Td{constructor(e){super(e)}}var Rd=function(s,e,t,r){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function c(u){try{d(r.next(u))}catch(f){o(f)}}function l(u){try{d(r.throw(u))}catch(f){o(f)}}function d(u){u.done?i(u.value):a(u.value).then(c,l)}d((r=r.apply(s,e||[])).next())})};class Dd{constructor(e,t,r){var a,i,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const c=Jl(e);this.realtimeUrl=`${c}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${c}/auth/v1`,this.storageUrl=`${c}/storage/v1`,this.functionsUrl=`${c}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,d={db:Fl,realtime:Wl,auth:Object.assign(Object.assign({},Ul),{storageKey:l}),global:Il},u=Yl(r??{},d);this.storageKey=(a=u.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(f,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=Vl(t,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new il(`${c}/rest/v1`,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new Lc(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new $l(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Rd(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:a,storageKey:i,flowType:o,lock:c,debug:l},d,u){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Ad({url:this.authUrl,headers:Object.assign(Object.assign({},f),d),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:a,flowType:o,lock:c,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new bl(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const $d=(s,e,t)=>new Dd(s,e,t),Ld="https://sgqflujqjsjjgarislgi.supabase.co",Md="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNncWZsdWpxanNqamdhcmlzbGdpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDI1MDMyNzEsImV4cCI6MjA1ODA3OTI3MX0.yoj8GepvPkq101KAgm56SeZocycB9HEUwSz16sJmAxc",D=$d(Ld,Md),si=h.createContext();function Id({children:s}){const[e,t]=h.useState(null),[r,a]=h.useState(!0),[i,o]=h.useState(null);h.useEffect(()=>{D.auth.getSession().then(({data:{session:v}})=>{t((v==null?void 0:v.user)||null),a(!1),v!=null&&v.user&&c(v.user.id)});const{data:{subscription:g}}=D.auth.onAuthStateChange(async(v,p)=>{t((p==null?void 0:p.user)||null),a(!1),p!=null&&p.user?c(p.user.id):o(null)});return()=>g.unsubscribe()},[]);async function c(g){const{data:v,error:p}=await D.from("profiles").select("*").eq("id",g).single();p?console.error("Erro ao buscar perfil:",p):o(v)}async function l(g,v,p){const{data:x,error:b}=await D.auth.signUp({email:g,password:v});if(b)throw b;return x}async function d(g,v){const{data:p,error:x}=await D.auth.signInWithPassword({email:g,password:v});if(x)throw x;return p}async function u(){const{error:g}=await D.auth.signOut();if(g)throw g}async function f(g){const{data:v,error:p}=await D.from("profiles").update(g).eq("id",e.id);if(p)throw p;return o({...i,...g}),v}const m={user:e,profile:i,loading:r,signUp:l,signIn:d,signOut:u,updateProfile:f};return n.jsx(si.Provider,{value:m,children:s})}function je(){return h.useContext(si)}const ri=h.createContext({theme:"light",setTheme:()=>null});function Fd({children:s,defaultTheme:e="light",storageKey:t="vite-ui-theme"}){const[r,a]=h.useState(()=>localStorage.getItem(t)||e);h.useEffect(()=>{const o=window.document.documentElement;o.classList.remove("light","dark"),o.classList.add(r)},[r]);const i={theme:r,setTheme:o=>{localStorage.setItem(t,o),a(o)}};return n.jsx(ri.Provider,{value:i,children:s})}const Ud=()=>{const s=h.useContext(ri);if(s===void 0)throw new Error("useTheme must be used within a ThemeProvider");return s};function P(...s){return s.filter(Boolean).join(" ")}const Wd=s=>{if(!s)return"bg-primary";const e=["bg-red-500","bg-blue-500","bg-green-500","bg-yellow-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-teal-500","bg-orange-500","bg-cyan-500"],t=Array.from(s.toLowerCase()).reduce((r,a)=>r+a.charCodeAt(0),0);return e[t%e.length]},Bd=s=>{if(!s)return"?";if(s.includes("@"))return s.charAt(0).toUpperCase();const e=s.trim().split(/\s+/);return e.length===1?e[0].charAt(0).toUpperCase():(e[0].charAt(0)+e[e.length-1].charAt(0)).toUpperCase()},de=T.forwardRef(({className:s,...e},t)=>n.jsx("div",{ref:t,className:P("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...e}));de.displayName="Avatar";const _e=T.forwardRef(({className:s,...e},t)=>n.jsx("img",{ref:t,className:P("aspect-square h-full w-full",s),...e}));_e.displayName="AvatarImage";const le=T.forwardRef(({className:s,children:e,...t},r)=>{const a=T.Children.count(e)>0?e:t.name?Bd(t.name):"?",i=t.name?Wd(t.name):"bg-muted";return n.jsx("div",{ref:r,className:P("flex h-full w-full items-center justify-center rounded-full text-sm font-medium text-white",i,s),...t,children:a})});le.displayName="AvatarFallback";function Gn(s,e){if(typeof s=="function")return s(e);s!=null&&(s.current=e)}function ni(...s){return e=>{let t=!1;const r=s.map(a=>{const i=Gn(a,e);return!t&&typeof i=="function"&&(t=!0),i});if(t)return()=>{for(let a=0;a<r.length;a++){const i=r[a];typeof i=="function"?i():Gn(s[a],null)}}}}function Pe(...s){return h.useCallback(ni(...s),s)}var Zt=h.forwardRef((s,e)=>{const{children:t,...r}=s,a=h.Children.toArray(t),i=a.find(zd);if(i){const o=i.props.children,c=a.map(l=>l===i?h.Children.count(o)>1?h.Children.only(null):h.isValidElement(o)?o.props.children:null:l);return n.jsx(Tr,{...r,ref:e,children:h.isValidElement(o)?h.cloneElement(o,void 0,c):null})}return n.jsx(Tr,{...r,ref:e,children:t})});Zt.displayName="Slot";var Tr=h.forwardRef((s,e)=>{const{children:t,...r}=s;if(h.isValidElement(t)){const a=Hd(t),i=Vd(r,t.props);return t.type!==h.Fragment&&(i.ref=e?ni(e,a):a),h.cloneElement(t,i)}return h.Children.count(t)>1?h.Children.only(null):null});Tr.displayName="SlotClone";var qd=({children:s})=>n.jsx(n.Fragment,{children:s});function zd(s){return h.isValidElement(s)&&s.type===qd}function Vd(s,e){const t={...e};for(const r in e){const a=s[r],i=e[r];/^on[A-Z]/.test(r)?a&&i?t[r]=(...c)=>{i(...c),a(...c)}:a&&(t[r]=a):r==="style"?t[r]={...a,...i}:r==="className"&&(t[r]=[a,i].filter(Boolean).join(" "))}return{...s,...t}}function Hd(s){var r,a;let e=(r=Object.getOwnPropertyDescriptor(s.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?s.ref:(e=(a=Object.getOwnPropertyDescriptor(s,"ref"))==null?void 0:a.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?s.props.ref:s.props.ref||s.ref)}function ai(s){var e,t,r="";if(typeof s=="string"||typeof s=="number")r+=s;else if(typeof s=="object")if(Array.isArray(s)){var a=s.length;for(e=0;e<a;e++)s[e]&&(t=ai(s[e]))&&(r&&(r+=" "),r+=t)}else for(t in s)s[t]&&(r&&(r+=" "),r+=t);return r}function Jd(){for(var s,e,t=0,r="",a=arguments.length;t<a;t++)(s=arguments[t])&&(e=ai(s))&&(r&&(r+=" "),r+=e);return r}const Kn=s=>typeof s=="boolean"?`${s}`:s===0?"0":s,Xn=Jd,Yd=(s,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return Xn(s,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:a,defaultVariants:i}=e,o=Object.keys(a).map(d=>{const u=t==null?void 0:t[d],f=i==null?void 0:i[d];if(u===null)return null;const m=Kn(u)||Kn(f);return a[d][m]}),c=t&&Object.entries(t).reduce((d,u)=>{let[f,m]=u;return m===void 0||(d[f]=m),d},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((d,u)=>{let{class:f,className:m,...g}=u;return Object.entries(g).every(v=>{let[p,x]=v;return Array.isArray(x)?x.includes({...i,...c}[p]):{...i,...c}[p]===x})?[...d,f,m]:d},[]);return Xn(s,o,l,t==null?void 0:t.class,t==null?void 0:t.className)},or=Yd("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"underline-offset-4 hover:underline text-primary"},size:{default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md",lg:"h-11 px-8 rounded-md",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),E=h.forwardRef(({className:s,variant:e,size:t,asChild:r=!1,...a},i)=>{const o=r?Zt:"button";if(r&&a.children&&h.isValidElement(a.children)){const c=h.Children.only(a.children);return c.type==="button"||c.type==="a"||typeof c.type=="string"&&c.props.onClick?n.jsx(o,{className:P(or({variant:e,size:t,className:s})),ref:i,...a}):n.jsx("span",{className:P(or({variant:e,size:t,className:s})),ref:i,...a})}return n.jsx(o,{className:P(or({variant:e,size:t,className:s})),ref:i,...a})});E.displayName="Button";const Z=T.forwardRef(({className:s,type:e,...t},r)=>n.jsx("input",{type:e,className:P("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:r,...t}));Z.displayName="Input";function Xr(){const{user:s,profile:e,signOut:t}=je(),{theme:r,setTheme:a}=Ud(),i=Be(),o=async()=>{await t(),i("/login")};return n.jsxs("div",{className:"flex min-h-screen flex-col bg-background",children:[n.jsx("header",{className:"sticky top-0 z-40 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:n.jsxs("div",{className:"container flex h-16 items-center justify-between py-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(S,{to:"/",className:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-10 w-10",children:[n.jsx(Ho,{className:"h-5 w-5"}),n.jsx("span",{className:"sr-only",children:"Menu"})]}),n.jsxs(S,{to:"/",className:"flex items-center gap-2",children:[n.jsx("div",{className:"rounded-lg bg-primary p-1.5",children:n.jsx("div",{className:"h-6 w-6 text-primary-foreground font-bold flex items-center justify-center",children:"H"})}),n.jsx("span",{className:"hidden font-bold text-xl md:inline-block tracking-tight",children:"UFRJ Hub"})]})]}),n.jsx("div",{className:"hidden md:flex md:w-1/3",children:n.jsxs("form",{className:"relative w-full",onSubmit:c=>{c.preventDefault();const l=c.target.elements.search.value;l.trim()&&i(`/search?q=${encodeURIComponent(l)}`)},children:[n.jsx(Ss,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),n.jsx(Z,{id:"search",name:"search",type:"search",placeholder:"Pesquisar no UFRJ Hub...",className:"w-full pl-8 rounded-full bg-muted/50 hover:bg-muted focus:bg-background"})]})}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs(S,{to:"/search",className:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-10 w-10",children:[n.jsx(Ss,{className:"h-5 w-5 md:hidden"}),n.jsx("span",{className:"sr-only",children:"Pesquisar"})]}),s&&n.jsxs(n.Fragment,{children:[n.jsxs(S,{to:"/notifications",className:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-10 w-10",children:[n.jsx(Sa,{className:"h-5 w-5"}),n.jsx("span",{className:"sr-only",children:"Notificaes"})]}),n.jsxs(S,{to:"/messages",className:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-10 w-10",children:[n.jsx(Ms,{className:"h-5 w-5"}),n.jsx("span",{className:"sr-only",children:"Mensagens"})]})]}),n.jsxs(E,{variant:"ghost",size:"icon",onClick:()=>a(r==="light"?"dark":"light"),children:[r==="light"?n.jsx(Jo,{className:"h-5 w-5"}):n.jsx(Yo,{className:"h-5 w-5"}),n.jsx("span",{className:"sr-only",children:"Alternar tema"})]}),s?n.jsxs("div",{className:"relative profile-dropdown-trigger",children:[n.jsx(E,{variant:"ghost",className:"gap-2 p-1 hover:bg-accent",children:n.jsxs(de,{children:[n.jsx(_e,{src:e==null?void 0:e.avatar_url,alt:(e==null?void 0:e.display_name)||"Usurio"}),n.jsx(le,{name:(e==null?void 0:e.display_name)||s.email})]})}),n.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-card rounded-lg border shadow-lg overflow-hidden z-20 profile-dropdown",children:n.jsxs("div",{className:"py-2",children:[n.jsxs("div",{className:"px-4 py-3 border-b",children:[n.jsx("p",{className:"text-sm font-medium",children:(e==null?void 0:e.display_name)||"Usurio"}),n.jsx("p",{className:"text-xs text-muted-foreground truncate",children:s.email})]}),n.jsx(S,{to:"/profile",className:"flex items-center px-4 py-2.5 text-sm hover:bg-accent hover:text-accent-foreground",children:"Perfil"}),n.jsx(S,{to:"/settings",className:"flex items-center px-4 py-2.5 text-sm hover:bg-accent hover:text-accent-foreground",children:"Configuraes"}),n.jsx("div",{className:"border-t my-1"}),n.jsx("button",{onClick:o,className:"flex w-full items-center px-4 py-2.5 text-sm text-destructive hover:bg-destructive/10",children:"Sair"})]})})]}):n.jsxs(n.Fragment,{children:[n.jsx(S,{to:"/login",className:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2",children:"Login"}),n.jsx(S,{to:"/register",className:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2",children:"Cadastrar"})]})]})]})}),n.jsxs("div",{className:"container grid grid-cols-1 md:grid-cols-4 gap-6 py-6",children:[n.jsxs("div",{className:"hidden md:flex flex-col gap-4",children:[n.jsxs("nav",{className:"grid gap-1",children:[n.jsxs(S,{to:"/",className:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-10 w-full justify-start gap-2 px-3",children:[n.jsx(Pn,{className:"h-5 w-5"}),"Pgina Inicial"]}),n.jsxs(S,{to:"/communities",className:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-10 w-full justify-start gap-2 px-3",children:[n.jsx(kt,{className:"h-5 w-5"}),"Comunidades"]}),n.jsxs(S,{to:"/events",className:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-10 w-full justify-start gap-2 px-3",children:[n.jsx(Vt,{className:"h-5 w-5"}),"Eventos"]})]}),s&&n.jsxs("div",{className:"mt-4 border-t pt-4",children:[n.jsxs("div",{className:"flex items-center justify-between px-4 mb-2",children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Suas Comunidades"}),n.jsxs(S,{to:"/communities/new",className:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-10 w-10",children:[n.jsx(Ht,{className:"h-5 w-5"}),n.jsx("span",{className:"sr-only",children:"Criar Comunidade"})]})]}),n.jsx("div",{className:"grid gap-1",children:n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx("p",{className:"text-sm",children:"Voc ainda no participa de nenhuma comunidade"}),n.jsx(S,{to:"/communities",className:"inline-flex items-center justify-center text-sm font-medium text-primary hover:underline mt-2",children:"Explorar Comunidades"})]})})]}),!s&&n.jsx("div",{className:"mt-4 border-t pt-4",children:n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx("p",{className:"text-sm",children:"Faa login para ver suas comunidades"}),n.jsx(S,{to:"/login",className:"inline-flex items-center justify-center text-sm font-medium text-primary hover:underline mt-2",children:"Entrar"})]})})]}),n.jsx("main",{className:"md:col-span-2",children:n.jsx(Uo,{})}),n.jsxs("div",{className:"hidden md:flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-card rounded-lg border shadow-sm p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"font-semibold text-lg",children:"Prximos Eventos"}),s&&n.jsxs(S,{to:"/events/new",className:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-10 w-10",children:[n.jsx(Ht,{className:"h-5 w-5"}),n.jsx("span",{className:"sr-only",children:"Criar Evento"})]})]}),s?n.jsxs("div",{className:"text-center py-4",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Nenhum evento programado"}),n.jsx(S,{to:"/events",className:"inline-flex items-center justify-center text-sm font-medium text-primary hover:underline mt-2",children:"Ver Eventos"})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Faa login para ver eventos"}),n.jsx(S,{to:"/login",className:"inline-flex items-center justify-center text-sm font-medium text-primary hover:underline mt-2",children:"Entrar"})]})]}),!s&&n.jsxs("div",{className:"bg-card rounded-lg border shadow-sm p-4",children:[n.jsx("h2",{className:"font-semibold text-lg mb-2",children:"Junte-se ao UFRJ Hub"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Conecte-se com a comunidade acadmica da UFRJ."}),n.jsx(S,{to:"/register",className:"w-full bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2",children:"Criar Conta"})]})]})]}),n.jsx("div",{className:"md:hidden fixed bottom-0 left-0 right-0 border-t bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 z-40",children:n.jsxs("div",{className:"container flex items-center justify-between py-2",children:[n.jsxs(S,{to:"/",className:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-10 w-10",children:[n.jsx(Pn,{className:"h-5 w-5"}),n.jsx("span",{className:"sr-only",children:"Pgina Inicial"})]}),n.jsxs(S,{to:"/communities",className:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-10 w-10",children:[n.jsx(kt,{className:"h-5 w-5"}),n.jsx("span",{className:"sr-only",children:"Comunidades"})]}),n.jsxs(S,{to:"/events",className:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-10 w-10",children:[n.jsx(Vt,{className:"h-5 w-5"}),n.jsx("span",{className:"sr-only",children:"Eventos"})]}),s?n.jsxs(S,{to:"/profile",className:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-10 w-10",children:[n.jsxs(de,{className:"h-6 w-6",children:[n.jsx(_e,{src:e==null?void 0:e.avatar_url,alt:(e==null?void 0:e.display_name)||"Usurio"}),n.jsx(le,{name:(e==null?void 0:e.display_name)||(s==null?void 0:s.email)})]}),n.jsx("span",{className:"sr-only",children:"Perfil"})]}):n.jsxs(S,{to:"/login",className:"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-10 w-10",children:[n.jsx(de,{className:"h-6 w-6",children:n.jsx(le,{children:"?"})}),n.jsx("span",{className:"sr-only",children:"Login"})]})]})})]})}const ii=T.createContext({});function Gd({children:s}){const[e,t]=T.useState([]),r=T.useCallback(({title:i,description:o,variant:c="default"})=>{const l=Math.random().toString(36).substr(2,9);t(d=>[...d,{id:l,title:i,description:o,variant:c}]),setTimeout(()=>{t(d=>d.filter(u=>u.id!==l))},5e3)},[]),a=T.useCallback(i=>{t(o=>o.filter(c=>c.id!==i))},[]);return T.useEffect(()=>(window.__toastContext={addToast:r,removeToast:a},()=>{delete window.__toastContext}),[r,a]),n.jsxs(ii.Provider,{value:{addToast:r,removeToast:a},children:[s,n.jsx("div",{className:"fixed bottom-0 right-0 z-50 flex flex-col gap-2 p-4",children:e.map(i=>n.jsx(Xd,{...i},i.id))})]})}function Kd(){const s=T.useContext(ii);if(!s)throw new Error("useToast must be used within a ToastProvider");return s}function Xd({id:s,title:e,description:t,variant:r="default"}){const{removeToast:a}=Kd(),i={default:"bg-background border",destructive:"bg-destructive text-destructive-foreground"};return n.jsx("div",{className:P("rounded-lg border p-4 shadow-lg",i[r]),children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{children:[e&&n.jsx("h4",{className:"font-semibold",children:e}),t&&n.jsx("p",{className:"text-sm opacity-90",children:t})]}),n.jsx("button",{onClick:()=>a(s),className:"ml-4 text-sm opacity-70 hover:opacity-100",children:""})]})})}function Qd(){return n.jsx(Gd,{children:n.jsx("div",{})})}function R({title:s,description:e,variant:t="default"}){const r=new CustomEvent("toast",{detail:{title:s,description:e,variant:t}});window.dispatchEvent(r)}typeof window<"u"&&window.addEventListener("toast",s=>{const{addToast:e}=window.__toastContext||{};e&&e(s.detail)});const Qr=T.createContext({}),$t=({defaultValue:s,value:e,onValueChange:t,className:r,children:a,...i})=>{const[o,c]=T.useState(e||s);T.useEffect(()=>{e!==void 0&&c(e)},[e]);const l=u=>{c(u),t&&t(u)},d=T.useMemo(()=>({selectedValue:o,onValueChange:l}),[o,l]);return n.jsx(Qr.Provider,{value:d,children:n.jsx("div",{className:P("w-full",r),...i,children:T.Children.map(a,u=>T.isValidElement(u)?T.cloneElement(u):null)})})},dt=T.forwardRef(({className:s,...e},t)=>n.jsx("div",{ref:t,className:P("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...e}));dt.displayName="TabsList";const ue=T.forwardRef(({className:s,value:e,...t},r)=>{const{selectedValue:a,onValueChange:i}=T.useContext(Qr),o=a===e;return n.jsx("button",{ref:r,className:P("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",o?"bg-background text-foreground shadow-sm":"hover:bg-background/50 hover:text-foreground",s),onClick:()=>i(e),...t})});ue.displayName="TabsTrigger";const he=T.forwardRef(({className:s,value:e,...t},r)=>{const{selectedValue:a}=T.useContext(Qr);return a!==e?null:n.jsx("div",{ref:r,className:P("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...t})});he.displayName="TabsContent";const I=({className:s,...e})=>n.jsx("div",{className:P("animate-pulse rounded-md bg-muted",s),...e}),oi=6048e5,Zd=864e5,gs=43200,Qn=1440,Zn=Symbol.for("constructDateFrom");function Le(s,e){return typeof s=="function"?s(e):s&&typeof s=="object"&&Zn in s?s[Zn](e):s instanceof Date?new s.constructor(e):new Date(e)}function Q(s,e){return Le(e||s,s)}function eu(s,e,t){const r=Q(s,t==null?void 0:t.in);return isNaN(e)?Le(s,NaN):(r.setDate(r.getDate()+e),r)}let tu={};function es(){return tu}function Yt(s,e){var c,l,d,u;const t=es(),r=(e==null?void 0:e.weekStartsOn)??((l=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:l.weekStartsOn)??t.weekStartsOn??((u=(d=t.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,a=Q(s,e==null?void 0:e.in),i=a.getDay(),o=(i<r?7:0)+i-r;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function Ps(s,e){return Yt(s,{...e,weekStartsOn:1})}function ci(s,e){const t=Q(s,e==null?void 0:e.in),r=t.getFullYear(),a=Le(t,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const i=Ps(a),o=Le(t,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const c=Ps(o);return t.getTime()>=i.getTime()?r+1:t.getTime()>=c.getTime()?r:r-1}function Os(s){const e=Q(s),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+s-+t}function Hs(s,...e){const t=Le.bind(null,s||e.find(r=>typeof r=="object"));return e.map(t)}function ea(s,e){const t=Q(s,e==null?void 0:e.in);return t.setHours(0,0,0,0),t}function su(s,e,t){const[r,a]=Hs(t==null?void 0:t.in,s,e),i=ea(r),o=ea(a),c=+i-Os(i),l=+o-Os(o);return Math.round((c-l)/Zd)}function ru(s,e){const t=ci(s,e),r=Le(s,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Ps(r)}function js(s,e){const t=+Q(s)-+Q(e);return t<0?-1:t>0?1:t}function nu(s){return Le(s,Date.now())}function au(s){return s instanceof Date||typeof s=="object"&&Object.prototype.toString.call(s)==="[object Date]"}function iu(s){return!(!au(s)&&typeof s!="number"||isNaN(+Q(s)))}function ou(s,e,t){const[r,a]=Hs(t==null?void 0:t.in,s,e),i=r.getFullYear()-a.getFullYear(),o=r.getMonth()-a.getMonth();return i*12+o}function cu(s){return e=>{const r=(s?Math[s]:Math.trunc)(e);return r===0?0:r}}function lu(s,e){return+Q(s)-+Q(e)}function du(s,e){const t=Q(s,e==null?void 0:e.in);return t.setHours(23,59,59,999),t}function uu(s,e){const t=Q(s,e==null?void 0:e.in),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function hu(s,e){const t=Q(s,e==null?void 0:e.in);return+du(t,e)==+uu(t,e)}function fu(s,e,t){const[r,a,i]=Hs(t==null?void 0:t.in,s,s,e),o=js(a,i),c=Math.abs(ou(a,i));if(c<1)return 0;a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-o*c);let l=js(a,i)===-o;hu(r)&&c===1&&js(r,i)===1&&(l=!1);const d=o*(c-+l);return d===0?0:d}function mu(s,e,t){const r=lu(s,e)/1e3;return cu(t==null?void 0:t.roundingMethod)(r)}function gu(s,e){const t=Q(s,e==null?void 0:e.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}const pu={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},vu=(s,e,t)=>{let r;const a=pu[s];return typeof a=="string"?r=a:e===1?r=a.one:r=a.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function Ct(s){return(e={})=>{const t=e.width?String(e.width):s.defaultWidth;return s.formats[t]||s.formats[s.defaultWidth]}}const xu={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},yu={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},wu={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},bu={date:Ct({formats:xu,defaultWidth:"full"}),time:Ct({formats:yu,defaultWidth:"full"}),dateTime:Ct({formats:wu,defaultWidth:"full"})},ju={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},_u=(s,e,t,r)=>ju[s];function Ae(s){return(e,t)=>{const r=t!=null&&t.context?String(t.context):"standalone";let a;if(r==="formatting"&&s.formattingValues){const o=s.defaultFormattingWidth||s.defaultWidth,c=t!=null&&t.width?String(t.width):o;a=s.formattingValues[c]||s.formattingValues[o]}else{const o=s.defaultWidth,c=t!=null&&t.width?String(t.width):s.defaultWidth;a=s.values[c]||s.values[o]}const i=s.argumentCallback?s.argumentCallback(e):e;return a[i]}}const Nu={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Cu={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Eu={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Su={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ku={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Pu={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Ou=(s,e)=>{const t=Number(s),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},Tu={ordinalNumber:Ou,era:Ae({values:Nu,defaultWidth:"wide"}),quarter:Ae({values:Cu,defaultWidth:"wide",argumentCallback:s=>s-1}),month:Ae({values:Eu,defaultWidth:"wide"}),day:Ae({values:Su,defaultWidth:"wide"}),dayPeriod:Ae({values:ku,defaultWidth:"wide",formattingValues:Pu,defaultFormattingWidth:"wide"})};function Re(s){return(e,t={})=>{const r=t.width,a=r&&s.matchPatterns[r]||s.matchPatterns[s.defaultMatchWidth],i=e.match(a);if(!i)return null;const o=i[0],c=r&&s.parsePatterns[r]||s.parsePatterns[s.defaultParseWidth],l=Array.isArray(c)?Ru(c,f=>f.test(o)):Au(c,f=>f.test(o));let d;d=s.valueCallback?s.valueCallback(l):l,d=t.valueCallback?t.valueCallback(d):d;const u=e.slice(o.length);return{value:d,rest:u}}}function Au(s,e){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t)&&e(s[t]))return t}function Ru(s,e){for(let t=0;t<s.length;t++)if(e(s[t]))return t}function li(s){return(e,t={})=>{const r=e.match(s.matchPattern);if(!r)return null;const a=r[0],i=e.match(s.parsePattern);if(!i)return null;let o=s.valueCallback?s.valueCallback(i[0]):i[0];o=t.valueCallback?t.valueCallback(o):o;const c=e.slice(a.length);return{value:o,rest:c}}}const Du=/^(\d+)(th|st|nd|rd)?/i,$u=/\d+/i,Lu={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Mu={any:[/^b/i,/^(a|c)/i]},Iu={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Fu={any:[/1/i,/2/i,/3/i,/4/i]},Uu={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Wu={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Bu={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},qu={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},zu={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Vu={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Hu={ordinalNumber:li({matchPattern:Du,parsePattern:$u,valueCallback:s=>parseInt(s,10)}),era:Re({matchPatterns:Lu,defaultMatchWidth:"wide",parsePatterns:Mu,defaultParseWidth:"any"}),quarter:Re({matchPatterns:Iu,defaultMatchWidth:"wide",parsePatterns:Fu,defaultParseWidth:"any",valueCallback:s=>s+1}),month:Re({matchPatterns:Uu,defaultMatchWidth:"wide",parsePatterns:Wu,defaultParseWidth:"any"}),day:Re({matchPatterns:Bu,defaultMatchWidth:"wide",parsePatterns:qu,defaultParseWidth:"any"}),dayPeriod:Re({matchPatterns:zu,defaultMatchWidth:"any",parsePatterns:Vu,defaultParseWidth:"any"})},di={code:"en-US",formatDistance:vu,formatLong:bu,formatRelative:_u,localize:Tu,match:Hu,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Ju(s,e){const t=Q(s,e==null?void 0:e.in);return su(t,gu(t))+1}function Yu(s,e){const t=Q(s,e==null?void 0:e.in),r=+Ps(t)-+ru(t);return Math.round(r/oi)+1}function ui(s,e){var u,f,m,g;const t=Q(s,e==null?void 0:e.in),r=t.getFullYear(),a=es(),i=(e==null?void 0:e.firstWeekContainsDate)??((f=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??a.firstWeekContainsDate??((g=(m=a.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??1,o=Le((e==null?void 0:e.in)||s,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const c=Yt(o,e),l=Le((e==null?void 0:e.in)||s,0);l.setFullYear(r,0,i),l.setHours(0,0,0,0);const d=Yt(l,e);return+t>=+c?r+1:+t>=+d?r:r-1}function Gu(s,e){var c,l,d,u;const t=es(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:l.firstWeekContainsDate)??t.firstWeekContainsDate??((u=(d=t.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,a=ui(s,e),i=Le((e==null?void 0:e.in)||s,0);return i.setFullYear(a,0,r),i.setHours(0,0,0,0),Yt(i,e)}function Ku(s,e){const t=Q(s,e==null?void 0:e.in),r=+Yt(t,e)-+Gu(t,e);return Math.round(r/oi)+1}function q(s,e){const t=s<0?"-":"",r=Math.abs(s).toString().padStart(e,"0");return t+r}const qe={y(s,e){const t=s.getFullYear(),r=t>0?t:1-t;return q(e==="yy"?r%100:r,e.length)},M(s,e){const t=s.getMonth();return e==="M"?String(t+1):q(t+1,2)},d(s,e){return q(s.getDate(),e.length)},a(s,e){const t=s.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(s,e){return q(s.getHours()%12||12,e.length)},H(s,e){return q(s.getHours(),e.length)},m(s,e){return q(s.getMinutes(),e.length)},s(s,e){return q(s.getSeconds(),e.length)},S(s,e){const t=e.length,r=s.getMilliseconds(),a=Math.trunc(r*Math.pow(10,t-3));return q(a,e.length)}},vt={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ta={G:function(s,e,t){const r=s.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(s,e,t){if(e==="yo"){const r=s.getFullYear(),a=r>0?r:1-r;return t.ordinalNumber(a,{unit:"year"})}return qe.y(s,e)},Y:function(s,e,t,r){const a=ui(s,r),i=a>0?a:1-a;if(e==="YY"){const o=i%100;return q(o,2)}return e==="Yo"?t.ordinalNumber(i,{unit:"year"}):q(i,e.length)},R:function(s,e){const t=ci(s);return q(t,e.length)},u:function(s,e){const t=s.getFullYear();return q(t,e.length)},Q:function(s,e,t){const r=Math.ceil((s.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return q(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(s,e,t){const r=Math.ceil((s.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return q(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(s,e,t){const r=s.getMonth();switch(e){case"M":case"MM":return qe.M(s,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(s,e,t){const r=s.getMonth();switch(e){case"L":return String(r+1);case"LL":return q(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(s,e,t,r){const a=Ku(s,r);return e==="wo"?t.ordinalNumber(a,{unit:"week"}):q(a,e.length)},I:function(s,e,t){const r=Yu(s);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):q(r,e.length)},d:function(s,e,t){return e==="do"?t.ordinalNumber(s.getDate(),{unit:"date"}):qe.d(s,e)},D:function(s,e,t){const r=Ju(s);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):q(r,e.length)},E:function(s,e,t){const r=s.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(s,e,t,r){const a=s.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return q(i,2);case"eo":return t.ordinalNumber(i,{unit:"day"});case"eee":return t.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(a,{width:"short",context:"formatting"});case"eeee":default:return t.day(a,{width:"wide",context:"formatting"})}},c:function(s,e,t,r){const a=s.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return q(i,e.length);case"co":return t.ordinalNumber(i,{unit:"day"});case"ccc":return t.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(a,{width:"narrow",context:"standalone"});case"cccccc":return t.day(a,{width:"short",context:"standalone"});case"cccc":default:return t.day(a,{width:"wide",context:"standalone"})}},i:function(s,e,t){const r=s.getDay(),a=r===0?7:r;switch(e){case"i":return String(a);case"ii":return q(a,e.length);case"io":return t.ordinalNumber(a,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(s,e,t){const a=s.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(s,e,t){const r=s.getHours();let a;switch(r===12?a=vt.noon:r===0?a=vt.midnight:a=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(s,e,t){const r=s.getHours();let a;switch(r>=17?a=vt.evening:r>=12?a=vt.afternoon:r>=4?a=vt.morning:a=vt.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(s,e,t){if(e==="ho"){let r=s.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return qe.h(s,e)},H:function(s,e,t){return e==="Ho"?t.ordinalNumber(s.getHours(),{unit:"hour"}):qe.H(s,e)},K:function(s,e,t){const r=s.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):q(r,e.length)},k:function(s,e,t){let r=s.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):q(r,e.length)},m:function(s,e,t){return e==="mo"?t.ordinalNumber(s.getMinutes(),{unit:"minute"}):qe.m(s,e)},s:function(s,e,t){return e==="so"?t.ordinalNumber(s.getSeconds(),{unit:"second"}):qe.s(s,e)},S:function(s,e){return qe.S(s,e)},X:function(s,e,t){const r=s.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return ra(r);case"XXXX":case"XX":return rt(r);case"XXXXX":case"XXX":default:return rt(r,":")}},x:function(s,e,t){const r=s.getTimezoneOffset();switch(e){case"x":return ra(r);case"xxxx":case"xx":return rt(r);case"xxxxx":case"xxx":default:return rt(r,":")}},O:function(s,e,t){const r=s.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+sa(r,":");case"OOOO":default:return"GMT"+rt(r,":")}},z:function(s,e,t){const r=s.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+sa(r,":");case"zzzz":default:return"GMT"+rt(r,":")}},t:function(s,e,t){const r=Math.trunc(+s/1e3);return q(r,e.length)},T:function(s,e,t){return q(+s,e.length)}};function sa(s,e=""){const t=s>0?"-":"+",r=Math.abs(s),a=Math.trunc(r/60),i=r%60;return i===0?t+String(a):t+String(a)+e+q(i,2)}function ra(s,e){return s%60===0?(s>0?"-":"+")+q(Math.abs(s)/60,2):rt(s,e)}function rt(s,e=""){const t=s>0?"-":"+",r=Math.abs(s),a=q(Math.trunc(r/60),2),i=q(r%60,2);return t+a+e+i}const na=(s,e)=>{switch(s){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},hi=(s,e)=>{switch(s){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Xu=(s,e)=>{const t=s.match(/(P+)(p+)?/)||[],r=t[1],a=t[2];if(!a)return na(s,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",na(r,e)).replace("{{time}}",hi(a,e))},Qu={p:hi,P:Xu},Zu=/^D+$/,eh=/^Y+$/,th=["D","DD","YY","YYYY"];function sh(s){return Zu.test(s)}function rh(s){return eh.test(s)}function nh(s,e,t){const r=ah(s,e,t);if(console.warn(r),th.includes(s))throw new RangeError(r)}function ah(s,e,t){const r=s[0]==="Y"?"years":"days of the month";return`Use \`${s.toLowerCase()}\` instead of \`${s}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const ih=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,oh=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ch=/^'([^]*?)'?$/,lh=/''/g,dh=/[a-zA-Z]/;function uh(s,e,t){var u,f,m,g,v,p,x,b;const r=es(),a=(t==null?void 0:t.locale)??r.locale??di,i=(t==null?void 0:t.firstWeekContainsDate)??((f=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??r.firstWeekContainsDate??((g=(m=r.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??1,o=(t==null?void 0:t.weekStartsOn)??((p=(v=t==null?void 0:t.locale)==null?void 0:v.options)==null?void 0:p.weekStartsOn)??r.weekStartsOn??((b=(x=r.locale)==null?void 0:x.options)==null?void 0:b.weekStartsOn)??0,c=Q(s,t==null?void 0:t.in);if(!iu(c))throw new RangeError("Invalid time value");let l=e.match(oh).map(y=>{const j=y[0];if(j==="p"||j==="P"){const _=Qu[j];return _(y,a.formatLong)}return y}).join("").match(ih).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const j=y[0];if(j==="'")return{isToken:!1,value:hh(y)};if(ta[j])return{isToken:!0,value:y};if(j.match(dh))throw new RangeError("Format string contains an unescaped latin alphabet character `"+j+"`");return{isToken:!1,value:y}});a.localize.preprocessor&&(l=a.localize.preprocessor(c,l));const d={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return l.map(y=>{if(!y.isToken)return y.value;const j=y.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&rh(j)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&sh(j))&&nh(j,e,String(s));const _=ta[j[0]];return _(c,j,a.localize,d)}).join("")}function hh(s){const e=s.match(ch);return e?e[1].replace(lh,"'"):s}function fh(s,e,t){const r=es(),a=(t==null?void 0:t.locale)??r.locale??di,i=2520,o=js(s,e);if(isNaN(o))throw new RangeError("Invalid time value");const c=Object.assign({},t,{addSuffix:t==null?void 0:t.addSuffix,comparison:o}),[l,d]=Hs(t==null?void 0:t.in,...o>0?[e,s]:[s,e]),u=mu(d,l),f=(Os(d)-Os(l))/1e3,m=Math.round((u-f)/60);let g;if(m<2)return t!=null&&t.includeSeconds?u<5?a.formatDistance("lessThanXSeconds",5,c):u<10?a.formatDistance("lessThanXSeconds",10,c):u<20?a.formatDistance("lessThanXSeconds",20,c):u<40?a.formatDistance("halfAMinute",0,c):u<60?a.formatDistance("lessThanXMinutes",1,c):a.formatDistance("xMinutes",1,c):m===0?a.formatDistance("lessThanXMinutes",1,c):a.formatDistance("xMinutes",m,c);if(m<45)return a.formatDistance("xMinutes",m,c);if(m<90)return a.formatDistance("aboutXHours",1,c);if(m<Qn){const v=Math.round(m/60);return a.formatDistance("aboutXHours",v,c)}else{if(m<i)return a.formatDistance("xDays",1,c);if(m<gs){const v=Math.round(m/Qn);return a.formatDistance("xDays",v,c)}else if(m<gs*2)return g=Math.round(m/gs),a.formatDistance("aboutXMonths",g,c)}if(g=fu(d,l),g<12){const v=Math.round(m/gs);return a.formatDistance("xMonths",v,c)}else{const v=g%12,p=Math.trunc(g/12);return v<3?a.formatDistance("aboutXYears",p,c):v<9?a.formatDistance("overXYears",p,c):a.formatDistance("almostXYears",p+1,c)}}function Zr(s,e){return fh(s,nu(s),e)}function mh(s,e){return+Q(s)>+Q(e)}function gh(s,e){return+Q(s)<+Q(e)}const ph={lessThanXSeconds:{one:"menos de um segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"meio minuto",lessThanXMinutes:{one:"menos de um minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"cerca de 1 hora",other:"cerca de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 dia",other:"{{count}} dias"},aboutXWeeks:{one:"cerca de 1 semana",other:"cerca de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"cerca de 1 ms",other:"cerca de {{count}} meses"},xMonths:{one:"1 ms",other:"{{count}} meses"},aboutXYears:{one:"cerca de 1 ano",other:"cerca de {{count}} anos"},xYears:{one:"1 ano",other:"{{count}} anos"},overXYears:{one:"mais de 1 ano",other:"mais de {{count}} anos"},almostXYears:{one:"quase 1 ano",other:"quase {{count}} anos"}},vh=(s,e,t)=>{let r;const a=ph[s];return typeof a=="string"?r=a:e===1?r=a.one:r=a.other.replace("{{count}}",String(e)),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"em "+r:"h "+r:r},xh={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/yyyy"},yh={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},wh={full:"{{date}} 's' {{time}}",long:"{{date}} 's' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},bh={date:Ct({formats:xh,defaultWidth:"full"}),time:Ct({formats:yh,defaultWidth:"full"}),dateTime:Ct({formats:wh,defaultWidth:"full"})},jh={lastWeek:s=>{const e=s.getDay();return"'"+(e===0||e===6?"ltimo":"ltima")+"' eeee 's' p"},yesterday:"'ontem s' p",today:"'hoje s' p",tomorrow:"'amanh s' p",nextWeek:"eeee 's' p",other:"P"},_h=(s,e,t,r)=>{const a=jh[s];return typeof a=="function"?a(e):a},Nh={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","depois de cristo"]},Ch={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},Eh={narrow:["j","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],wide:["janeiro","fevereiro","maro","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},Sh={narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sab"],abbreviated:["domingo","segunda","tera","quarta","quinta","sexta","sbado"],wide:["domingo","segunda-feira","tera-feira","quarta-feira","quinta-feira","sexta-feira","sbado"]},kh={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"}},Ph={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"}},Oh=(s,e)=>{const t=Number(s);return(e==null?void 0:e.unit)==="week"?t+"":t+""},Th={ordinalNumber:Oh,era:Ae({values:Nh,defaultWidth:"wide"}),quarter:Ae({values:Ch,defaultWidth:"wide",argumentCallback:s=>s-1}),month:Ae({values:Eh,defaultWidth:"wide"}),day:Ae({values:Sh,defaultWidth:"wide"}),dayPeriod:Ae({values:kh,defaultWidth:"wide",formattingValues:Ph,defaultFormattingWidth:"wide"})},Ah=/^(\d+)[o]?/i,Rh=/\d+/i,Dh={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|d\.?\s?c\.?)/i,wide:/^(antes de cristo|depois de cristo)/i},$h={any:[/^ac/i,/^dc/i],wide:[/^antes de cristo/i,/^depois de cristo/i]},Lh={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},Mh={any:[/1/i,/2/i,/3/i,/4/i]},Ih={narrow:/^[jfmajsond]/i,abbreviated:/^(jan|fev|mar|abr|mai|jun|jul|ago|set|out|nov|dez)/i,wide:/^(janeiro|fevereiro|maro|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro)/i},Fh={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^fev/i,/^mar/i,/^abr/i,/^mai/i,/^jun/i,/^jul/i,/^ago/i,/^set/i,/^out/i,/^nov/i,/^dez/i]},Uh={narrow:/^(dom|[23456]?|s[a]b)/i,short:/^(dom|[23456]?|s[a]b)/i,abbreviated:/^(dom|seg|ter|qua|qui|sex|s[a]b)/i,wide:/^(domingo|(segunda|ter[c]a|quarta|quinta|sexta)([- ]feira)?|s[a]bado)/i},Wh={short:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[a]/i],narrow:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[a]/i],any:[/^d/i,/^seg/i,/^t/i,/^qua/i,/^qui/i,/^sex/i,/^s[a]b/i]},Bh={narrow:/^(a|p|mn|md|(da) (manh|tarde|noite))/i,any:/^([ap]\.?\s?m\.?|meia[-\s]noite|meio[-\s]dia|(da) (manh|tarde|noite))/i},qh={any:{am:/^a/i,pm:/^p/i,midnight:/^mn|^meia[-\s]noite/i,noon:/^md|^meio[-\s]dia/i,morning:/manh/i,afternoon:/tarde/i,evening:/tarde/i,night:/noite/i}},zh={ordinalNumber:li({matchPattern:Ah,parsePattern:Rh,valueCallback:s=>parseInt(s,10)}),era:Re({matchPatterns:Dh,defaultMatchWidth:"wide",parsePatterns:$h,defaultParseWidth:"any"}),quarter:Re({matchPatterns:Lh,defaultMatchWidth:"wide",parsePatterns:Mh,defaultParseWidth:"any",valueCallback:s=>s+1}),month:Re({matchPatterns:Ih,defaultMatchWidth:"wide",parsePatterns:Fh,defaultParseWidth:"any"}),day:Re({matchPatterns:Uh,defaultMatchWidth:"wide",parsePatterns:Wh,defaultParseWidth:"any"}),dayPeriod:Re({matchPatterns:Bh,defaultMatchWidth:"any",parsePatterns:qh,defaultParseWidth:"any"})},Js={code:"pt-BR",formatDistance:vh,formatLong:bh,formatRelative:_h,localize:Th,match:zh,options:{weekStartsOn:0,firstWeekContainsDate:1}},Vh=async(s={})=>{try{const{limit:e=10,community:t=null,sort:r="created_at.desc",following:a=!1}=s;let i=D.from("posts").select(`
        id, 
        title, 
        content, 
        created_at, 
        upvotes, 
        downvotes,
        author_id,
        community_id,
        communities(id, name, slug),
        profiles(id, display_name, username, avatar_url)
      `).limit(e).order("created_at",{ascending:!1});t&&(i=i.eq("community_id",t));const{data:o,error:c}=await i;if(c)throw c;return o.map(l=>({...l,author:l.profiles,community:l.communities,comment_count:0}))}catch(e){throw console.error("Error fetching posts:",e),e}},fi=async(s={})=>{try{const{limit:e=20,category:t=null}=s;let r=D.from("communities").select(`
        *,
        community_members!inner (
          user_id
        )
      `).limit(e);t&&(r=r.eq("category",t));const{data:a,error:i}=await r;if(i)throw i;return a||[]}catch(e){throw console.error("Error fetching communities:",e),e}},Hh=async s=>{try{const{data:{user:e}}=await D.auth.getUser();if(!e)throw new Error("User not authenticated");const{image_url:t,...r}=s,{data:a,error:i}=await D.from("posts").insert([{...r,author_id:e.id}]).select();if(i)throw i;return a[0]}catch(e){throw console.error("Error creating post:",e),e}},en=async s=>{try{const{data:{user:e}}=await D.auth.getUser();if(!e)throw new Error("User not authenticated");const{error:t}=await D.from("community_members").insert({community_id:s,user_id:e.id});if(t)throw t;return!0}catch(e){return console.error("Error joining community:",e),!1}},mi=async s=>{try{const{data:{user:e}}=await D.auth.getUser();if(!e)throw new Error("User not authenticated");const{error:t}=await D.from("community_members").delete().match({community_id:s,user_id:e.id});if(t)throw t;return!0}catch(e){return console.error("Error leaving community:",e),!1}},Jh=async s=>{try{const{data:e,error:t}=await D.from("communities").select(`
        *,
        community_members(user_id)
      `).eq("slug",s).single();if(t)throw t;return e}catch(e){throw console.error(`Error fetching community ${s}:`,e),e}},Yh=async(s,e={})=>{try{const{limit:t=20,sort:r="created_at.desc"}=e;let a=D.from("posts").select(`
        id, 
        title, 
        content, 
        created_at, 
        upvotes, 
        downvotes,
        author_id,
        community_id,
        communities(id, name, slug),
        profiles(id, display_name, username, avatar_url)
      `).eq("community_id",s).limit(t).order("created_at",{ascending:!1});const{data:i,error:o}=await a;if(o)throw o;return i.map(c=>({...c,author:c.profiles,community:c.communities,comment_count:Math.floor(Math.random()*10)}))}catch(t){throw console.error("Error fetching community posts:",t),t}},Gh=async s=>{try{const{data:{user:e}}=await D.auth.getUser();if(!e)throw new Error("User not authenticated");const{data:t}=await D.from("communities").select("slug").eq("slug",s.slug).single();if(t)throw new Error("slug_already_exists");const r={...s};delete r.banner_url,delete r.icon_url;const{data:a,error:i}=await D.from("communities").insert([{...r,created_by:e.id}]).select();if(i)throw console.error("Erro SQL ao criar comunidade:",i),i.code==="23505"?new Error("slug_already_exists"):i;if(a&&a[0])return await en(a[0].id),a[0];throw new Error("Falha ao criar comunidade: resposta vazia")}catch(e){throw console.error("Error creating community:",e),e}},Kh=async()=>{const{data:s,error:e}=await D.from("communities").select("id, name, description, slug, is_official").eq("slug","ufrj-geral").single();if(e&&e.code!=="PGRST116")throw console.error("Erro ao buscar comunidade geral da UFRJ:",e),e;if(!s)try{return await Xh()}catch(t){throw console.error("Erro ao criar comunidade geral da UFRJ:",t),t}return s},Xh=async()=>{const{data:s,error:e}=await D.from("communities").insert({name:"UFRJ Geral",description:"Comunidade oficial geral da UFRJ. Aqui voc encontra notcias, eventos e discusses sobre a universidade.",slug:"ufrj-geral",is_official:!0}).select().single();if(e)throw console.error("Erro ao criar comunidade geral da UFRJ:",e),e;return s},Qh=async s=>{try{if(!s){const{data:{user:r}}=await D.auth.getUser();if(!r)throw new Error("User not authenticated");s=r.id}const{data:e,error:t}=await D.from("community_members").select(`
        community_id,
        communities (
          id, 
          name, 
          slug, 
          description
        )
      `).eq("user_id",s);if(t)throw t;return e.map(r=>r.communities)}catch(e){throw console.error("Error fetching user joined communities:",e),e}},Zh=async s=>{try{const{data:{user:e}}=await D.auth.getUser();if(!e)throw new Error("User not authenticated");const{data:t,error:r}=await D.from("posts").select("author_id").eq("id",s).single();if(r)throw r;if(t.author_id!==e.id)throw new Error("Voc no tem permisso para excluir este post");const{error:a}=await D.from("posts").delete().eq("id",s);if(a)throw a;return!0}catch(e){throw console.error("Error deleting post:",e),e}};async function ef({filter:s="upcoming"}={}){try{const e=new Date().toISOString();let t=D.from("events").select(`
        *,
        creator:creator_id(id, display_name, avatar_url),
        community:community_id(id, name, slug)
      `);s==="upcoming"?t=t.gte("event_date",e):s==="past"&&(t=t.lt("event_date",e)),t=t.order(s==="upcoming"?"event_date":"event_date.desc");const{data:r,error:a}=await t;if(a)throw a;return r}catch(e){throw console.error("Erro ao buscar eventos:",e),e}}async function tf(s,e="going"){try{const t=await getUser();if(!t)throw new Error("No autenticado");const{data:r,error:a}=await D.from("event_participants").upsert({event_id:s,user_id:t.id,status:e},{onConflict:"event_id,user_id"}).select();if(a)throw a;return r}catch(t){throw console.error("Erro ao participar do evento:",t),t}}async function sf(s){try{const{data:e,error:t}=await D.from("comments").select(`
        *,
        author:author_id(id, display_name, avatar_url),
        replies:comments!parent_id(
          *,
          author:author_id(id, display_name, avatar_url)
        )
      `).eq("post_id",s).is("parent_id",null).order("created_at",{ascending:!0});if(t)throw t;return e}catch(e){throw console.error("Erro ao buscar comentrios:",e),e}}const U=T.forwardRef(({className:s,...e},t)=>n.jsx("div",{ref:t,className:P("rounded-lg border bg-card text-card-foreground shadow-sm",s),...e}));U.displayName="Card";const z=T.forwardRef(({className:s,...e},t)=>n.jsx("div",{ref:t,className:P("flex flex-col space-y-1.5 p-6",s),...e}));z.displayName="CardHeader";const X=T.forwardRef(({className:s,...e},t)=>n.jsx("h3",{ref:t,className:P("text-2xl font-semibold leading-none tracking-tight",s),...e}));X.displayName="CardTitle";const ce=T.forwardRef(({className:s,...e},t)=>n.jsx("p",{ref:t,className:P("text-sm text-muted-foreground",s),...e}));ce.displayName="CardDescription";const ee=T.forwardRef(({className:s,...e},t)=>n.jsx("div",{ref:t,className:P("p-6 pt-0",s),...e}));ee.displayName="CardContent";const ae=T.forwardRef(({className:s,...e},t)=>n.jsx("div",{ref:t,className:P("flex items-center p-6 pt-0",s),...e}));ae.displayName="CardFooter";const rf={default:"bg-primary text-primary-foreground hover:bg-primary/80",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/80"},Ee=T.forwardRef(({className:s,variant:e="default",...t},r)=>n.jsx("div",{ref:r,className:P("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",rf[e],s),...t}));Ee.displayName="Badge";function we(s,e,{checkForDefaultPrevented:t=!0}={}){return function(a){if(s==null||s(a),t===!1||!a.defaultPrevented)return e==null?void 0:e(a)}}function nf(s,e){const t=h.createContext(e),r=i=>{const{children:o,...c}=i,l=h.useMemo(()=>c,Object.values(c));return n.jsx(t.Provider,{value:l,children:o})};r.displayName=s+"Provider";function a(i){const o=h.useContext(t);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${s}\``)}return[r,a]}function tn(s,e=[]){let t=[];function r(i,o){const c=h.createContext(o),l=t.length;t=[...t,o];const d=f=>{var b;const{scope:m,children:g,...v}=f,p=((b=m==null?void 0:m[s])==null?void 0:b[l])||c,x=h.useMemo(()=>v,Object.values(v));return n.jsx(p.Provider,{value:x,children:g})};d.displayName=i+"Provider";function u(f,m){var p;const g=((p=m==null?void 0:m[s])==null?void 0:p[l])||c,v=h.useContext(g);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[d,u]}const a=()=>{const i=t.map(o=>h.createContext(o));return function(c){const l=(c==null?void 0:c[s])||i;return h.useMemo(()=>({[`__scope${s}`]:{...c,[s]:l}}),[c,l])}};return a.scopeName=s,[r,af(a,...e)]}function af(...s){const e=s[0];if(s.length===1)return e;const t=()=>{const r=s.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=r.reduce((c,{useScope:l,scopeName:d})=>{const f=l(i)[`__scope${d}`];return{...c,...f}},{});return h.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}var of=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],pe=of.reduce((s,e)=>{const t=h.forwardRef((r,a)=>{const{asChild:i,...o}=r,c=i?Zt:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(c,{...o,ref:a})});return t.displayName=`Primitive.${e}`,{...s,[e]:t}},{});function cf(s,e){s&&zr.flushSync(()=>s.dispatchEvent(e))}function Ge(s){const e=h.useRef(s);return h.useEffect(()=>{e.current=s}),h.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function lf(s,e=globalThis==null?void 0:globalThis.document){const t=Ge(s);h.useEffect(()=>{const r=a=>{a.key==="Escape"&&t(a)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var df="DismissableLayer",Ar="dismissableLayer.update",uf="dismissableLayer.pointerDownOutside",hf="dismissableLayer.focusOutside",aa,gi=h.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),sn=h.forwardRef((s,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:c,...l}=s,d=h.useContext(gi),[u,f]=h.useState(null),m=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=h.useState({}),v=Pe(e,C=>f(C)),p=Array.from(d.layers),[x]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),b=p.indexOf(x),y=u?p.indexOf(u):-1,j=d.layersWithOutsidePointerEventsDisabled.size>0,_=y>=b,w=gf(C=>{const k=C.target,F=[...d.branches].some(W=>W.contains(k));!_||F||(a==null||a(C),o==null||o(C),C.defaultPrevented||c==null||c())},m),N=pf(C=>{const k=C.target;[...d.branches].some(W=>W.contains(k))||(i==null||i(C),o==null||o(C),C.defaultPrevented||c==null||c())},m);return lf(C=>{y===d.layers.size-1&&(r==null||r(C),!C.defaultPrevented&&c&&(C.preventDefault(),c()))},m),h.useEffect(()=>{if(u)return t&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(aa=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),ia(),()=>{t&&d.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=aa)}},[u,m,t,d]),h.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),ia())},[u,d]),h.useEffect(()=>{const C=()=>g({});return document.addEventListener(Ar,C),()=>document.removeEventListener(Ar,C)},[]),n.jsx(pe.div,{...l,ref:v,style:{pointerEvents:j?_?"auto":"none":void 0,...s.style},onFocusCapture:we(s.onFocusCapture,N.onFocusCapture),onBlurCapture:we(s.onBlurCapture,N.onBlurCapture),onPointerDownCapture:we(s.onPointerDownCapture,w.onPointerDownCapture)})});sn.displayName=df;var ff="DismissableLayerBranch",mf=h.forwardRef((s,e)=>{const t=h.useContext(gi),r=h.useRef(null),a=Pe(e,r);return h.useEffect(()=>{const i=r.current;if(i)return t.branches.add(i),()=>{t.branches.delete(i)}},[t.branches]),n.jsx(pe.div,{...s,ref:a})});mf.displayName=ff;function gf(s,e=globalThis==null?void 0:globalThis.document){const t=Ge(s),r=h.useRef(!1),a=h.useRef(()=>{});return h.useEffect(()=>{const i=c=>{if(c.target&&!r.current){let l=function(){pi(uf,t,d,{discrete:!0})};const d={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",a.current),a.current=l,e.addEventListener("click",a.current,{once:!0})):l()}else e.removeEventListener("click",a.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",a.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function pf(s,e=globalThis==null?void 0:globalThis.document){const t=Ge(s),r=h.useRef(!1);return h.useEffect(()=>{const a=i=>{i.target&&!r.current&&pi(hf,t,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",a),()=>e.removeEventListener("focusin",a)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function ia(){const s=new CustomEvent(Ar);document.dispatchEvent(s)}function pi(s,e,t,{discrete:r}){const a=t.originalEvent.target,i=new CustomEvent(s,{bubbles:!1,cancelable:!0,detail:t});e&&a.addEventListener(s,e,{once:!0}),r?cf(a,i):a.dispatchEvent(i)}var cr=0;function vi(){h.useEffect(()=>{const s=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",s[0]??oa()),document.body.insertAdjacentElement("beforeend",s[1]??oa()),cr++,()=>{cr===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),cr--}},[])}function oa(){const s=document.createElement("span");return s.setAttribute("data-radix-focus-guard",""),s.tabIndex=0,s.style.outline="none",s.style.opacity="0",s.style.position="fixed",s.style.pointerEvents="none",s}var lr="focusScope.autoFocusOnMount",dr="focusScope.autoFocusOnUnmount",ca={bubbles:!1,cancelable:!0},vf="FocusScope",rn=h.forwardRef((s,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=s,[c,l]=h.useState(null),d=Ge(a),u=Ge(i),f=h.useRef(null),m=Pe(e,p=>l(p)),g=h.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;h.useEffect(()=>{if(r){let p=function(j){if(g.paused||!c)return;const _=j.target;c.contains(_)?f.current=_:He(f.current,{select:!0})},x=function(j){if(g.paused||!c)return;const _=j.relatedTarget;_!==null&&(c.contains(_)||He(f.current,{select:!0}))},b=function(j){if(document.activeElement===document.body)for(const w of j)w.removedNodes.length>0&&He(c)};document.addEventListener("focusin",p),document.addEventListener("focusout",x);const y=new MutationObserver(b);return c&&y.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",x),y.disconnect()}}},[r,c,g.paused]),h.useEffect(()=>{if(c){da.add(g);const p=document.activeElement;if(!c.contains(p)){const b=new CustomEvent(lr,ca);c.addEventListener(lr,d),c.dispatchEvent(b),b.defaultPrevented||(xf(_f(xi(c)),{select:!0}),document.activeElement===p&&He(c))}return()=>{c.removeEventListener(lr,d),setTimeout(()=>{const b=new CustomEvent(dr,ca);c.addEventListener(dr,u),c.dispatchEvent(b),b.defaultPrevented||He(p??document.body,{select:!0}),c.removeEventListener(dr,u),da.remove(g)},0)}}},[c,d,u,g]);const v=h.useCallback(p=>{if(!t&&!r||g.paused)return;const x=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,b=document.activeElement;if(x&&b){const y=p.currentTarget,[j,_]=yf(y);j&&_?!p.shiftKey&&b===_?(p.preventDefault(),t&&He(j,{select:!0})):p.shiftKey&&b===j&&(p.preventDefault(),t&&He(_,{select:!0})):b===y&&p.preventDefault()}},[t,r,g.paused]);return n.jsx(pe.div,{tabIndex:-1,...o,ref:m,onKeyDown:v})});rn.displayName=vf;function xf(s,{select:e=!1}={}){const t=document.activeElement;for(const r of s)if(He(r,{select:e}),document.activeElement!==t)return}function yf(s){const e=xi(s),t=la(e,s),r=la(e.reverse(),s);return[t,r]}function xi(s){const e=[],t=document.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function la(s,e){for(const t of s)if(!wf(t,{upTo:e}))return t}function wf(s,{upTo:e}){if(getComputedStyle(s).visibility==="hidden")return!0;for(;s;){if(e!==void 0&&s===e)return!1;if(getComputedStyle(s).display==="none")return!0;s=s.parentElement}return!1}function bf(s){return s instanceof HTMLInputElement&&"select"in s}function He(s,{select:e=!1}={}){if(s&&s.focus){const t=document.activeElement;s.focus({preventScroll:!0}),s!==t&&bf(s)&&e&&s.select()}}var da=jf();function jf(){let s=[];return{add(e){const t=s[0];e!==t&&(t==null||t.pause()),s=ua(s,e),s.unshift(e)},remove(e){var t;s=ua(s,e),(t=s[0])==null||t.resume()}}}function ua(s,e){const t=[...s],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function _f(s){return s.filter(e=>e.tagName!=="A")}var at=globalThis!=null&&globalThis.document?h.useLayoutEffect:()=>{},Nf=Wo.useId||(()=>{}),Cf=0;function _s(s){const[e,t]=h.useState(Nf());return at(()=>{t(r=>r??String(Cf++))},[s]),s||(e?`radix-${e}`:"")}const Ef=["top","right","bottom","left"],Ke=Math.min,ye=Math.max,Ts=Math.round,ps=Math.floor,$e=s=>({x:s,y:s}),Sf={left:"right",right:"left",bottom:"top",top:"bottom"},kf={start:"end",end:"start"};function Rr(s,e,t){return ye(s,Ke(e,t))}function Ue(s,e){return typeof s=="function"?s(e):s}function We(s){return s.split("-")[0]}function Lt(s){return s.split("-")[1]}function nn(s){return s==="x"?"y":"x"}function an(s){return s==="y"?"height":"width"}function Xe(s){return["top","bottom"].includes(We(s))?"y":"x"}function on(s){return nn(Xe(s))}function Pf(s,e,t){t===void 0&&(t=!1);const r=Lt(s),a=on(s),i=an(a);let o=a==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=As(o)),[o,As(o)]}function Of(s){const e=As(s);return[Dr(s),e,Dr(e)]}function Dr(s){return s.replace(/start|end/g,e=>kf[e])}function Tf(s,e,t){const r=["left","right"],a=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(s){case"top":case"bottom":return t?e?a:r:e?r:a;case"left":case"right":return e?i:o;default:return[]}}function Af(s,e,t,r){const a=Lt(s);let i=Tf(We(s),t==="start",r);return a&&(i=i.map(o=>o+"-"+a),e&&(i=i.concat(i.map(Dr)))),i}function As(s){return s.replace(/left|right|bottom|top/g,e=>Sf[e])}function Rf(s){return{top:0,right:0,bottom:0,left:0,...s}}function yi(s){return typeof s!="number"?Rf(s):{top:s,right:s,bottom:s,left:s}}function Rs(s){const{x:e,y:t,width:r,height:a}=s;return{width:r,height:a,top:t,left:e,right:e+r,bottom:t+a,x:e,y:t}}function ha(s,e,t){let{reference:r,floating:a}=s;const i=Xe(e),o=on(e),c=an(o),l=We(e),d=i==="y",u=r.x+r.width/2-a.width/2,f=r.y+r.height/2-a.height/2,m=r[c]/2-a[c]/2;let g;switch(l){case"top":g={x:u,y:r.y-a.height};break;case"bottom":g={x:u,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:f};break;case"left":g={x:r.x-a.width,y:f};break;default:g={x:r.x,y:r.y}}switch(Lt(e)){case"start":g[o]-=m*(t&&d?-1:1);break;case"end":g[o]+=m*(t&&d?-1:1);break}return g}const Df=async(s,e,t)=>{const{placement:r="bottom",strategy:a="absolute",middleware:i=[],platform:o}=t,c=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let d=await o.getElementRects({reference:s,floating:e,strategy:a}),{x:u,y:f}=ha(d,r,l),m=r,g={},v=0;for(let p=0;p<c.length;p++){const{name:x,fn:b}=c[p],{x:y,y:j,data:_,reset:w}=await b({x:u,y:f,initialPlacement:r,placement:m,strategy:a,middlewareData:g,rects:d,platform:o,elements:{reference:s,floating:e}});u=y??u,f=j??f,g={...g,[x]:{...g[x],..._}},w&&v<=50&&(v++,typeof w=="object"&&(w.placement&&(m=w.placement),w.rects&&(d=w.rects===!0?await o.getElementRects({reference:s,floating:e,strategy:a}):w.rects),{x:u,y:f}=ha(d,m,l)),p=-1)}return{x:u,y:f,placement:m,strategy:a,middlewareData:g}};async function Gt(s,e){var t;e===void 0&&(e={});const{x:r,y:a,platform:i,rects:o,elements:c,strategy:l}=s,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:m=!1,padding:g=0}=Ue(e,s),v=yi(g),x=c[m?f==="floating"?"reference":"floating":f],b=Rs(await i.getClippingRect({element:(t=await(i.isElement==null?void 0:i.isElement(x)))==null||t?x:x.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(c.floating)),boundary:d,rootBoundary:u,strategy:l})),y=f==="floating"?{x:r,y:a,width:o.floating.width,height:o.floating.height}:o.reference,j=await(i.getOffsetParent==null?void 0:i.getOffsetParent(c.floating)),_=await(i.isElement==null?void 0:i.isElement(j))?await(i.getScale==null?void 0:i.getScale(j))||{x:1,y:1}:{x:1,y:1},w=Rs(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:y,offsetParent:j,strategy:l}):y);return{top:(b.top-w.top+v.top)/_.y,bottom:(w.bottom-b.bottom+v.bottom)/_.y,left:(b.left-w.left+v.left)/_.x,right:(w.right-b.right+v.right)/_.x}}const $f=s=>({name:"arrow",options:s,async fn(e){const{x:t,y:r,placement:a,rects:i,platform:o,elements:c,middlewareData:l}=e,{element:d,padding:u=0}=Ue(s,e)||{};if(d==null)return{};const f=yi(u),m={x:t,y:r},g=on(a),v=an(g),p=await o.getDimensions(d),x=g==="y",b=x?"top":"left",y=x?"bottom":"right",j=x?"clientHeight":"clientWidth",_=i.reference[v]+i.reference[g]-m[g]-i.floating[v],w=m[g]-i.reference[g],N=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let C=N?N[j]:0;(!C||!await(o.isElement==null?void 0:o.isElement(N)))&&(C=c.floating[j]||i.floating[v]);const k=_/2-w/2,F=C/2-p[v]/2-1,W=Ke(f[b],F),O=Ke(f[y],F),te=W,V=C-p[v]-O,H=C/2-p[v]/2+k,se=Rr(te,H,V),K=!l.arrow&&Lt(a)!=null&&H!==se&&i.reference[v]/2-(H<te?W:O)-p[v]/2<0,re=K?H<te?H-te:H-V:0;return{[g]:m[g]+re,data:{[g]:se,centerOffset:H-se-re,...K&&{alignmentOffset:re}},reset:K}}}),Lf=function(s){return s===void 0&&(s={}),{name:"flip",options:s,async fn(e){var t,r;const{placement:a,middlewareData:i,rects:o,initialPlacement:c,platform:l,elements:d}=e,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:p=!0,...x}=Ue(s,e);if((t=i.arrow)!=null&&t.alignmentOffset)return{};const b=We(a),y=Xe(c),j=We(c)===c,_=await(l.isRTL==null?void 0:l.isRTL(d.floating)),w=m||(j||!p?[As(c)]:Of(c)),N=v!=="none";!m&&N&&w.push(...Af(c,p,v,_));const C=[c,...w],k=await Gt(e,x),F=[];let W=((r=i.flip)==null?void 0:r.overflows)||[];if(u&&F.push(k[b]),f){const H=Pf(a,o,_);F.push(k[H[0]],k[H[1]])}if(W=[...W,{placement:a,overflows:F}],!F.every(H=>H<=0)){var O,te;const H=(((O=i.flip)==null?void 0:O.index)||0)+1,se=C[H];if(se)return{data:{index:H,overflows:W},reset:{placement:se}};let K=(te=W.filter(re=>re.overflows[0]<=0).sort((re,L)=>re.overflows[1]-L.overflows[1])[0])==null?void 0:te.placement;if(!K)switch(g){case"bestFit":{var V;const re=(V=W.filter(L=>{if(N){const ne=Xe(L.placement);return ne===y||ne==="y"}return!0}).map(L=>[L.placement,L.overflows.filter(ne=>ne>0).reduce((ne,fe)=>ne+fe,0)]).sort((L,ne)=>L[1]-ne[1])[0])==null?void 0:V[0];re&&(K=re);break}case"initialPlacement":K=c;break}if(a!==K)return{reset:{placement:K}}}return{}}}};function fa(s,e){return{top:s.top-e.height,right:s.right-e.width,bottom:s.bottom-e.height,left:s.left-e.width}}function ma(s){return Ef.some(e=>s[e]>=0)}const Mf=function(s){return s===void 0&&(s={}),{name:"hide",options:s,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...a}=Ue(s,e);switch(r){case"referenceHidden":{const i=await Gt(e,{...a,elementContext:"reference"}),o=fa(i,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:ma(o)}}}case"escaped":{const i=await Gt(e,{...a,altBoundary:!0}),o=fa(i,t.floating);return{data:{escapedOffsets:o,escaped:ma(o)}}}default:return{}}}}};async function If(s,e){const{placement:t,platform:r,elements:a}=s,i=await(r.isRTL==null?void 0:r.isRTL(a.floating)),o=We(t),c=Lt(t),l=Xe(t)==="y",d=["left","top"].includes(o)?-1:1,u=i&&l?-1:1,f=Ue(e,s);let{mainAxis:m,crossAxis:g,alignmentAxis:v}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return c&&typeof v=="number"&&(g=c==="end"?v*-1:v),l?{x:g*u,y:m*d}:{x:m*d,y:g*u}}const Ff=function(s){return s===void 0&&(s=0),{name:"offset",options:s,async fn(e){var t,r;const{x:a,y:i,placement:o,middlewareData:c}=e,l=await If(e,s);return o===((t=c.offset)==null?void 0:t.placement)&&(r=c.arrow)!=null&&r.alignmentOffset?{}:{x:a+l.x,y:i+l.y,data:{...l,placement:o}}}}},Uf=function(s){return s===void 0&&(s={}),{name:"shift",options:s,async fn(e){const{x:t,y:r,placement:a}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:c={fn:x=>{let{x:b,y}=x;return{x:b,y}}},...l}=Ue(s,e),d={x:t,y:r},u=await Gt(e,l),f=Xe(We(a)),m=nn(f);let g=d[m],v=d[f];if(i){const x=m==="y"?"top":"left",b=m==="y"?"bottom":"right",y=g+u[x],j=g-u[b];g=Rr(y,g,j)}if(o){const x=f==="y"?"top":"left",b=f==="y"?"bottom":"right",y=v+u[x],j=v-u[b];v=Rr(y,v,j)}const p=c.fn({...e,[m]:g,[f]:v});return{...p,data:{x:p.x-t,y:p.y-r,enabled:{[m]:i,[f]:o}}}}}},Wf=function(s){return s===void 0&&(s={}),{options:s,fn(e){const{x:t,y:r,placement:a,rects:i,middlewareData:o}=e,{offset:c=0,mainAxis:l=!0,crossAxis:d=!0}=Ue(s,e),u={x:t,y:r},f=Xe(a),m=nn(f);let g=u[m],v=u[f];const p=Ue(c,e),x=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(l){const j=m==="y"?"height":"width",_=i.reference[m]-i.floating[j]+x.mainAxis,w=i.reference[m]+i.reference[j]-x.mainAxis;g<_?g=_:g>w&&(g=w)}if(d){var b,y;const j=m==="y"?"width":"height",_=["top","left"].includes(We(a)),w=i.reference[f]-i.floating[j]+(_&&((b=o.offset)==null?void 0:b[f])||0)+(_?0:x.crossAxis),N=i.reference[f]+i.reference[j]+(_?0:((y=o.offset)==null?void 0:y[f])||0)-(_?x.crossAxis:0);v<w?v=w:v>N&&(v=N)}return{[m]:g,[f]:v}}}},Bf=function(s){return s===void 0&&(s={}),{name:"size",options:s,async fn(e){var t,r;const{placement:a,rects:i,platform:o,elements:c}=e,{apply:l=()=>{},...d}=Ue(s,e),u=await Gt(e,d),f=We(a),m=Lt(a),g=Xe(a)==="y",{width:v,height:p}=i.floating;let x,b;f==="top"||f==="bottom"?(x=f,b=m===(await(o.isRTL==null?void 0:o.isRTL(c.floating))?"start":"end")?"left":"right"):(b=f,x=m==="end"?"top":"bottom");const y=p-u.top-u.bottom,j=v-u.left-u.right,_=Ke(p-u[x],y),w=Ke(v-u[b],j),N=!e.middlewareData.shift;let C=_,k=w;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(k=j),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(C=y),N&&!m){const W=ye(u.left,0),O=ye(u.right,0),te=ye(u.top,0),V=ye(u.bottom,0);g?k=v-2*(W!==0||O!==0?W+O:ye(u.left,u.right)):C=p-2*(te!==0||V!==0?te+V:ye(u.top,u.bottom))}await l({...e,availableWidth:k,availableHeight:C});const F=await o.getDimensions(c.floating);return v!==F.width||p!==F.height?{reset:{rects:!0}}:{}}}};function Ys(){return typeof window<"u"}function Mt(s){return wi(s)?(s.nodeName||"").toLowerCase():"#document"}function be(s){var e;return(s==null||(e=s.ownerDocument)==null?void 0:e.defaultView)||window}function Ie(s){var e;return(e=(wi(s)?s.ownerDocument:s.document)||window.document)==null?void 0:e.documentElement}function wi(s){return Ys()?s instanceof Node||s instanceof be(s).Node:!1}function Se(s){return Ys()?s instanceof Element||s instanceof be(s).Element:!1}function Me(s){return Ys()?s instanceof HTMLElement||s instanceof be(s).HTMLElement:!1}function ga(s){return!Ys()||typeof ShadowRoot>"u"?!1:s instanceof ShadowRoot||s instanceof be(s).ShadowRoot}function ts(s){const{overflow:e,overflowX:t,overflowY:r,display:a}=ke(s);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(a)}function qf(s){return["table","td","th"].includes(Mt(s))}function Gs(s){return[":popover-open",":modal"].some(e=>{try{return s.matches(e)}catch{return!1}})}function cn(s){const e=ln(),t=Se(s)?ke(s):s;return["transform","translate","scale","rotate","perspective"].some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function zf(s){let e=Qe(s);for(;Me(e)&&!Tt(e);){if(cn(e))return e;if(Gs(e))return null;e=Qe(e)}return null}function ln(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Tt(s){return["html","body","#document"].includes(Mt(s))}function ke(s){return be(s).getComputedStyle(s)}function Ks(s){return Se(s)?{scrollLeft:s.scrollLeft,scrollTop:s.scrollTop}:{scrollLeft:s.scrollX,scrollTop:s.scrollY}}function Qe(s){if(Mt(s)==="html")return s;const e=s.assignedSlot||s.parentNode||ga(s)&&s.host||Ie(s);return ga(e)?e.host:e}function bi(s){const e=Qe(s);return Tt(e)?s.ownerDocument?s.ownerDocument.body:s.body:Me(e)&&ts(e)?e:bi(e)}function Kt(s,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const a=bi(s),i=a===((r=s.ownerDocument)==null?void 0:r.body),o=be(a);if(i){const c=$r(o);return e.concat(o,o.visualViewport||[],ts(a)?a:[],c&&t?Kt(c):[])}return e.concat(a,Kt(a,[],t))}function $r(s){return s.parent&&Object.getPrototypeOf(s.parent)?s.frameElement:null}function ji(s){const e=ke(s);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const a=Me(s),i=a?s.offsetWidth:t,o=a?s.offsetHeight:r,c=Ts(t)!==i||Ts(r)!==o;return c&&(t=i,r=o),{width:t,height:r,$:c}}function dn(s){return Se(s)?s:s.contextElement}function Et(s){const e=dn(s);if(!Me(e))return $e(1);const t=e.getBoundingClientRect(),{width:r,height:a,$:i}=ji(e);let o=(i?Ts(t.width):t.width)/r,c=(i?Ts(t.height):t.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!c||!Number.isFinite(c))&&(c=1),{x:o,y:c}}const Vf=$e(0);function _i(s){const e=be(s);return!ln()||!e.visualViewport?Vf:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Hf(s,e,t){return e===void 0&&(e=!1),!t||e&&t!==be(s)?!1:e}function it(s,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const a=s.getBoundingClientRect(),i=dn(s);let o=$e(1);e&&(r?Se(r)&&(o=Et(r)):o=Et(s));const c=Hf(i,t,r)?_i(i):$e(0);let l=(a.left+c.x)/o.x,d=(a.top+c.y)/o.y,u=a.width/o.x,f=a.height/o.y;if(i){const m=be(i),g=r&&Se(r)?be(r):r;let v=m,p=$r(v);for(;p&&r&&g!==v;){const x=Et(p),b=p.getBoundingClientRect(),y=ke(p),j=b.left+(p.clientLeft+parseFloat(y.paddingLeft))*x.x,_=b.top+(p.clientTop+parseFloat(y.paddingTop))*x.y;l*=x.x,d*=x.y,u*=x.x,f*=x.y,l+=j,d+=_,v=be(p),p=$r(v)}}return Rs({width:u,height:f,x:l,y:d})}function un(s,e){const t=Ks(s).scrollLeft;return e?e.left+t:it(Ie(s)).left+t}function Ni(s,e,t){t===void 0&&(t=!1);const r=s.getBoundingClientRect(),a=r.left+e.scrollLeft-(t?0:un(s,r)),i=r.top+e.scrollTop;return{x:a,y:i}}function Jf(s){let{elements:e,rect:t,offsetParent:r,strategy:a}=s;const i=a==="fixed",o=Ie(r),c=e?Gs(e.floating):!1;if(r===o||c&&i)return t;let l={scrollLeft:0,scrollTop:0},d=$e(1);const u=$e(0),f=Me(r);if((f||!f&&!i)&&((Mt(r)!=="body"||ts(o))&&(l=Ks(r)),Me(r))){const g=it(r);d=Et(r),u.x=g.x+r.clientLeft,u.y=g.y+r.clientTop}const m=o&&!f&&!i?Ni(o,l,!0):$e(0);return{width:t.width*d.x,height:t.height*d.y,x:t.x*d.x-l.scrollLeft*d.x+u.x+m.x,y:t.y*d.y-l.scrollTop*d.y+u.y+m.y}}function Yf(s){return Array.from(s.getClientRects())}function Gf(s){const e=Ie(s),t=Ks(s),r=s.ownerDocument.body,a=ye(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=ye(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-t.scrollLeft+un(s);const c=-t.scrollTop;return ke(r).direction==="rtl"&&(o+=ye(e.clientWidth,r.clientWidth)-a),{width:a,height:i,x:o,y:c}}function Kf(s,e){const t=be(s),r=Ie(s),a=t.visualViewport;let i=r.clientWidth,o=r.clientHeight,c=0,l=0;if(a){i=a.width,o=a.height;const d=ln();(!d||d&&e==="fixed")&&(c=a.offsetLeft,l=a.offsetTop)}return{width:i,height:o,x:c,y:l}}function Xf(s,e){const t=it(s,!0,e==="fixed"),r=t.top+s.clientTop,a=t.left+s.clientLeft,i=Me(s)?Et(s):$e(1),o=s.clientWidth*i.x,c=s.clientHeight*i.y,l=a*i.x,d=r*i.y;return{width:o,height:c,x:l,y:d}}function pa(s,e,t){let r;if(e==="viewport")r=Kf(s,t);else if(e==="document")r=Gf(Ie(s));else if(Se(e))r=Xf(e,t);else{const a=_i(s);r={x:e.x-a.x,y:e.y-a.y,width:e.width,height:e.height}}return Rs(r)}function Ci(s,e){const t=Qe(s);return t===e||!Se(t)||Tt(t)?!1:ke(t).position==="fixed"||Ci(t,e)}function Qf(s,e){const t=e.get(s);if(t)return t;let r=Kt(s,[],!1).filter(c=>Se(c)&&Mt(c)!=="body"),a=null;const i=ke(s).position==="fixed";let o=i?Qe(s):s;for(;Se(o)&&!Tt(o);){const c=ke(o),l=cn(o);!l&&c.position==="fixed"&&(a=null),(i?!l&&!a:!l&&c.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||ts(o)&&!l&&Ci(s,o))?r=r.filter(u=>u!==o):a=c,o=Qe(o)}return e.set(s,r),r}function Zf(s){let{element:e,boundary:t,rootBoundary:r,strategy:a}=s;const o=[...t==="clippingAncestors"?Gs(e)?[]:Qf(e,this._c):[].concat(t),r],c=o[0],l=o.reduce((d,u)=>{const f=pa(e,u,a);return d.top=ye(f.top,d.top),d.right=Ke(f.right,d.right),d.bottom=Ke(f.bottom,d.bottom),d.left=ye(f.left,d.left),d},pa(e,c,a));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function em(s){const{width:e,height:t}=ji(s);return{width:e,height:t}}function tm(s,e,t){const r=Me(e),a=Ie(e),i=t==="fixed",o=it(s,!0,i,e);let c={scrollLeft:0,scrollTop:0};const l=$e(0);if(r||!r&&!i)if((Mt(e)!=="body"||ts(a))&&(c=Ks(e)),r){const m=it(e,!0,i,e);l.x=m.x+e.clientLeft,l.y=m.y+e.clientTop}else a&&(l.x=un(a));const d=a&&!r&&!i?Ni(a,c):$e(0),u=o.left+c.scrollLeft-l.x-d.x,f=o.top+c.scrollTop-l.y-d.y;return{x:u,y:f,width:o.width,height:o.height}}function ur(s){return ke(s).position==="static"}function va(s,e){if(!Me(s)||ke(s).position==="fixed")return null;if(e)return e(s);let t=s.offsetParent;return Ie(s)===t&&(t=t.ownerDocument.body),t}function Ei(s,e){const t=be(s);if(Gs(s))return t;if(!Me(s)){let a=Qe(s);for(;a&&!Tt(a);){if(Se(a)&&!ur(a))return a;a=Qe(a)}return t}let r=va(s,e);for(;r&&qf(r)&&ur(r);)r=va(r,e);return r&&Tt(r)&&ur(r)&&!cn(r)?t:r||zf(s)||t}const sm=async function(s){const e=this.getOffsetParent||Ei,t=this.getDimensions,r=await t(s.floating);return{reference:tm(s.reference,await e(s.floating),s.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function rm(s){return ke(s).direction==="rtl"}const nm={convertOffsetParentRelativeRectToViewportRelativeRect:Jf,getDocumentElement:Ie,getClippingRect:Zf,getOffsetParent:Ei,getElementRects:sm,getClientRects:Yf,getDimensions:em,getScale:Et,isElement:Se,isRTL:rm};function Si(s,e){return s.x===e.x&&s.y===e.y&&s.width===e.width&&s.height===e.height}function am(s,e){let t=null,r;const a=Ie(s);function i(){var c;clearTimeout(r),(c=t)==null||c.disconnect(),t=null}function o(c,l){c===void 0&&(c=!1),l===void 0&&(l=1),i();const d=s.getBoundingClientRect(),{left:u,top:f,width:m,height:g}=d;if(c||e(),!m||!g)return;const v=ps(f),p=ps(a.clientWidth-(u+m)),x=ps(a.clientHeight-(f+g)),b=ps(u),j={rootMargin:-v+"px "+-p+"px "+-x+"px "+-b+"px",threshold:ye(0,Ke(1,l))||1};let _=!0;function w(N){const C=N[0].intersectionRatio;if(C!==l){if(!_)return o();C?o(!1,C):r=setTimeout(()=>{o(!1,1e-7)},1e3)}C===1&&!Si(d,s.getBoundingClientRect())&&o(),_=!1}try{t=new IntersectionObserver(w,{...j,root:a.ownerDocument})}catch{t=new IntersectionObserver(w,j)}t.observe(s)}return o(!0),i}function im(s,e,t,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,d=dn(s),u=a||i?[...d?Kt(d):[],...Kt(e)]:[];u.forEach(b=>{a&&b.addEventListener("scroll",t,{passive:!0}),i&&b.addEventListener("resize",t)});const f=d&&c?am(d,t):null;let m=-1,g=null;o&&(g=new ResizeObserver(b=>{let[y]=b;y&&y.target===d&&g&&(g.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var j;(j=g)==null||j.observe(e)})),t()}),d&&!l&&g.observe(d),g.observe(e));let v,p=l?it(s):null;l&&x();function x(){const b=it(s);p&&!Si(p,b)&&t(),p=b,v=requestAnimationFrame(x)}return t(),()=>{var b;u.forEach(y=>{a&&y.removeEventListener("scroll",t),i&&y.removeEventListener("resize",t)}),f==null||f(),(b=g)==null||b.disconnect(),g=null,l&&cancelAnimationFrame(v)}}const om=Ff,cm=Uf,lm=Lf,dm=Bf,um=Mf,xa=$f,hm=Wf,fm=(s,e,t)=>{const r=new Map,a={platform:nm,...t},i={...a.platform,_c:r};return Df(s,e,{...a,platform:i})};var Ns=typeof document<"u"?h.useLayoutEffect:h.useEffect;function Ds(s,e){if(s===e)return!0;if(typeof s!=typeof e)return!1;if(typeof s=="function"&&s.toString()===e.toString())return!0;let t,r,a;if(s&&e&&typeof s=="object"){if(Array.isArray(s)){if(t=s.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!Ds(s[r],e[r]))return!1;return!0}if(a=Object.keys(s),t=a.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,a[r]))return!1;for(r=t;r--!==0;){const i=a[r];if(!(i==="_owner"&&s.$$typeof)&&!Ds(s[i],e[i]))return!1}return!0}return s!==s&&e!==e}function ki(s){return typeof window>"u"?1:(s.ownerDocument.defaultView||window).devicePixelRatio||1}function ya(s,e){const t=ki(s);return Math.round(e*t)/t}function hr(s){const e=h.useRef(s);return Ns(()=>{e.current=s}),e}function mm(s){s===void 0&&(s={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:a,elements:{reference:i,floating:o}={},transform:c=!0,whileElementsMounted:l,open:d}=s,[u,f]=h.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[m,g]=h.useState(r);Ds(m,r)||g(r);const[v,p]=h.useState(null),[x,b]=h.useState(null),y=h.useCallback(L=>{L!==N.current&&(N.current=L,p(L))},[]),j=h.useCallback(L=>{L!==C.current&&(C.current=L,b(L))},[]),_=i||v,w=o||x,N=h.useRef(null),C=h.useRef(null),k=h.useRef(u),F=l!=null,W=hr(l),O=hr(a),te=hr(d),V=h.useCallback(()=>{if(!N.current||!C.current)return;const L={placement:e,strategy:t,middleware:m};O.current&&(L.platform=O.current),fm(N.current,C.current,L).then(ne=>{const fe={...ne,isPositioned:te.current!==!1};H.current&&!Ds(k.current,fe)&&(k.current=fe,zr.flushSync(()=>{f(fe)}))})},[m,e,t,O,te]);Ns(()=>{d===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,f(L=>({...L,isPositioned:!1})))},[d]);const H=h.useRef(!1);Ns(()=>(H.current=!0,()=>{H.current=!1}),[]),Ns(()=>{if(_&&(N.current=_),w&&(C.current=w),_&&w){if(W.current)return W.current(_,w,V);V()}},[_,w,V,W,F]);const se=h.useMemo(()=>({reference:N,floating:C,setReference:y,setFloating:j}),[y,j]),K=h.useMemo(()=>({reference:_,floating:w}),[_,w]),re=h.useMemo(()=>{const L={position:t,left:0,top:0};if(!K.floating)return L;const ne=ya(K.floating,u.x),fe=ya(K.floating,u.y);return c?{...L,transform:"translate("+ne+"px, "+fe+"px)",...ki(K.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:ne,top:fe}},[t,c,K.floating,u.x,u.y]);return h.useMemo(()=>({...u,update:V,refs:se,elements:K,floatingStyles:re}),[u,V,se,K,re])}const gm=s=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:s,fn(t){const{element:r,padding:a}=typeof s=="function"?s(t):s;return r&&e(r)?r.current!=null?xa({element:r.current,padding:a}).fn(t):{}:r?xa({element:r,padding:a}).fn(t):{}}}},pm=(s,e)=>({...om(s),options:[s,e]}),vm=(s,e)=>({...cm(s),options:[s,e]}),xm=(s,e)=>({...hm(s),options:[s,e]}),ym=(s,e)=>({...lm(s),options:[s,e]}),wm=(s,e)=>({...dm(s),options:[s,e]}),bm=(s,e)=>({...um(s),options:[s,e]}),jm=(s,e)=>({...gm(s),options:[s,e]});var _m="Arrow",Pi=h.forwardRef((s,e)=>{const{children:t,width:r=10,height:a=5,...i}=s;return n.jsx(pe.svg,{...i,ref:e,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:s.asChild?t:n.jsx("polygon",{points:"0,0 30,0 15,10"})})});Pi.displayName=_m;var Nm=Pi;function Cm(s){const[e,t]=h.useState(void 0);return at(()=>{if(s){t({width:s.offsetWidth,height:s.offsetHeight});const r=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,c;if("borderBoxSize"in i){const l=i.borderBoxSize,d=Array.isArray(l)?l[0]:l;o=d.inlineSize,c=d.blockSize}else o=s.offsetWidth,c=s.offsetHeight;t({width:o,height:c})});return r.observe(s,{box:"border-box"}),()=>r.unobserve(s)}else t(void 0)},[s]),e}var hn="Popper",[Oi,Ti]=tn(hn),[Em,Ai]=Oi(hn),Ri=s=>{const{__scopePopper:e,children:t}=s,[r,a]=h.useState(null);return n.jsx(Em,{scope:e,anchor:r,onAnchorChange:a,children:t})};Ri.displayName=hn;var Di="PopperAnchor",$i=h.forwardRef((s,e)=>{const{__scopePopper:t,virtualRef:r,...a}=s,i=Ai(Di,t),o=h.useRef(null),c=Pe(e,o);return h.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:n.jsx(pe.div,{...a,ref:c})});$i.displayName=Di;var fn="PopperContent",[Sm,km]=Oi(fn),Li=h.forwardRef((s,e)=>{var Zs,ht,is,Ft,os,cs;const{__scopePopper:t,side:r="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:c=0,avoidCollisions:l=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:g="optimized",onPlaced:v,...p}=s,x=Ai(fn,t),[b,y]=h.useState(null),j=Pe(e,et=>y(et)),[_,w]=h.useState(null),N=Cm(_),C=(N==null?void 0:N.width)??0,k=(N==null?void 0:N.height)??0,F=r+(i!=="center"?"-"+i:""),W=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},O=Array.isArray(d)?d:[d],te=O.length>0,V={padding:W,boundary:O.filter(Om),altBoundary:te},{refs:H,floatingStyles:se,placement:K,isPositioned:re,middlewareData:L}=mm({strategy:"fixed",placement:F,whileElementsMounted:(...et)=>im(...et,{animationFrame:g==="always"}),elements:{reference:x.anchor},middleware:[pm({mainAxis:a+k,alignmentAxis:o}),l&&vm({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?xm():void 0,...V}),l&&ym({...V}),wm({...V,apply:({elements:et,rects:Ut,availableWidth:er,availableHeight:tr})=>{const{width:ls,height:ds}=Ut.reference,ft=et.floating.style;ft.setProperty("--radix-popper-available-width",`${er}px`),ft.setProperty("--radix-popper-available-height",`${tr}px`),ft.setProperty("--radix-popper-anchor-width",`${ls}px`),ft.setProperty("--radix-popper-anchor-height",`${ds}px`)}}),_&&jm({element:_,padding:c}),Tm({arrowWidth:C,arrowHeight:k}),m&&bm({strategy:"referenceHidden",...V})]}),[ne,fe]=Fi(K),$=Ge(v);at(()=>{re&&($==null||$())},[re,$]);const J=(Zs=L.arrow)==null?void 0:Zs.x,ut=(ht=L.arrow)==null?void 0:ht.y,ns=((is=L.arrow)==null?void 0:is.centerOffset)!==0,[as,kn]=h.useState();return at(()=>{b&&kn(window.getComputedStyle(b).zIndex)},[b]),n.jsx("div",{ref:H.setFloating,"data-radix-popper-content-wrapper":"",style:{...se,transform:re?se.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:as,"--radix-popper-transform-origin":[(Ft=L.transformOrigin)==null?void 0:Ft.x,(os=L.transformOrigin)==null?void 0:os.y].join(" "),...((cs=L.hide)==null?void 0:cs.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:s.dir,children:n.jsx(Sm,{scope:t,placedSide:ne,onArrowChange:w,arrowX:J,arrowY:ut,shouldHideArrow:ns,children:n.jsx(pe.div,{"data-side":ne,"data-align":fe,...p,ref:j,style:{...p.style,animation:re?void 0:"none"}})})})});Li.displayName=fn;var Mi="PopperArrow",Pm={top:"bottom",right:"left",bottom:"top",left:"right"},Ii=h.forwardRef(function(e,t){const{__scopePopper:r,...a}=e,i=km(Mi,r),o=Pm[i.placedSide];return n.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:n.jsx(Nm,{...a,ref:t,style:{...a.style,display:"block"}})})});Ii.displayName=Mi;function Om(s){return s!==null}var Tm=s=>({name:"transformOrigin",options:s,fn(e){var x,b,y;const{placement:t,rects:r,middlewareData:a}=e,o=((x=a.arrow)==null?void 0:x.centerOffset)!==0,c=o?0:s.arrowWidth,l=o?0:s.arrowHeight,[d,u]=Fi(t),f={start:"0%",center:"50%",end:"100%"}[u],m=(((b=a.arrow)==null?void 0:b.x)??0)+c/2,g=(((y=a.arrow)==null?void 0:y.y)??0)+l/2;let v="",p="";return d==="bottom"?(v=o?f:`${m}px`,p=`${-l}px`):d==="top"?(v=o?f:`${m}px`,p=`${r.floating.height+l}px`):d==="right"?(v=`${-l}px`,p=o?f:`${g}px`):d==="left"&&(v=`${r.floating.width+l}px`,p=o?f:`${g}px`),{data:{x:v,y:p}}}});function Fi(s){const[e,t="center"]=s.split("-");return[e,t]}var Am=Ri,Ui=$i,Rm=Li,Dm=Ii,$m="Portal",mn=h.forwardRef((s,e)=>{var c;const{container:t,...r}=s,[a,i]=h.useState(!1);at(()=>i(!0),[]);const o=t||a&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return o?Bo.createPortal(n.jsx(pe.div,{...r,ref:e}),o):null});mn.displayName=$m;function Lm(s,e){return h.useReducer((t,r)=>e[t][r]??t,s)}var It=s=>{const{present:e,children:t}=s,r=Mm(e),a=typeof t=="function"?t({present:r.isPresent}):h.Children.only(t),i=Pe(r.ref,Im(a));return typeof t=="function"||r.isPresent?h.cloneElement(a,{ref:i}):null};It.displayName="Presence";function Mm(s){const[e,t]=h.useState(),r=h.useRef({}),a=h.useRef(s),i=h.useRef("none"),o=s?"mounted":"unmounted",[c,l]=Lm(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return h.useEffect(()=>{const d=vs(r.current);i.current=c==="mounted"?d:"none"},[c]),at(()=>{const d=r.current,u=a.current;if(u!==s){const m=i.current,g=vs(d);s?l("MOUNT"):g==="none"||(d==null?void 0:d.display)==="none"?l("UNMOUNT"):l(u&&m!==g?"ANIMATION_OUT":"UNMOUNT"),a.current=s}},[s,l]),at(()=>{if(e){let d;const u=e.ownerDocument.defaultView??window,f=g=>{const p=vs(r.current).includes(g.animationName);if(g.target===e&&p&&(l("ANIMATION_END"),!a.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",d=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},m=g=>{g.target===e&&(i.current=vs(r.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{u.clearTimeout(d),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:h.useCallback(d=>{d&&(r.current=getComputedStyle(d)),t(d)},[])}}function vs(s){return(s==null?void 0:s.animationName)||"none"}function Im(s){var r,a;let e=(r=Object.getOwnPropertyDescriptor(s.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?s.ref:(e=(a=Object.getOwnPropertyDescriptor(s,"ref"))==null?void 0:a.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?s.props.ref:s.props.ref||s.ref)}function Wi({prop:s,defaultProp:e,onChange:t=()=>{}}){const[r,a]=Fm({defaultProp:e,onChange:t}),i=s!==void 0,o=i?s:r,c=Ge(t),l=h.useCallback(d=>{if(i){const f=typeof d=="function"?d(s):d;f!==s&&c(f)}else a(d)},[i,s,a,c]);return[o,l]}function Fm({defaultProp:s,onChange:e}){const t=h.useState(s),[r]=t,a=h.useRef(r),i=Ge(e);return h.useEffect(()=>{a.current!==r&&(i(r),a.current=r)},[r,a,i]),t}var Um=function(s){if(typeof document>"u")return null;var e=Array.isArray(s)?s[0]:s;return e.ownerDocument.body},xt=new WeakMap,xs=new WeakMap,ys={},fr=0,Bi=function(s){return s&&(s.host||Bi(s.parentNode))},Wm=function(s,e){return e.map(function(t){if(s.contains(t))return t;var r=Bi(t);return r&&s.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",s,". Doing nothing"),null)}).filter(function(t){return!!t})},Bm=function(s,e,t,r){var a=Wm(e,Array.isArray(s)?s:[s]);ys[t]||(ys[t]=new WeakMap);var i=ys[t],o=[],c=new Set,l=new Set(a),d=function(f){!f||c.has(f)||(c.add(f),d(f.parentNode))};a.forEach(d);var u=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(m){if(c.has(m))u(m);else try{var g=m.getAttribute(r),v=g!==null&&g!=="false",p=(xt.get(m)||0)+1,x=(i.get(m)||0)+1;xt.set(m,p),i.set(m,x),o.push(m),p===1&&v&&xs.set(m,!0),x===1&&m.setAttribute(t,"true"),v||m.setAttribute(r,"true")}catch(b){console.error("aria-hidden: cannot operate on ",m,b)}})};return u(e),c.clear(),fr++,function(){o.forEach(function(f){var m=xt.get(f)-1,g=i.get(f)-1;xt.set(f,m),i.set(f,g),m||(xs.has(f)||f.removeAttribute(r),xs.delete(f)),g||f.removeAttribute(t)}),fr--,fr||(xt=new WeakMap,xt=new WeakMap,xs=new WeakMap,ys={})}},qi=function(s,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(s)?s:[s]),a=Um(s);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live]"))),Bm(r,a,t,"aria-hidden")):function(){return null}},De=function(){return De=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},De.apply(this,arguments)};function zi(s,e){var t={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(s);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(s,r[a])&&(t[r[a]]=s[r[a]]);return t}function qm(s,e,t){if(t||arguments.length===2)for(var r=0,a=e.length,i;r<a;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return s.concat(i||Array.prototype.slice.call(e))}var Cs="right-scroll-bar-position",Es="width-before-scroll-bar",zm="with-scroll-bars-hidden",Vm="--removed-body-scroll-bar-size";function mr(s,e){return typeof s=="function"?s(e):s&&(s.current=e),s}function Hm(s,e){var t=h.useState(function(){return{value:s,callback:e,facade:{get current(){return t.value},set current(r){var a=t.value;a!==r&&(t.value=r,t.callback(r,a))}}}})[0];return t.callback=e,t.facade}var Jm=typeof window<"u"?h.useLayoutEffect:h.useEffect,wa=new WeakMap;function Ym(s,e){var t=Hm(null,function(r){return s.forEach(function(a){return mr(a,r)})});return Jm(function(){var r=wa.get(t);if(r){var a=new Set(r),i=new Set(s),o=t.current;a.forEach(function(c){i.has(c)||mr(c,null)}),i.forEach(function(c){a.has(c)||mr(c,o)})}wa.set(t,s)},[s]),t}function Gm(s){return s}function Km(s,e){e===void 0&&(e=Gm);var t=[],r=!1,a={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:s},useMedium:function(i){var o=e(i,r);return t.push(o),function(){t=t.filter(function(c){return c!==o})}},assignSyncMedium:function(i){for(r=!0;t.length;){var o=t;t=[],o.forEach(i)}t={push:function(c){return i(c)},filter:function(){return t}}},assignMedium:function(i){r=!0;var o=[];if(t.length){var c=t;t=[],c.forEach(i),o=t}var l=function(){var u=o;o=[],u.forEach(i)},d=function(){return Promise.resolve().then(l)};d(),t={push:function(u){o.push(u),d()},filter:function(u){return o=o.filter(u),t}}}};return a}function Xm(s){s===void 0&&(s={});var e=Km(null);return e.options=De({async:!0,ssr:!1},s),e}var Vi=function(s){var e=s.sideCar,t=zi(s,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return h.createElement(r,De({},t))};Vi.isSideCarExport=!0;function Qm(s,e){return s.useMedium(e),Vi}var Hi=Xm(),gr=function(){},Xs=h.forwardRef(function(s,e){var t=h.useRef(null),r=h.useState({onScrollCapture:gr,onWheelCapture:gr,onTouchMoveCapture:gr}),a=r[0],i=r[1],o=s.forwardProps,c=s.children,l=s.className,d=s.removeScrollBar,u=s.enabled,f=s.shards,m=s.sideCar,g=s.noIsolation,v=s.inert,p=s.allowPinchZoom,x=s.as,b=x===void 0?"div":x,y=s.gapMode,j=zi(s,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=m,w=Ym([t,e]),N=De(De({},j),a);return h.createElement(h.Fragment,null,u&&h.createElement(_,{sideCar:Hi,removeScrollBar:d,shards:f,noIsolation:g,inert:v,setCallbacks:i,allowPinchZoom:!!p,lockRef:t,gapMode:y}),o?h.cloneElement(h.Children.only(c),De(De({},N),{ref:w})):h.createElement(b,De({},N,{className:l,ref:w}),c))});Xs.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Xs.classNames={fullWidth:Es,zeroRight:Cs};var Zm=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function eg(){if(!document)return null;var s=document.createElement("style");s.type="text/css";var e=Zm();return e&&s.setAttribute("nonce",e),s}function tg(s,e){s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}function sg(s){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(s)}var rg=function(){var s=0,e=null;return{add:function(t){s==0&&(e=eg())&&(tg(e,t),sg(e)),s++},remove:function(){s--,!s&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},ng=function(){var s=rg();return function(e,t){h.useEffect(function(){return s.add(e),function(){s.remove()}},[e&&t])}},Ji=function(){var s=ng(),e=function(t){var r=t.styles,a=t.dynamic;return s(r,a),null};return e},ag={left:0,top:0,right:0,gap:0},pr=function(s){return parseInt(s||"",10)||0},ig=function(s){var e=window.getComputedStyle(document.body),t=e[s==="padding"?"paddingLeft":"marginLeft"],r=e[s==="padding"?"paddingTop":"marginTop"],a=e[s==="padding"?"paddingRight":"marginRight"];return[pr(t),pr(r),pr(a)]},og=function(s){if(s===void 0&&(s="margin"),typeof window>"u")return ag;var e=ig(s),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},cg=Ji(),St="data-scroll-locked",lg=function(s,e,t,r){var a=s.left,i=s.top,o=s.right,c=s.gap;return t===void 0&&(t="margin"),`
  .`.concat(zm,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(c,"px ").concat(r,`;
  }
  body[`).concat(St,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(c,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Cs,` {
    right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(Es,` {
    margin-right: `).concat(c,"px ").concat(r,`;
  }
  
  .`).concat(Cs," .").concat(Cs,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Es," .").concat(Es,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(St,`] {
    `).concat(Vm,": ").concat(c,`px;
  }
`)},ba=function(){var s=parseInt(document.body.getAttribute(St)||"0",10);return isFinite(s)?s:0},dg=function(){h.useEffect(function(){return document.body.setAttribute(St,(ba()+1).toString()),function(){var s=ba()-1;s<=0?document.body.removeAttribute(St):document.body.setAttribute(St,s.toString())}},[])},ug=function(s){var e=s.noRelative,t=s.noImportant,r=s.gapMode,a=r===void 0?"margin":r;dg();var i=h.useMemo(function(){return og(a)},[a]);return h.createElement(cg,{styles:lg(i,!e,a,t?"":"!important")})},Lr=!1;if(typeof window<"u")try{var ws=Object.defineProperty({},"passive",{get:function(){return Lr=!0,!0}});window.addEventListener("test",ws,ws),window.removeEventListener("test",ws,ws)}catch{Lr=!1}var yt=Lr?{passive:!1}:!1,hg=function(s){return s.tagName==="TEXTAREA"},Yi=function(s,e){if(!(s instanceof Element))return!1;var t=window.getComputedStyle(s);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!hg(s)&&t[e]==="visible")},fg=function(s){return Yi(s,"overflowY")},mg=function(s){return Yi(s,"overflowX")},ja=function(s,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var a=Gi(s,r);if(a){var i=Ki(s,r),o=i[1],c=i[2];if(o>c)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},gg=function(s){var e=s.scrollTop,t=s.scrollHeight,r=s.clientHeight;return[e,t,r]},pg=function(s){var e=s.scrollLeft,t=s.scrollWidth,r=s.clientWidth;return[e,t,r]},Gi=function(s,e){return s==="v"?fg(e):mg(e)},Ki=function(s,e){return s==="v"?gg(e):pg(e)},vg=function(s,e){return s==="h"&&e==="rtl"?-1:1},xg=function(s,e,t,r,a){var i=vg(s,window.getComputedStyle(e).direction),o=i*r,c=t.target,l=e.contains(c),d=!1,u=o>0,f=0,m=0;do{var g=Ki(s,c),v=g[0],p=g[1],x=g[2],b=p-x-i*v;(v||b)&&Gi(s,c)&&(f+=b,m+=v),c instanceof ShadowRoot?c=c.host:c=c.parentNode}while(!l&&c!==document.body||l&&(e.contains(c)||e===c));return(u&&Math.abs(f)<1||!u&&Math.abs(m)<1)&&(d=!0),d},bs=function(s){return"changedTouches"in s?[s.changedTouches[0].clientX,s.changedTouches[0].clientY]:[0,0]},_a=function(s){return[s.deltaX,s.deltaY]},Na=function(s){return s&&"current"in s?s.current:s},yg=function(s,e){return s[0]===e[0]&&s[1]===e[1]},wg=function(s){return`
  .block-interactivity-`.concat(s,` {pointer-events: none;}
  .allow-interactivity-`).concat(s,` {pointer-events: all;}
`)},bg=0,wt=[];function jg(s){var e=h.useRef([]),t=h.useRef([0,0]),r=h.useRef(),a=h.useState(bg++)[0],i=h.useState(Ji)[0],o=h.useRef(s);h.useEffect(function(){o.current=s},[s]),h.useEffect(function(){if(s.inert){document.body.classList.add("block-interactivity-".concat(a));var p=qm([s.lockRef.current],(s.shards||[]).map(Na),!0).filter(Boolean);return p.forEach(function(x){return x.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),p.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(a))})}}},[s.inert,s.lockRef.current,s.shards]);var c=h.useCallback(function(p,x){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!o.current.allowPinchZoom;var b=bs(p),y=t.current,j="deltaX"in p?p.deltaX:y[0]-b[0],_="deltaY"in p?p.deltaY:y[1]-b[1],w,N=p.target,C=Math.abs(j)>Math.abs(_)?"h":"v";if("touches"in p&&C==="h"&&N.type==="range")return!1;var k=ja(C,N);if(!k)return!0;if(k?w=C:(w=C==="v"?"h":"v",k=ja(C,N)),!k)return!1;if(!r.current&&"changedTouches"in p&&(j||_)&&(r.current=w),!w)return!0;var F=r.current||w;return xg(F,x,p,F==="h"?j:_)},[]),l=h.useCallback(function(p){var x=p;if(!(!wt.length||wt[wt.length-1]!==i)){var b="deltaY"in x?_a(x):bs(x),y=e.current.filter(function(w){return w.name===x.type&&(w.target===x.target||x.target===w.shadowParent)&&yg(w.delta,b)})[0];if(y&&y.should){x.cancelable&&x.preventDefault();return}if(!y){var j=(o.current.shards||[]).map(Na).filter(Boolean).filter(function(w){return w.contains(x.target)}),_=j.length>0?c(x,j[0]):!o.current.noIsolation;_&&x.cancelable&&x.preventDefault()}}},[]),d=h.useCallback(function(p,x,b,y){var j={name:p,delta:x,target:b,should:y,shadowParent:_g(b)};e.current.push(j),setTimeout(function(){e.current=e.current.filter(function(_){return _!==j})},1)},[]),u=h.useCallback(function(p){t.current=bs(p),r.current=void 0},[]),f=h.useCallback(function(p){d(p.type,_a(p),p.target,c(p,s.lockRef.current))},[]),m=h.useCallback(function(p){d(p.type,bs(p),p.target,c(p,s.lockRef.current))},[]);h.useEffect(function(){return wt.push(i),s.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",l,yt),document.addEventListener("touchmove",l,yt),document.addEventListener("touchstart",u,yt),function(){wt=wt.filter(function(p){return p!==i}),document.removeEventListener("wheel",l,yt),document.removeEventListener("touchmove",l,yt),document.removeEventListener("touchstart",u,yt)}},[]);var g=s.removeScrollBar,v=s.inert;return h.createElement(h.Fragment,null,v?h.createElement(i,{styles:wg(a)}):null,g?h.createElement(ug,{gapMode:s.gapMode}):null)}function _g(s){for(var e=null;s!==null;)s instanceof ShadowRoot&&(e=s.host,s=s.host),s=s.parentNode;return e}const Ng=Qm(Hi,jg);var gn=h.forwardRef(function(s,e){return h.createElement(Xs,De({},s,{ref:e,sideCar:Ng}))});gn.classNames=Xs.classNames;var pn="Popover",[Xi,Pp]=tn(pn,[Ti]),ss=Ti(),[Cg,Ze]=Xi(pn),Qi=s=>{const{__scopePopover:e,children:t,open:r,defaultOpen:a,onOpenChange:i,modal:o=!1}=s,c=ss(e),l=h.useRef(null),[d,u]=h.useState(!1),[f=!1,m]=Wi({prop:r,defaultProp:a,onChange:i});return n.jsx(Am,{...c,children:n.jsx(Cg,{scope:e,contentId:_s(),triggerRef:l,open:f,onOpenChange:m,onOpenToggle:h.useCallback(()=>m(g=>!g),[m]),hasCustomAnchor:d,onCustomAnchorAdd:h.useCallback(()=>u(!0),[]),onCustomAnchorRemove:h.useCallback(()=>u(!1),[]),modal:o,children:t})})};Qi.displayName=pn;var Zi="PopoverAnchor",Eg=h.forwardRef((s,e)=>{const{__scopePopover:t,...r}=s,a=Ze(Zi,t),i=ss(t),{onCustomAnchorAdd:o,onCustomAnchorRemove:c}=a;return h.useEffect(()=>(o(),()=>c()),[o,c]),n.jsx(Ui,{...i,...r,ref:e})});Eg.displayName=Zi;var eo="PopoverTrigger",to=h.forwardRef((s,e)=>{const{__scopePopover:t,...r}=s,a=Ze(eo,t),i=ss(t),o=Pe(e,a.triggerRef),c=n.jsx(pe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":io(a.open),...r,ref:o,onClick:we(s.onClick,a.onOpenToggle)});return a.hasCustomAnchor?c:n.jsx(Ui,{asChild:!0,...i,children:c})});to.displayName=eo;var vn="PopoverPortal",[Sg,kg]=Xi(vn,{forceMount:void 0}),so=s=>{const{__scopePopover:e,forceMount:t,children:r,container:a}=s,i=Ze(vn,e);return n.jsx(Sg,{scope:e,forceMount:t,children:n.jsx(It,{present:t||i.open,children:n.jsx(mn,{asChild:!0,container:a,children:r})})})};so.displayName=vn;var At="PopoverContent",ro=h.forwardRef((s,e)=>{const t=kg(At,s.__scopePopover),{forceMount:r=t.forceMount,...a}=s,i=Ze(At,s.__scopePopover);return n.jsx(It,{present:r||i.open,children:i.modal?n.jsx(Pg,{...a,ref:e}):n.jsx(Og,{...a,ref:e})})});ro.displayName=At;var Pg=h.forwardRef((s,e)=>{const t=Ze(At,s.__scopePopover),r=h.useRef(null),a=Pe(e,r),i=h.useRef(!1);return h.useEffect(()=>{const o=r.current;if(o)return qi(o)},[]),n.jsx(gn,{as:Zt,allowPinchZoom:!0,children:n.jsx(no,{...s,ref:a,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:we(s.onCloseAutoFocus,o=>{var c;o.preventDefault(),i.current||(c=t.triggerRef.current)==null||c.focus()}),onPointerDownOutside:we(s.onPointerDownOutside,o=>{const c=o.detail.originalEvent,l=c.button===0&&c.ctrlKey===!0,d=c.button===2||l;i.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:we(s.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Og=h.forwardRef((s,e)=>{const t=Ze(At,s.__scopePopover),r=h.useRef(!1),a=h.useRef(!1);return n.jsx(no,{...s,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,c;(o=s.onCloseAutoFocus)==null||o.call(s,i),i.defaultPrevented||(r.current||(c=t.triggerRef.current)==null||c.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var l,d;(l=s.onInteractOutside)==null||l.call(s,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((d=t.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),no=h.forwardRef((s,e)=>{const{__scopePopover:t,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:c,onPointerDownOutside:l,onFocusOutside:d,onInteractOutside:u,...f}=s,m=Ze(At,t),g=ss(t);return vi(),n.jsx(rn,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:n.jsx(sn,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:c,onPointerDownOutside:l,onFocusOutside:d,onDismiss:()=>m.onOpenChange(!1),children:n.jsx(Rm,{"data-state":io(m.open),role:"dialog",id:m.contentId,...g,...f,ref:e,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),ao="PopoverClose",Tg=h.forwardRef((s,e)=>{const{__scopePopover:t,...r}=s,a=Ze(ao,t);return n.jsx(pe.button,{type:"button",...r,ref:e,onClick:we(s.onClick,()=>a.onOpenChange(!1))})});Tg.displayName=ao;var Ag="PopoverArrow",Rg=h.forwardRef((s,e)=>{const{__scopePopover:t,...r}=s,a=ss(t);return n.jsx(Dm,{...a,...r,ref:e})});Rg.displayName=Ag;function io(s){return s?"open":"closed"}var Dg=Qi,Mr=to,$g=so,oo=ro;const Lg=Dg,co=h.forwardRef(({className:s,asChild:e=!1,children:t,...r},a)=>e?n.jsx(Mr,{ref:a,className:s,asChild:!0,...r,children:t}):n.jsx(Mr,{ref:a,className:P("",s),...r,children:t}));co.displayName=Mr.displayName;const lo=h.forwardRef(({className:s,align:e="center",sideOffset:t=4,...r},a)=>n.jsx($g,{children:n.jsx(oo,{ref:a,align:e,sideOffset:t,className:P("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...r})}));lo.displayName=oo.displayName;var xn="Dialog",[uo,Op]=tn(xn),[Mg,Oe]=uo(xn),ho=s=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:a,onOpenChange:i,modal:o=!0}=s,c=h.useRef(null),l=h.useRef(null),[d=!1,u]=Wi({prop:r,defaultProp:a,onChange:i});return n.jsx(Mg,{scope:e,triggerRef:c,contentRef:l,contentId:_s(),titleId:_s(),descriptionId:_s(),open:d,onOpenChange:u,onOpenToggle:h.useCallback(()=>u(f=>!f),[u]),modal:o,children:t})};ho.displayName=xn;var fo="DialogTrigger",mo=h.forwardRef((s,e)=>{const{__scopeDialog:t,...r}=s,a=Oe(fo,t),i=Pe(e,a.triggerRef);return n.jsx(pe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":bn(a.open),...r,ref:i,onClick:we(s.onClick,a.onOpenToggle)})});mo.displayName=fo;var yn="DialogPortal",[Ig,go]=uo(yn,{forceMount:void 0}),po=s=>{const{__scopeDialog:e,forceMount:t,children:r,container:a}=s,i=Oe(yn,e);return n.jsx(Ig,{scope:e,forceMount:t,children:h.Children.map(r,o=>n.jsx(It,{present:t||i.open,children:n.jsx(mn,{asChild:!0,container:a,children:o})}))})};po.displayName=yn;var $s="DialogOverlay",vo=h.forwardRef((s,e)=>{const t=go($s,s.__scopeDialog),{forceMount:r=t.forceMount,...a}=s,i=Oe($s,s.__scopeDialog);return i.modal?n.jsx(It,{present:r||i.open,children:n.jsx(Fg,{...a,ref:e})}):null});vo.displayName=$s;var Fg=h.forwardRef((s,e)=>{const{__scopeDialog:t,...r}=s,a=Oe($s,t);return n.jsx(gn,{as:Zt,allowPinchZoom:!0,shards:[a.contentRef],children:n.jsx(pe.div,{"data-state":bn(a.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),ot="DialogContent",xo=h.forwardRef((s,e)=>{const t=go(ot,s.__scopeDialog),{forceMount:r=t.forceMount,...a}=s,i=Oe(ot,s.__scopeDialog);return n.jsx(It,{present:r||i.open,children:i.modal?n.jsx(Ug,{...a,ref:e}):n.jsx(Wg,{...a,ref:e})})});xo.displayName=ot;var Ug=h.forwardRef((s,e)=>{const t=Oe(ot,s.__scopeDialog),r=h.useRef(null),a=Pe(e,t.contentRef,r);return h.useEffect(()=>{const i=r.current;if(i)return qi(i)},[]),n.jsx(yo,{...s,ref:a,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:we(s.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=t.triggerRef.current)==null||o.focus()}),onPointerDownOutside:we(s.onPointerDownOutside,i=>{const o=i.detail.originalEvent,c=o.button===0&&o.ctrlKey===!0;(o.button===2||c)&&i.preventDefault()}),onFocusOutside:we(s.onFocusOutside,i=>i.preventDefault())})}),Wg=h.forwardRef((s,e)=>{const t=Oe(ot,s.__scopeDialog),r=h.useRef(!1),a=h.useRef(!1);return n.jsx(yo,{...s,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,c;(o=s.onCloseAutoFocus)==null||o.call(s,i),i.defaultPrevented||(r.current||(c=t.triggerRef.current)==null||c.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var l,d;(l=s.onInteractOutside)==null||l.call(s,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((d=t.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),yo=h.forwardRef((s,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=s,c=Oe(ot,t),l=h.useRef(null),d=Pe(e,l);return vi(),n.jsxs(n.Fragment,{children:[n.jsx(rn,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:n.jsx(sn,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":bn(c.open),...o,ref:d,onDismiss:()=>c.onOpenChange(!1)})}),n.jsxs(n.Fragment,{children:[n.jsx(Bg,{titleId:c.titleId}),n.jsx(zg,{contentRef:l,descriptionId:c.descriptionId})]})]})}),wn="DialogTitle",wo=h.forwardRef((s,e)=>{const{__scopeDialog:t,...r}=s,a=Oe(wn,t);return n.jsx(pe.h2,{id:a.titleId,...r,ref:e})});wo.displayName=wn;var bo="DialogDescription",jo=h.forwardRef((s,e)=>{const{__scopeDialog:t,...r}=s,a=Oe(bo,t);return n.jsx(pe.p,{id:a.descriptionId,...r,ref:e})});jo.displayName=bo;var _o="DialogClose",No=h.forwardRef((s,e)=>{const{__scopeDialog:t,...r}=s,a=Oe(_o,t);return n.jsx(pe.button,{type:"button",...r,ref:e,onClick:we(s.onClick,()=>a.onOpenChange(!1))})});No.displayName=_o;function bn(s){return s?"open":"closed"}var Co="DialogTitleWarning",[Tp,Eo]=nf(Co,{contentName:ot,titleName:wn,docsSlug:"dialog"}),Bg=({titleId:s})=>{const e=Eo(Co),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return h.useEffect(()=>{s&&(document.getElementById(s)||console.error(t))},[t,s]),null},qg="DialogDescriptionWarning",zg=({contentRef:s,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Eo(qg).contentName}}.`;return h.useEffect(()=>{var i;const a=(i=s.current)==null?void 0:i.getAttribute("aria-describedby");e&&a&&(document.getElementById(e)||console.warn(r))},[r,s,e]),null},Vg=ho,Ir=mo,So=po,ko=vo,Po=xo,Oo=wo,To=jo,Ls=No;const Ao=Vg,Ro=h.forwardRef(({className:s,asChild:e=!1,children:t,...r},a)=>e?n.jsx(Ir,{ref:a,className:s,asChild:!0,...r,children:t}):n.jsx(Ir,{ref:a,className:P("",s),...r,children:t}));Ro.displayName=Ir.displayName;const Do=({className:s,...e})=>n.jsx(So,{className:P(s),...e});Do.displayName=So.displayName;const $o=h.forwardRef(({className:s,...e},t)=>n.jsx(ko,{ref:t,className:P("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...e}));$o.displayName=ko.displayName;const jn=h.forwardRef(({className:s,children:e,...t},r)=>n.jsxs(Do,{children:[n.jsx($o,{}),n.jsxs(Po,{ref:r,className:P("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg md:w-full",s),...t,children:[e,n.jsxs(Ls,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[n.jsx(Go,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));jn.displayName=Po.displayName;const _n=({className:s,...e})=>n.jsx("div",{className:P("flex flex-col space-y-1.5 text-center sm:text-left",s),...e});_n.displayName="DialogHeader";const Nn=({className:s,...e})=>n.jsx("div",{className:P("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...e});Nn.displayName="DialogFooter";const Cn=h.forwardRef(({className:s,...e},t)=>n.jsx(Oo,{ref:t,className:P("text-lg font-semibold leading-none tracking-tight",s),...e}));Cn.displayName=Oo.displayName;const Lo=h.forwardRef(({className:s,...e},t)=>n.jsx(To,{ref:t,className:P("text-sm text-muted-foreground",s),...e}));Lo.displayName=To.displayName;const Hg=h.forwardRef(({className:s,asChild:e=!1,children:t,...r},a)=>e?n.jsx(Ls,{ref:a,className:s,asChild:!0,...r,children:t}):n.jsx(Ls,{ref:a,className:P("",s),...r,children:t}));Hg.displayName=Ls.displayName;const Qs=T.forwardRef(({className:s,...e},t)=>n.jsx("textarea",{ref:t,className:P("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...e}));Qs.displayName="Textarea";function Ca({className:s}){return n.jsx("div",{className:P("flex items-center justify-center",s),children:n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"})})}const Jg=T.forwardRef(({className:s,orientation:e="horizontal",decorative:t=!0,...r},a)=>n.jsx("div",{ref:a,className:P("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",s),...r,role:t?"none":"separator","aria-orientation":t?void 0:e}));Jg.displayName="Separator";function En({post:s,onUpdate:e}){const{id:t,title:r,content:a,created_at:i,upvotes:o=0,downvotes:c=0,comment_count:l=0,author:d,community:u,image_url:f,is_pinned:m,is_anonymous:g,tags:v=[]}=s,{user:p}=je(),[x,b]=h.useState(!1),[y,j]=h.useState(!1),[_,w]=h.useState(!1),[N,C]=h.useState(o||0),[k,F]=h.useState(c||0),[W,O]=h.useState(!1),[te,V]=h.useState(!1),[H,se]=h.useState(!1),[K,re]=h.useState(!1),[L,ne]=h.useState(!1),[fe,$]=h.useState([]),[J,ut]=h.useState(""),[ns,as]=h.useState(!1),[kn,Zs]=h.useState(!1),ht=N-k,is=ht>0?"text-primary":ht<0?"text-destructive":"text-muted-foreground",Ft=p&&d&&p.id===d.id;h.useEffect(()=>{(async()=>{if(p&&(u!=null&&u.id))try{const{data:ie}=await D.from("community_members").select("role").eq("community_id",u.id).eq("user_id",p.id).single();se((ie==null?void 0:ie.role)==="owner"||(ie==null?void 0:ie.role)==="admin")}catch(ie){console.error("Erro ao verificar papel do usurio:",ie)}})()},[p,u]);const os=B=>Zr(new Date(B),{addSuffix:!0,locale:Js}),cs=async()=>{if(!p){R({title:"Voc precisa estar logado para curtir posts",variant:"destructive"});return}try{y?(C(B=>B-1),j(!1)):(_&&(F(B=>B-1),w(!1)),C(B=>B+1),j(!0)),await likePost(t),e&&e()}catch(B){console.error("Erro ao curtir post:",B),R({title:"No foi possvel curtir o post",variant:"destructive"}),C(o||0),F(c||0)}},et=async()=>{if(!p){R({title:"Voc precisa estar logado para descurtir posts",variant:"destructive"});return}try{_?(F(B=>B-1),w(!1)):(y&&(C(B=>B-1),j(!1)),F(B=>B+1),w(!0)),await dislikePost(t),e&&e()}catch(B){console.error("Erro ao descurtir post:",B),R({title:"No foi possvel descurtir o post",variant:"destructive"}),C(o||0),F(c||0)}},Ut=()=>{ne(!0)},er=async()=>{try{if(O(!0),!Ft&&!H){R({title:"Permisso negada",description:"Voc no tem permisso para excluir esta postagem",variant:"destructive"});return}await Zh(t),R({title:"Postagem excluda",description:"A postagem foi excluda com sucesso"}),typeof e=="function"&&e(),V(!1)}catch(B){R({title:"Erro ao excluir",description:B.message||"No foi possvel excluir a postagem",variant:"destructive"})}finally{O(!1)}},tr=B=>{if(!B)return"";let ie=B.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>");return ie=ie.replace(/_(.*?)_/g,"<em>$1</em>"),ie=ie.replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" class="text-primary hover:underline" target="_blank">$1</a>'),ie=ie.replace(/\n/g,"<br>"),ie},ls=Be(),ds=Ft||H,ft=async()=>{if(K)try{as(!0);const B=await sf(t);$(B||[])}catch(B){console.error("Erro ao carregar comentrios:",B),R({title:"No foi possvel carregar os comentrios",variant:"destructive"})}finally{as(!1)}};return h.useEffect(()=>{ft()},[K,t]),n.jsxs(U,{className:P("overflow-hidden transition-colors hover:bg-accent/5",m&&"border-primary/50 bg-primary/5"),children:[n.jsxs(z,{className:"space-y-0 p-4 pb-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(de,{className:"h-8 w-8",children:g?n.jsx(le,{children:"A"}):n.jsxs(n.Fragment,{children:[n.jsx(_e,{src:d==null?void 0:d.avatar_url,alt:d==null?void 0:d.display_name}),n.jsx(le,{name:(d==null?void 0:d.display_name)||(d==null?void 0:d.email)})]})}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm",children:[g?n.jsx("span",{className:"font-medium",children:"Annimo"}):n.jsxs(S,{to:`/profile/${d==null?void 0:d.id}`,className:"font-medium hover:underline",children:[d==null?void 0:d.display_name,(d==null?void 0:d.is_staff)&&n.jsx("span",{className:"ml-1 text-primary text-xs",children:"(Funcionrio)"})]}),n.jsx("span",{className:"text-muted-foreground",children:""}),n.jsx(S,{to:`/community/${u==null?void 0:u.slug}`,className:"text-primary hover:underline",children:u==null?void 0:u.name}),m&&n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"text-muted-foreground",children:""}),n.jsx(Ee,{variant:"secondary",className:"text-xs h-5 px-1",children:"Fixado"})]})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:os(i)})]})]}),n.jsxs(Lg,{children:[n.jsx(co,{asChild:!0,children:n.jsxs(E,{variant:"ghost",size:"icon",className:"h-8 w-8",children:[n.jsx(Ko,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Mais opes"})]})}),n.jsx(lo,{align:"end",className:"w-48 p-1",children:n.jsxs("div",{className:"grid gap-1",children:[n.jsxs(E,{variant:"ghost",size:"sm",className:"h-8 justify-start gap-2 px-2 text-xs",children:[n.jsx(ka,{className:"h-3.5 w-3.5"}),"Salvar"]}),n.jsxs(E,{variant:"ghost",size:"sm",className:"h-8 justify-start gap-2 px-2 text-xs",onClick:Ut,children:[n.jsx(Xo,{className:"h-3.5 w-3.5"}),"Copiar link"]}),ds&&n.jsxs(Ao,{open:te,onOpenChange:V,children:[n.jsx(Ro,{asChild:!0,children:n.jsx("span",{className:"flex w-full",children:n.jsxs(E,{variant:"ghost",size:"sm",className:"h-8 justify-start gap-2 px-2 text-xs text-destructive w-full",children:[n.jsx(Qo,{className:"h-3.5 w-3.5"}),"Excluir"]})})}),n.jsxs(jn,{children:[n.jsxs(_n,{children:[n.jsx(Cn,{children:"Excluir postagem"}),n.jsx(Lo,{children:"Voc tem certeza que deseja excluir esta postagem? Esta ao no pode ser desfeita."})]}),n.jsxs(Nn,{children:[n.jsx(E,{variant:"outline",onClick:()=>V(!1),disabled:W,children:"Cancelar"}),n.jsx(E,{variant:"destructive",onClick:er,disabled:W,children:W?"Excluindo...":"Excluir"})]})]})]}),!ds&&n.jsxs(E,{variant:"ghost",size:"sm",className:"h-8 justify-start gap-2 px-2 text-xs text-destructive",children:[n.jsx(Zo,{className:"h-3.5 w-3.5"}),"Denunciar"]})]})})]})]}),v&&v.length>0&&n.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:v.map((B,ie)=>n.jsx(Ee,{variant:"outline",className:"text-xs",children:B},ie))})]}),n.jsxs(ee,{className:"p-4 pt-2",children:[n.jsxs(S,{to:`/posts/${t}`,className:"space-y-3",children:[n.jsx("h3",{className:"font-semibold leading-tight hover:underline",children:r}),f&&n.jsx("div",{className:"relative rounded-md overflow-hidden bg-muted mb-3 aspect-video",children:n.jsx("img",{src:f,alt:r,className:"w-full h-full object-cover"})}),n.jsx("div",{className:P("text-sm text-muted-foreground",!x&&"line-clamp-3"),dangerouslySetInnerHTML:{__html:tr(a)}})]}),a.length>100&&n.jsx("div",{className:"text-right",children:n.jsx(E,{variant:"link",className:"text-blue-500 hover:text-blue-700 mt-1 px-0",onClick:()=>ls(`/post/${s.id}`),children:"Ler mais"})})]}),n.jsx(ae,{className:"p-4 pt-0",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsxs(E,{variant:"ghost",size:"icon",className:P("h-8 w-8",y&&"text-primary"),onClick:cs,children:[n.jsx(ec,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Curtir"})]}),n.jsx("span",{className:`text-sm font-medium ${is}`,children:ht}),n.jsxs(E,{variant:"ghost",size:"icon",className:P("h-8 w-8",_&&"text-destructive"),onClick:et,children:[n.jsx(tc,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"No curtir"})]})]}),n.jsx(E,{variant:"ghost",size:"sm",className:"h-8 gap-2",onClick:()=>ls(`/posts/${t}#comments`),children:n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Ms,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm",children:l||0}),n.jsx("span",{className:"sr-only",children:"Comentrios"})]})}),n.jsxs(E,{variant:"ghost",size:"icon",className:"h-8 w-8 ml-auto",onClick:Ut,children:[n.jsx(sc,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Compartilhar"})]})]})})]})}function Yg(){const{user:s}=je(),[e,t]=h.useState([]),[r,a]=h.useState(!0),[i,o]=h.useState(null),[c,l]=h.useState("recent"),[d,u]=h.useState(!1),f=Be(),[m,g]=h.useState([]),[v,p]=h.useState(!0);h.useEffect(()=>{x(),_()},[]);const x=async()=>{try{a(!0),o(null),d||t([]);const N=await Vh({limit:20,sort:c==="popular"?"votes":"recent",following:c==="following"});t(N||[])}catch(N){console.error("Erro ao carregar posts:",N),o("No foi possvel carregar os posts. Tente novamente mais tarde."),R({title:"Erro ao carregar posts",description:"Verifique sua conexo e tente novamente",variant:"destructive"})}finally{a(!1),u(!1)}},b=()=>{u(!0),x()},y=N=>{l(N),a(!0),o(null),setTimeout(()=>{x()},300)},j=()=>{switch(c){case"popular":return[...e].sort((N,C)=>C.upvotes-C.downvotes-(N.upvotes-N.downvotes));case"following":return e.filter(N=>{var C;return(C=N.community)==null?void 0:C.is_following});default:return[...e].sort((N,C)=>new Date(C.created_at)-new Date(N.created_at))}},_=async()=>{if(s)try{p(!0);const N=await Qh(s.id);g(N)}catch(N){console.error("Erro ao carregar comunidades:",N)}finally{p(!1)}};return n.jsx("div",{className:"container mx-auto px-4 py-8 max-w-5xl",children:n.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[n.jsxs("div",{className:"md:w-2/3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Feed"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(E,{variant:"outline",size:"icon",onClick:b,disabled:r,title:"Atualizar posts",children:[n.jsx(Pa,{className:`h-4 w-4 ${d?"animate-spin":""}`}),n.jsx("span",{className:"sr-only",children:"Atualizar"})]}),s&&n.jsx(E,{asChild:!0,className:"gap-2",children:n.jsx(S,{to:"/posts/new",children:n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Ht,{className:"h-4 w-4"}),"Novo Post"]})})})]})]}),n.jsxs("div",{className:"flex space-x-1 mb-6 bg-muted p-1 rounded-md",children:[n.jsx(E,{variant:c==="recent"?"default":"ghost",size:"sm",onClick:()=>y("recent"),className:"flex-1",children:"Recentes"}),n.jsx(E,{variant:c==="popular"?"default":"ghost",size:"sm",onClick:()=>y("popular"),className:"flex-1",children:"Populares"}),s&&n.jsx(E,{variant:c==="following"?"default":"ghost",size:"sm",onClick:()=>y("following"),className:"flex-1",children:"Seguindo"})]}),w()]}),n.jsx("div",{className:"md:w-1/3 space-y-6",children:n.jsxs(U,{children:[n.jsx(z,{children:n.jsx(X,{children:"Minhas Comunidades"})}),n.jsx(ee,{children:v?n.jsx("div",{className:"flex justify-center py-4",children:n.jsx(On,{className:"h-6 w-6 animate-spin text-primary"})}):m.length>0?n.jsxs("div",{className:"space-y-3",children:[m.slice(0,5).map(N=>n.jsxs("div",{className:"flex items-center gap-3 cursor-pointer hover:bg-muted p-2 rounded-md",onClick:()=>f(`/community/${N.slug}`),children:[n.jsx(de,{className:"h-8 w-8",children:n.jsx(le,{children:N.name.charAt(0)})}),n.jsx("div",{className:"overflow-hidden",children:n.jsx("p",{className:"text-sm font-medium truncate",children:N.name})})]},N.id)),m.length>5&&n.jsxs(E,{variant:"link",className:"w-full text-xs text-muted-foreground",onClick:()=>f("/communities"),children:["Ver todas (",m.length,")"]})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Voc ainda no participa de nenhuma comunidade"}),n.jsx(E,{size:"sm",onClick:()=>f("/communities"),children:"Explorar comunidades"})]})})]})})]})});function w(){if(r)return n.jsx("div",{className:"flex justify-center items-center py-10",children:n.jsx(On,{className:"h-10 w-10 animate-spin text-primary"})});if(i)return n.jsxs("div",{className:"rounded-lg border bg-card p-8 text-center",children:[n.jsx("p",{className:"text-muted-foreground mb-4",children:i}),n.jsx(E,{onClick:b,children:"Tentar Novamente"})]});const N=j();return N.length===0?c==="following"&&!s?n.jsxs("div",{className:"rounded-lg border bg-card p-8 text-center",children:[n.jsx("p",{className:"text-muted-foreground mb-4",children:"Faa login para ver posts das comunidades que voc segue"}),n.jsx(E,{asChild:!0,children:n.jsx(S,{to:"/login",children:"Entrar"})})]}):n.jsxs("div",{className:"rounded-lg border bg-card p-8 text-center",children:[n.jsx("p",{className:"text-muted-foreground mb-4",children:c==="following"?"Voc ainda no segue nenhuma comunidade":"Nenhum post encontrado"}),n.jsx("div",{className:"flex justify-center gap-2",children:s?n.jsxs(n.Fragment,{children:[c==="following"?n.jsx(E,{variant:"outline",asChild:!0,children:n.jsx(S,{to:"/communities",children:"Explorar Comunidades"})}):null,n.jsx(E,{asChild:!0,children:n.jsx(S,{to:"/posts/new",children:n.jsx("span",{className:"flex items-center",children:"Criar Primeiro Post"})})})]}):n.jsxs(n.Fragment,{children:[n.jsx(E,{variant:"outline",asChild:!0,children:n.jsx(S,{to:"/login",children:n.jsx("span",{className:"flex items-center",children:"Entrar"})})}),n.jsx(E,{asChild:!0,children:n.jsx(S,{to:"/register",children:n.jsx("span",{className:"flex items-center",children:"Criar Conta"})})})]})})]}):N.map(C=>n.jsx(En,{post:C},C.id))}}const G=T.forwardRef(({className:s,...e},t)=>n.jsx("label",{ref:t,className:P("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",s),...e}));G.displayName="Label";function Gg(){const[s,e]=h.useState(""),[t,r]=h.useState(""),[a,i]=h.useState(!1),[o,c]=h.useState(null),{signIn:l}=je(),d=Be();async function u(f){if(f.preventDefault(),c(null),i(!0),!s||!t){c("Por favor, preencha todos os campos."),i(!1);return}try{await l(s,t),R({title:"Login realizado com sucesso",description:"Bem-vindo de volta!"}),d("/")}catch(m){console.error("Erro no login:",m),m.message.includes("Invalid login credentials")?c("Email ou senha incorretos. Verifique suas credenciais."):m.message.includes("Email not confirmed")?c("Por favor, confirme seu email antes de fazer login."):c(m.message||"Erro ao fazer login. Tente novamente."),R({title:"Erro no login",description:"No foi possvel fazer login. Verifique suas credenciais.",variant:"destructive"})}finally{i(!1)}}return n.jsxs(U,{className:"w-full max-w-md mx-auto",children:[n.jsxs(z,{className:"space-y-1",children:[n.jsx(X,{className:"text-2xl font-bold text-center",children:"Login"}),n.jsx(ce,{className:"text-center",children:"Entre na sua conta para continuar"})]}),n.jsxs(ee,{children:[o&&n.jsx("div",{className:"bg-destructive/15 text-destructive text-sm p-3 rounded-md mb-4",children:o}),n.jsxs("form",{onSubmit:u,className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(G,{htmlFor:"email",children:"Email"}),n.jsx(Z,{id:"email",type:"email",value:s,onChange:f=>e(f.target.value),placeholder:"seu.email@exemplo.com",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(G,{htmlFor:"password",children:"Senha"}),n.jsx(S,{to:"/reset-password",className:"text-sm font-medium text-primary hover:underline",children:"Esqueceu a senha?"})]}),n.jsx(Z,{id:"password",type:"password",value:t,onChange:f=>r(f.target.value),required:!0})]}),n.jsx(E,{type:"submit",className:"w-full",disabled:a,children:a?"Entrando...":"Entrar"})]})]}),n.jsx(ae,{className:"flex flex-col",children:n.jsxs("div",{className:"text-sm text-center text-muted-foreground mt-2",children:["Ainda no tem uma conta?"," ",n.jsx(S,{to:"/register",className:"text-primary font-medium hover:underline",children:"Cadastre-se"})]})})]})}function Kg(){const s=window.location.hostname==="chpgo.github.io"?"/ufrj-social":"";return n.jsxs("div",{className:"container max-w-5xl mx-auto py-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-center mb-8",children:"Login"}),n.jsx(Gg,{}),n.jsx("div",{className:"text-center mt-6",children:n.jsxs("p",{className:"text-muted-foreground",children:["Ainda no tem uma conta?"," ",n.jsx("a",{href:s+"/register",className:"text-primary hover:underline",children:"Cadastre-se"})]})})]})}function Xg(){const[s,e]=h.useState(""),[t,r]=h.useState(""),[a,i]=h.useState(""),[o,c]=h.useState(!1),[l,d]=h.useState(null),{signUp:u}=je(),f=Be();async function m(g){if(g.preventDefault(),d(null),c(!0),!s||!t||!a){d("Por favor, preencha todos os campos."),c(!1);return}if(t.length<6){d("A senha deve ter pelo menos 6 caracteres."),c(!1);return}try{const{data:v}=await u(s,t,a);if(v!=null&&v.user){const{error:p}=await D.from("profiles").insert([{id:v.user.id,display_name:a,username:a.toLowerCase().replace(/\s+/g,"."),email:s,created_at:new Date}]);if(p)throw p;try{const x=await Kh();if(x!=null&&x.id){const{error:b}=await D.from("community_members").insert({community_id:x.id,user_id:v.user.id});if(b)throw b;console.log(`Usurio adicionado  comunidade geral: ${x.name}`)}else console.error("No foi possvel encontrar a comunidade geral da UFRJ")}catch(x){console.error("Erro ao adicionar usurio  comunidade geral:",x)}R({title:"Cadastro realizado com sucesso!",description:"Verifique seu email para confirmar sua conta."}),f("/login")}}catch(v){console.error("Erro no cadastro:",v),v.message.includes("already registered")?d("Este email j est registrado. Tente fazer login."):v.message.includes("password")?d("A senha deve ter pelo menos 6 caracteres."):d(v.message||"Erro ao criar conta. Tente novamente."),R({title:"Erro no cadastro",description:"No foi possvel criar sua conta. Verifique os dados informados.",variant:"destructive"})}finally{c(!1)}}return n.jsxs(U,{className:"w-full max-w-md mx-auto",children:[n.jsxs(z,{className:"space-y-1",children:[n.jsx(X,{className:"text-2xl font-bold text-center",children:"Criar Conta"}),n.jsx(ce,{className:"text-center",children:"Preencha seus dados para criar sua conta"})]}),n.jsxs(ee,{children:[l&&n.jsx("div",{className:"bg-destructive/15 text-destructive text-sm p-3 rounded-md mb-4",children:l}),n.jsxs("form",{onSubmit:m,className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(G,{htmlFor:"email",children:"Email"}),n.jsx(Z,{id:"email",type:"email",value:s,onChange:g=>e(g.target.value),placeholder:"seu.email@exemplo.com",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(G,{htmlFor:"username",children:"Nome de Usurio"}),n.jsx(Z,{id:"username",type:"text",value:a,onChange:g=>i(g.target.value),placeholder:"Seu nome de usurio",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(G,{htmlFor:"password",children:"Senha"}),n.jsx(Z,{id:"password",type:"password",value:t,onChange:g=>r(g.target.value),required:!0}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Mnimo de 6 caracteres"})]}),n.jsx(E,{type:"submit",className:"w-full",disabled:o,children:o?"Criando conta...":"Criar Conta"})]})]}),n.jsx(ae,{className:"flex flex-col",children:n.jsxs("div",{className:"text-sm text-center text-muted-foreground mt-2",children:["J tem uma conta?"," ",n.jsx(S,{to:"/login",className:"text-primary font-medium hover:underline",children:"Faa login"})]})})]})}function Qg(){const s=window.location.hostname==="chpgo.github.io"?"/ufrj-social":"";return n.jsxs("div",{className:"container max-w-5xl mx-auto py-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-center mb-8",children:"Criar Nova Conta"}),n.jsx(Xg,{}),n.jsx("div",{className:"text-center mt-6",children:n.jsxs("p",{className:"text-muted-foreground",children:["J tem uma conta?"," ",n.jsx("a",{href:s+"/login",className:"text-primary hover:underline",children:"Faa login"})]})})]})}const rs=T.createContext({}),Ea=({value:s,defaultValue:e,onValueChange:t,children:r,disabled:a=!1})=>{const[i,o]=h.useState(s||e||""),[c,l]=h.useState(!1);h.useEffect(()=>{s!==void 0&&o(s)},[s]);const d=u=>{a||(s===void 0&&o(u),t&&t(u),l(!1))};return n.jsx(rs.Provider,{value:{selectedValue:i,open:c,setOpen:l,onValueChange:d,disabled:a},children:r})},Fr=T.forwardRef(({className:s,placeholder:e,...t},r)=>{const{selectedValue:a}=T.useContext(rs);return n.jsx("span",{ref:r,className:P("block truncate",s),...t,children:a||e||"Selecione..."})});Fr.displayName="SelectValue";const Ur=T.forwardRef(({className:s,children:e,placeholder:t,...r},a)=>{const{selectedValue:i,open:o,setOpen:c,disabled:l}=T.useContext(rs);return n.jsxs("button",{ref:a,type:"button",className:P("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),onClick:()=>!l&&c(!o),disabled:l,"aria-expanded":o,...r,children:[n.jsx("span",{className:"flex items-center gap-2 truncate",children:i?e:t||"Selecione..."}),n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`h-4 w-4 transition-transform ${o?"rotate-180":""}`,children:n.jsx("polyline",{points:"6 9 12 15 18 9"})})]})});Ur.displayName="SelectTrigger";const Wr=T.forwardRef(({className:s,...e},t)=>{const{open:r,setOpen:a}=T.useContext(rs),i=h.useRef(null);return h.useEffect(()=>{const o=c=>{i.current&&!i.current.contains(c.target)&&a(!1)};return r&&document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}},[r,a]),r?n.jsx("div",{ref:o=>{typeof t=="function"&&t(o),i.current=o},className:P("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md animate-in fade-in-80 data-[side=bottom]:slide-in-from-top-1 data-[side=left]:slide-in-from-right-1 data-[side=right]:slide-in-from-left-1 data-[side=top]:slide-in-from-bottom-1",s),...e}):null});Wr.displayName="SelectContent";const Br=T.forwardRef(({className:s,value:e,children:t,...r},a)=>{const{selectedValue:i,onValueChange:o}=T.useContext(rs),c=i===e;return n.jsxs("div",{ref:a,className:P("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50",c?"bg-accent text-accent-foreground":"hover:bg-accent hover:text-accent-foreground",s),onClick:()=>o(e),...r,children:[c&&n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4",children:n.jsx("polyline",{points:"20 6 9 17 4 12"})})}),n.jsx("span",{className:"truncate",children:t})]})});Br.displayName="SelectItem";const Sn=T.forwardRef(({className:s,checked:e,defaultChecked:t,onCheckedChange:r,disabled:a,...i},o)=>{const[c,l]=T.useState(e!==void 0?e:t||!1);T.useEffect(()=>{e!==void 0&&l(e)},[e]);const d=()=>{if(a)return;const u=!c;e===void 0&&l(u),r&&r(u)};return n.jsx("button",{type:"button",role:"switch","aria-checked":c,"data-state":c?"checked":"unchecked",disabled:a,ref:o,onClick:d,className:P("inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",c?"bg-primary":"bg-input",s),...i,children:n.jsx("span",{className:P("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform",c?"translate-x-5":"translate-x-0")})})});Sn.displayName="Switch";const Zg=["Cincia da Computao","Engenharia de Computao","Sistemas de Informao","Engenharia Eletrnica","Engenharia de Controle e Automao","Engenharia Mecnica","Engenharia Civil","Engenharia de Produo","Engenharia Qumica","Engenharia Naval","Engenharia Nuclear","Engenharia Metalrgica","Engenharia de Materiais","Engenharia Ambiental","Matemtica","Fsica","Qumica","Biologia","Medicina","Enfermagem","Farmcia","Odontologia","Psicologia","Direito","Administrao","Economia","Contabilidade","Arquitetura e Urbanismo","Letras","Histria","Geografia","Filosofia","Sociologia","Servio Social","Comunicao Social","Artes","Msica","Educao Fsica"],ep=["CCMN - Centro de Cincias Matemticas e da Natureza","CCS - Centro de Cincias da Sade","CLA - Centro de Letras e Artes","CFCH - Centro de Filosofia e Cincias Humanas","CCJE - Centro de Cincias Jurdicas e Econmicas","CT - Centro de Tecnologia","EEFD - Escola de Educao Fsica e Desportos","FCC - Frum de Cincia e Cultura"];function tp({open:s,onOpenChange:e}){const{profile:t,updateProfile:r}=je(),[a,i]=h.useState(!1),[o,c]=h.useState({display_name:(t==null?void 0:t.display_name)||"",avatar_url:(t==null?void 0:t.avatar_url)||"",bio:(t==null?void 0:t.bio)||"",curso:(t==null?void 0:t.curso)||"",centro:(t==null?void 0:t.centro)||"",periodo_ingresso:(t==null?void 0:t.periodo_ingresso)||"",dre:(t==null?void 0:t.dre)||"",lattes:(t==null?void 0:t.lattes)||"",github:(t==null?void 0:t.github)||"",linkedin:(t==null?void 0:t.linkedin)||"",is_staff:(t==null?void 0:t.is_staff)||!1}),l=(u,f)=>{c(m=>({...m,[u]:f}))},d=async u=>{u.preventDefault(),i(!0);try{await r(o),e(!1)}catch(f){console.error("Erro ao atualizar perfil:",f)}finally{i(!1)}};return n.jsx(Ao,{open:s,onOpenChange:e,children:n.jsxs(jn,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[n.jsx(_n,{children:n.jsx(Cn,{children:"Editar Perfil"})}),n.jsxs("form",{onSubmit:d,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-2",children:[n.jsx(G,{htmlFor:"display_name",children:"Nome de Exibio"}),n.jsx(Z,{id:"display_name",value:o.display_name,onChange:u=>l("display_name",u.target.value),placeholder:"Seu nome"})]}),n.jsxs("div",{className:"grid gap-2",children:[n.jsx(G,{htmlFor:"avatar_url",children:"URL do Avatar"}),n.jsx(Z,{id:"avatar_url",value:o.avatar_url,onChange:u=>l("avatar_url",u.target.value),placeholder:"https://exemplo.com/seu-avatar.jpg"})]}),n.jsxs("div",{className:"grid gap-2",children:[n.jsxs(G,{htmlFor:"is_staff",className:"flex items-center justify-between",children:[n.jsx("span",{children:"Voc  funcionrio da UFRJ?"}),n.jsx(Sn,{id:"is_staff",checked:o.is_staff,onCheckedChange:u=>l("is_staff",u)})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:o.is_staff?"Seu nome ser destacado como funcionrio da UFRJ":"Seu perfil ser exibido como aluno"})]}),n.jsxs("div",{className:"grid gap-2",children:[n.jsx(G,{htmlFor:"bio",children:"Biografia"}),n.jsx(Qs,{id:"bio",value:o.bio,onChange:u=>l("bio",u.target.value),placeholder:"Conte um pouco sobre voc",className:"resize-none"})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{className:"grid gap-2",children:[n.jsx(G,{children:"Curso"}),n.jsxs(Ea,{value:o.curso,onValueChange:u=>l("curso",u),children:[n.jsx(Ur,{children:n.jsx(Fr,{placeholder:"Selecione seu curso"})}),n.jsx(Wr,{children:Zg.map(u=>n.jsx(Br,{value:u,children:u},u))})]})]}),n.jsxs("div",{className:"grid gap-2",children:[n.jsx(G,{children:"Centro"}),n.jsxs(Ea,{value:o.centro,onValueChange:u=>l("centro",u),children:[n.jsx(Ur,{children:n.jsx(Fr,{placeholder:"Selecione seu centro"})}),n.jsx(Wr,{children:ep.map(u=>n.jsx(Br,{value:u,children:u},u))})]})]})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{className:"grid gap-2",children:[n.jsx(G,{htmlFor:"periodo_ingresso",children:"Perodo de Ingresso"}),n.jsx(Z,{id:"periodo_ingresso",value:o.periodo_ingresso,onChange:u=>l("periodo_ingresso",u.target.value),placeholder:"2023.1"})]}),n.jsxs("div",{className:"grid gap-2",children:[n.jsx(G,{htmlFor:"dre",children:"DRE"}),n.jsx(Z,{id:"dre",value:o.dre,onChange:u=>l("dre",u.target.value),placeholder:"123456789"})]})]}),n.jsxs("div",{className:"grid gap-4",children:[n.jsxs("div",{className:"grid gap-2",children:[n.jsx(G,{htmlFor:"lattes",children:"Currculo Lattes"}),n.jsx(Z,{id:"lattes",value:o.lattes,onChange:u=>l("lattes",u.target.value),placeholder:"http://lattes.cnpq.br/seu-curriculo"})]}),n.jsxs("div",{className:"grid gap-2",children:[n.jsx(G,{htmlFor:"github",children:"GitHub"}),n.jsx(Z,{id:"github",value:o.github,onChange:u=>l("github",u.target.value),placeholder:"seu-usuario-github"})]}),n.jsxs("div",{className:"grid gap-2",children:[n.jsx(G,{htmlFor:"linkedin",children:"LinkedIn"}),n.jsx(Z,{id:"linkedin",value:o.linkedin,onChange:u=>l("linkedin",u.target.value),placeholder:"https://linkedin.com/in/seu-perfil"})]})]})]}),n.jsxs(Nn,{children:[n.jsx(E,{type:"button",variant:"outline",onClick:()=>e(!1),disabled:a,children:"Cancelar"}),n.jsx(E,{type:"submit",disabled:a,children:a?"Salvando...":"Salvar"})]})]})]})})}function sp(){var p,x;const{user:s,profile:e}=je(),[t,r]=h.useState(!1),[a,i]=h.useState("posts"),[o,c]=h.useState([]),[l,d]=h.useState([]),[u,f]=h.useState([]),[m,g]=h.useState({posts:!0,comments:!1,communities:!1});h.useEffect(()=>{const b=setTimeout(()=>{g(y=>({...y,posts:!1}))},1500);return()=>clearTimeout(b)},[]),h.useEffect(()=>{(y=>{y==="posts"&&o.length===0?(g(j=>({...j,posts:!0})),setTimeout(()=>{g(j=>({...j,posts:!1}))},1e3)):y==="comments"&&l.length===0?(g(j=>({...j,comments:!0})),setTimeout(()=>{g(j=>({...j,comments:!1}))},1e3)):y==="communities"&&u.length===0&&(g(j=>({...j,communities:!0})),setTimeout(()=>{g(j=>({...j,communities:!1}))},1e3))})(a)},[a]);const v=b=>{R({title:"Perfil atualizado",description:"Suas informaes foram atualizadas com sucesso."}),r(!1)};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"relative h-[200px]",children:[n.jsx("div",{className:"absolute inset-0",children:n.jsx("div",{className:"h-full w-full bg-gradient-to-r from-primary/80 to-primary/40 rounded-lg"})}),n.jsx("div",{className:"absolute -bottom-16 left-6",children:n.jsxs(de,{className:"h-32 w-32 border-4 border-background",children:[n.jsx(_e,{src:e==null?void 0:e.avatar_url,alt:(e==null?void 0:e.display_name)||"Usurio"}),n.jsx(le,{className:"text-4xl",children:((p=e==null?void 0:e.display_name)==null?void 0:p.charAt(0))||((x=s==null?void 0:s.email)==null?void 0:x.charAt(0))||"U"})]})}),n.jsx("div",{className:"absolute bottom-4 right-6",children:n.jsxs(E,{onClick:()=>r(!0),variant:"outline",className:"bg-background/80 backdrop-blur-sm gap-2",children:[n.jsx(rc,{className:"h-4 w-4"}),"Editar Perfil"]})})]}),n.jsxs("div",{className:"pt-20 px-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:(e==null?void 0:e.display_name)||"Usurio"}),n.jsx("p",{className:"text-muted-foreground",children:s==null?void 0:s.email})]}),(e==null?void 0:e.bio)&&n.jsx("p",{className:"text-muted-foreground max-w-2xl",children:e.bio}),n.jsxs("div",{className:"grid gap-6 md:grid-cols-2 max-w-2xl",children:[n.jsxs("div",{className:"space-y-3",children:[(e==null?void 0:e.curso)&&n.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[n.jsx(nc,{className:"h-4 w-4 shrink-0"}),n.jsx("span",{children:e.curso})]}),(e==null?void 0:e.centro)&&n.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[n.jsx(ac,{className:"h-4 w-4 shrink-0"}),n.jsx("span",{children:e.centro})]}),(e==null?void 0:e.periodo_ingresso)&&n.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[n.jsx(Vt,{className:"h-4 w-4 shrink-0"}),n.jsxs("span",{children:["Ingresso em ",e.periodo_ingresso]})]}),(e==null?void 0:e.dre)&&n.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[n.jsx(br,{className:"h-4 w-4 shrink-0"}),n.jsxs("span",{children:["DRE: ",e.dre]})]})]}),n.jsxs("div",{className:"space-y-3",children:[(e==null?void 0:e.lattes)&&n.jsxs("a",{href:e.lattes,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-muted-foreground hover:text-primary transition-colors",children:[n.jsx(Oa,{className:"h-4 w-4 shrink-0"}),n.jsx("span",{className:"truncate",children:"Currculo Lattes"})]}),(e==null?void 0:e.github)&&n.jsxs("a",{href:`https://github.com/${e.github}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-muted-foreground hover:text-primary transition-colors",children:[n.jsx(ic,{className:"h-4 w-4 shrink-0"}),n.jsx("span",{className:"truncate",children:e.github})]}),(e==null?void 0:e.linkedin)&&n.jsxs("a",{href:e.linkedin,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-muted-foreground hover:text-primary transition-colors",children:[n.jsx(oc,{className:"h-4 w-4 shrink-0"}),n.jsx("span",{className:"truncate",children:"LinkedIn"})]})]})]})]}),n.jsxs($t,{value:a,onValueChange:i,className:"mt-8",children:[n.jsxs(dt,{className:"w-full justify-start",children:[n.jsxs(ue,{value:"posts",className:"gap-2",children:[n.jsx(ka,{className:"h-4 w-4"}),"Posts"]}),n.jsxs(ue,{value:"comments",className:"gap-2",children:[n.jsx(Ms,{className:"h-4 w-4"}),"Comentrios"]}),n.jsxs(ue,{value:"communities",className:"gap-2",children:[n.jsx(kt,{className:"h-4 w-4"}),"Comunidades"]})]}),n.jsx(he,{value:"posts",className:"mt-6 space-y-4",children:m.posts?n.jsx(rp,{}):o&&o.length>0?o.map(b=>n.jsx(En,{post:b},b.id)):n.jsx(vr,{title:"Nenhuma publicao ainda",description:"Suas publicaes aparecero aqui",action:n.jsx(E,{asChild:!0,children:n.jsx(S,{to:"/posts/new",children:"Criar Publicao"})})})}),n.jsx(he,{value:"comments",className:"mt-6 space-y-4",children:m.comments?n.jsx(np,{}):l&&l.length>0?l.map(b=>n.jsx(ip,{comment:b},b.id)):n.jsx(vr,{title:"Nenhum comentrio ainda",description:"Seus comentrios aparecero aqui"})}),n.jsx(he,{value:"communities",className:"mt-6 space-y-4",children:m.communities?n.jsx(ap,{}):u&&u.length>0?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:u.map(b=>n.jsx(op,{community:b},b.id))}):n.jsx(vr,{title:"Nenhuma comunidade ainda",description:"Voc ainda no participa de nenhuma comunidade",action:n.jsx(E,{asChild:!0,children:n.jsx(S,{to:"/communities",children:"Explorar Comunidades"})})})})]})]}),n.jsx(tp,{open:t,onOpenChange:r,onSave:v})]})}function vr({title:s,description:e,action:t}){return n.jsxs(U,{className:"border-dashed",children:[n.jsxs(z,{className:"text-center pb-2",children:[n.jsx(X,{children:s}),n.jsx(ce,{children:e})]}),t&&n.jsx(ae,{className:"flex justify-center pt-2",children:t})]})}function rp(){return n.jsx(n.Fragment,{children:Array(2).fill(0).map((s,e)=>n.jsxs(U,{className:"space-y-3 p-4",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx(I,{className:"h-10 w-10 rounded-full"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(I,{className:"h-4 w-[200px]"}),n.jsx(I,{className:"h-3 w-[150px]"})]})]}),n.jsx(I,{className:"h-5 w-4/5"}),n.jsx(I,{className:"h-20 w-full"}),n.jsxs("div",{className:"flex pt-2",children:[n.jsx(I,{className:"h-8 w-16 rounded-md"}),n.jsx(I,{className:"h-8 w-16 rounded-md ml-2"})]})]},e))})}function np(){return n.jsx(n.Fragment,{children:Array(3).fill(0).map((s,e)=>n.jsxs(U,{className:"p-4",children:[n.jsxs("div",{className:"flex items-center space-x-4 mb-3",children:[n.jsx(I,{className:"h-8 w-8 rounded-full"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(I,{className:"h-4 w-[180px]"}),n.jsx(I,{className:"h-3 w-[120px]"})]})]}),n.jsx(I,{className:"h-4 w-full"}),n.jsx(I,{className:"h-4 w-4/5 mt-2"})]},e))})}function ap(){return n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Array(4).fill(0).map((s,e)=>n.jsxs(U,{children:[n.jsxs(z,{className:"flex flex-row items-center gap-4",children:[n.jsx(I,{className:"h-12 w-12 rounded-full"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(I,{className:"h-5 w-24"}),n.jsx(I,{className:"h-4 w-16"})]})]}),n.jsxs(ee,{children:[n.jsx(I,{className:"h-4 w-full"}),n.jsx(I,{className:"h-4 w-full mt-2"})]})]},e))})}function ip({comment:s}){return n.jsxs(U,{children:[n.jsx(z,{className:"p-4 pb-2",children:n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(S,{to:`/posts/${s.post_id}`,className:"font-medium text-sm hover:underline",children:s.post_title}),n.jsxs("span",{className:"text-xs text-muted-foreground",children:[" ",Zr(new Date(s.created_at),{addSuffix:!0,locale:Js})]})]})})}),n.jsx(ee,{className:"p-4 pt-0",children:n.jsx("p",{className:"text-sm",children:s.content})})]})}function op({community:s}){var e;return n.jsxs(U,{children:[n.jsxs(z,{className:"flex flex-row items-center gap-4 p-4 pb-2",children:[n.jsxs(de,{className:"h-10 w-10",children:[n.jsx(_e,{src:s.icon_url,alt:s.name}),n.jsx(le,{children:((e=s.name)==null?void 0:e.charAt(0))||"?"})]}),n.jsxs("div",{children:[n.jsx(X,{className:"text-lg",children:s.name}),n.jsxs(ce,{children:[s.member_count||0," membros"]})]})]}),n.jsx(ee,{className:"p-4 pt-0",children:n.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:s.description||"Sem descrio disponvel"})}),n.jsx(ae,{className:"p-4 pt-0",children:n.jsx(E,{variant:"outline",asChild:!0,className:"w-full",children:n.jsx(S,{to:`/communities/${s.id}`,children:"Visitar"})})})]})}function cp(){const{id:s}=Vr();return n.jsx(Xr,{children:n.jsxs("div",{className:"max-w-5xl mx-auto py-8",children:[n.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Detalhes do Post"}),n.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:n.jsxs("p",{children:["Detalhes do post ID: ",s]})})]})})}function lp(){var ne,fe;const{user:s,profile:e}=je(),t=Be(),{communitySlug:r}=Vr(),[a,i]=h.useState(""),[o,c]=h.useState(""),[l,d]=h.useState(""),[u,f]=h.useState([]),[m,g]=h.useState(!1),[v,p]=h.useState(!0),[x,b]=h.useState("editar"),[y,j]=h.useState(""),[_,w]=h.useState(!1),[N,C]=h.useState(!1),[k,F]=h.useState({}),W=new Date,O={year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"},te=W.toLocaleDateString("pt-BR",O);h.useEffect(()=>{async function $(){try{p(!0);const J=await fi();if(f(J||[]),r&&J){const ut=J.find(ns=>ns.slug===r);ut&&d(ut.id)}}catch(J){console.error("Erro ao carregar comunidades:",J),R({title:"Erro",description:"No foi possvel carregar as comunidades",variant:"destructive"})}finally{p(!1)}}$()},[r]);const V=()=>{const $={};return a.trim()?a.length<5&&($.title="O ttulo deve ter ao menos 5 caracteres"):$.title="O ttulo  obrigatrio",o.trim()?o.length<10&&($.content="O contedo deve ter ao menos 10 caracteres"):$.content="O contedo  obrigatrio",l||($.community="Selecione uma comunidade"),F($),Object.keys($).length===0};async function H($){if($.preventDefault(),!V()){R({title:"Campos incompletos",description:"Verifique os campos obrigatrios e tente novamente",variant:"destructive"});return}g(!0);try{const J={title:a,content:o,community_id:l,author_id:N?null:s.id,image_url:y||null},ut=await Hh(J);R({title:"Publicao criada!",description:"Sua publicao foi criada com sucesso"}),t(r?`/community/${r}`:"/")}catch(J){console.error("Erro ao criar publicao:",J),R({title:"Erro",description:"No foi possvel criar a publicao. Tente novamente.",variant:"destructive"})}finally{g(!1)}}const se=$=>{let J=o;switch($){case"bold":J+="**texto em negrito**";break;case"italic":J+="_texto em itlico_";break;case"list":J+=`
- Item da lista
- Outro item`;break;case"orderedList":J+=`
1. Primeiro item
2. Segundo item`;break;case"code":J+="\n```\ncode block\n```";break;case"link":J+="[texto do link](URL)";break}c(J)},K=$=>{w(!0),setTimeout(()=>{j("https://exemplo.com/imagem.jpg"),w(!1),R({title:"Imagem enviada",description:"A imagem foi anexada  sua postagem"})},1500)},re=$=>{if(!$)return"";let J=$.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>");return J=J.replace(/_(.*?)_/g,"<em>$1</em>"),J=J.replace(/\n/g,"<br>"),J},L=()=>u.find($=>$.id===l);return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Criar Nova Publicao"}),n.jsx("div",{className:"flex items-center gap-2",children:r&&n.jsx(E,{variant:"outline",className:"gap-2",asChild:!0,children:n.jsx(S,{to:`/community/${r}`,children:"Voltar  Comunidade"})})})]}),n.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[n.jsx("div",{className:"md:col-span-2",children:n.jsxs(U,{children:[n.jsxs(z,{children:[n.jsx(X,{children:"Nova Publicao"}),n.jsx(ce,{children:"Compartilhe ideias, dvidas, anncios ou notcias com a comunidade"})]}),n.jsxs($t,{value:x,onValueChange:b,className:"w-full",children:[n.jsx("div",{className:"px-6",children:n.jsxs(dt,{className:"grid w-full grid-cols-2",children:[n.jsxs(ue,{value:"editar",className:"gap-2",children:[n.jsx(cc,{className:"h-4 w-4"}),"Editar"]}),n.jsxs(ue,{value:"preview",className:"gap-2",children:[n.jsx(lc,{className:"h-4 w-4"}),"Visualizar"]})]})}),n.jsxs("form",{onSubmit:H,children:[n.jsx(he,{value:"editar",className:"mt-0",children:n.jsxs(ee,{className:"space-y-4 pt-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(G,{htmlFor:"title",className:"flex items-center gap-1",children:["Ttulo",n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsx(Z,{id:"title",value:a,onChange:$=>i($.target.value),placeholder:"Um ttulo claro e objetivo",className:k.title?"border-destructive":""}),k.title&&n.jsxs("p",{className:"text-sm text-destructive flex items-center gap-1 mt-1",children:[n.jsx(jt,{className:"h-3 w-3"}),k.title]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs(G,{htmlFor:"content",className:"flex items-center gap-1",children:["Contedo",n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsxs("div",{className:"flex items-center gap-1 flex-wrap",children:[n.jsxs(E,{type:"button",variant:"outline",size:"sm",className:"h-8 w-8 p-0",onClick:()=>se("bold"),children:[n.jsx(dc,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Negrito"})]}),n.jsxs(E,{type:"button",variant:"outline",size:"sm",className:"h-8 w-8 p-0",onClick:()=>se("italic"),children:[n.jsx(uc,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Itlico"})]}),n.jsxs(E,{type:"button",variant:"outline",size:"sm",className:"h-8 w-8 p-0",onClick:()=>se("list"),children:[n.jsx(hc,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Lista"})]}),n.jsxs(E,{type:"button",variant:"outline",size:"sm",className:"h-8 w-8 p-0",onClick:()=>se("orderedList"),children:[n.jsx(fc,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Lista Numerada"})]}),n.jsxs(E,{type:"button",variant:"outline",size:"sm",className:"h-8 w-8 p-0",onClick:()=>se("code"),children:[n.jsx(mc,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Cdigo"})]}),n.jsxs(E,{type:"button",variant:"outline",size:"sm",className:"h-8 w-8 p-0",onClick:()=>se("link"),children:[n.jsx(Oa,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Link"})]})]})]}),n.jsx(Qs,{id:"content",value:o,onChange:$=>c($.target.value),placeholder:"Compartilhe seu pensamento, dvida ou ideia...",rows:10,className:k.content?"border-destructive":""}),k.content&&n.jsxs("p",{className:"text-sm text-destructive flex items-center gap-1 mt-1",children:[n.jsx(jt,{className:"h-3 w-3"}),k.content]})]}),n.jsxs("div",{className:"pt-2 flex flex-col sm:flex-row gap-4 items-start sm:items-center",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs(E,{type:"button",variant:"outline",className:"gap-2",onClick:K,disabled:_,children:[_?n.jsx(_t,{className:"h-4 w-4 animate-spin"}):n.jsx(gc,{className:"h-4 w-4"}),"Adicionar Imagem"]}),y&&n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Uma imagem foi anexada"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Sn,{id:"anonymous",checked:N,onCheckedChange:C}),n.jsx(G,{htmlFor:"anonymous",className:"cursor-pointer",children:"Publicar anonimamente"})]})]})]})}),n.jsx(he,{value:"preview",className:"mt-0",children:n.jsxs(ee,{className:"pt-4",children:[n.jsxs(U,{className:"border shadow-sm",children:[n.jsxs(z,{children:[n.jsx(X,{children:a||"Ttulo da sua publicao"}),n.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[n.jsx("div",{className:"flex items-center gap-2",children:N?n.jsxs(n.Fragment,{children:[n.jsx(de,{className:"h-6 w-6",children:n.jsx(le,{children:"A"})}),n.jsx("span",{className:"font-medium",children:"Annimo"})]}):n.jsxs(n.Fragment,{children:[n.jsxs(de,{className:"h-6 w-6",children:[n.jsx(_e,{src:e==null?void 0:e.avatar_url,alt:(e==null?void 0:e.display_name)||"Usurio"}),n.jsx(le,{children:((ne=e==null?void 0:e.display_name)==null?void 0:ne.charAt(0))||((fe=s==null?void 0:s.email)==null?void 0:fe.charAt(0))||"U"})]}),n.jsx("span",{className:"font-medium",children:(e==null?void 0:e.display_name)||"Seu nome"})]})}),n.jsx("span",{className:"text-muted-foreground",children:""}),n.jsx("span",{className:"text-muted-foreground",children:te}),L()&&n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"text-muted-foreground",children:""}),n.jsx(Ee,{variant:"outline",className:"rounded-sm",children:L().name})]})]})]}),n.jsxs(ee,{children:[y&&n.jsx("div",{className:"rounded-md overflow-hidden mb-4 bg-muted/50 border aspect-video flex items-center justify-center",children:n.jsx(pc,{className:"h-10 w-10 text-muted-foreground/50"})}),n.jsx("div",{className:"prose prose-sm max-w-none dark:prose-invert",dangerouslySetInnerHTML:{__html:re(o)||"O contedo da sua postagem aparecer aqui..."}})]})]}),n.jsx("div",{className:"text-center mt-4 text-muted-foreground text-sm",children:n.jsx("p",{children:"Este  apenas um preview de como sua publicao aparecer"})})]})}),n.jsxs(ae,{className:"flex justify-between",children:[n.jsx(E,{type:"button",variant:"outline",onClick:()=>t(-1),children:"Cancelar"}),n.jsx(E,{type:"submit",disabled:m||v,children:m?n.jsxs(n.Fragment,{children:[n.jsx(_t,{className:"mr-2 h-4 w-4 animate-spin"}),"Publicando..."]}):"Publicar"})]})]})]})]})}),n.jsx("div",{children:n.jsxs(U,{children:[n.jsxs(z,{children:[n.jsx(X,{children:"Comunidade"}),n.jsx(ce,{children:"Selecione onde publicar"})]}),n.jsx(ee,{children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs(G,{htmlFor:"community",className:"flex items-center gap-1",children:["Escolha uma comunidade",n.jsx("span",{className:"text-destructive",children:"*"})]}),v?n.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground py-2",children:[n.jsx(_t,{className:"h-4 w-4 animate-spin"}),n.jsx("span",{children:"Carregando comunidades..."})]}):n.jsxs(n.Fragment,{children:[n.jsxs("select",{id:"community",value:l,onChange:$=>d($.target.value),className:`flex h-10 w-full rounded-md border ${k.community?"border-destructive":"border-input"} bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2`,children:[n.jsx("option",{value:"",children:"Selecione uma comunidade"}),u.map($=>n.jsx("option",{value:$.id,children:$.name},$.id))]}),k.community&&n.jsxs("p",{className:"text-sm text-destructive flex items-center gap-1 mt-1",children:[n.jsx(jt,{className:"h-3 w-3"}),k.community]})]})]})}),n.jsxs(ae,{className:"flex flex-col space-y-4 items-start",children:[n.jsxs("div",{className:"text-sm text-muted-foreground",children:[n.jsx("h3",{className:"font-medium text-foreground mb-1",children:"Dicas para uma boa publicao:"}),n.jsxs("ul",{className:"list-disc pl-4 space-y-1",children:[n.jsx("li",{children:"Escolha um ttulo descritivo e claro"}),n.jsx("li",{children:"Fornea detalhes suficientes no contedo"}),n.jsx("li",{children:"Seja respeitoso com todos os membros"}),n.jsx("li",{children:"Verifique se est na comunidade correta"})]})]}),n.jsx("div",{className:"w-full pt-2 border-t",children:n.jsx(E,{variant:"outline",className:"w-full justify-start",asChild:!0,children:n.jsx(S,{to:"/communities",children:"Ver todas as comunidades"})})})]})]})})]})]})}function dp(){var F,W;const{slug:s}=Vr(),{user:e}=je(),[t,r]=h.useState(null),[a,i]=h.useState([]),[o,c]=h.useState(!0),[l,d]=h.useState(!0),[u,f]=h.useState(null),[m,g]=h.useState("posts"),[v,p]=h.useState(!1),[x,b]=h.useState(!1),[y,j]=h.useState(!1);h.useEffect(()=>{_()},[s]),h.useEffect(()=>{var O;if(t&&(w(),e)){const te=(O=t.community_members)==null?void 0:O.some(V=>V.user_id===e.id);j(te)}},[t,e]);const _=async()=>{c(!0),f(null);try{const O=await Jh(s);r(O)}catch(O){console.error("Erro ao buscar comunidade:",O),f("No foi possvel carregar a comunidade. Tente novamente mais tarde."),R({title:"Erro",description:"No foi possvel carregar os dados da comunidade",variant:"destructive"})}finally{c(!1)}},w=async()=>{if(t!=null&&t.id){d(!0);try{const O=await Yh(t.id);i(O)}catch(O){console.error("Erro ao buscar posts da comunidade:",O),R({title:"Erro",description:"No foi possvel carregar as postagens",variant:"destructive"})}finally{d(!1)}}},N=async()=>{p(!0);try{await w(),R({title:"Atualizado",description:"Postagens atualizadas com sucesso"})}catch(O){console.error("Erro ao atualizar posts:",O)}finally{p(!1)}},C=async()=>{if(!e){R({title:"Login necessrio",description:"Faa login para participar da comunidade",variant:"destructive"});return}b(!0);try{await en(t.id)&&(j(!0),R({title:"Sucesso!",description:"Voc agora faz parte desta comunidade"}))}catch(O){console.error("Erro ao entrar na comunidade:",O),R({title:"Erro",description:"No foi possvel entrar na comunidade",variant:"destructive"})}finally{b(!1)}},k=async()=>{b(!0);try{await mi(t.id)&&(j(!1),R({title:"Sucesso!",description:"Voc saiu desta comunidade"}))}catch(O){console.error("Erro ao sair da comunidade:",O),R({title:"Erro",description:"No foi possvel sair da comunidade",variant:"destructive"})}finally{b(!1)}};return o?n.jsx(up,{}):u?n.jsx("div",{className:"max-w-5xl mx-auto py-8",children:n.jsxs(U,{children:[n.jsx(z,{children:n.jsx(X,{className:"text-destructive",children:"Erro"})}),n.jsxs(ee,{children:[n.jsx("p",{children:u}),n.jsx(E,{onClick:_,className:"mt-4",variant:"outline",children:"Tentar novamente"})]})]})}):t?n.jsxs("div",{className:"space-y-6",children:[n.jsxs(U,{className:"border-b",children:[n.jsx("div",{className:"relative h-[120px] overflow-hidden rounded-t-lg",children:n.jsx("div",{className:"absolute inset-0",children:n.jsx("div",{className:"h-full w-full bg-gradient-to-r from-primary/80 to-primary/40"})})}),n.jsxs(z,{className:"pt-8 px-6 flex flex-row items-start justify-between",children:[n.jsxs("div",{className:"flex flex-row items-center gap-4",children:[n.jsxs(de,{className:"h-16 w-16 border-4 border-background -mt-12",children:[n.jsx(_e,{src:t.icon_url,alt:t.name}),n.jsx(le,{className:"text-xl",children:((F=t.name)==null?void 0:F.charAt(0))||"?"})]}),n.jsxs("div",{children:[n.jsx(X,{className:"text-2xl",children:t.name}),n.jsxs(ce,{className:"flex flex-wrap gap-2 items-center mt-1",children:[n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(kt,{className:"h-3.5 w-3.5"}),n.jsxs("span",{children:[t.member_count||0," membros"]})]}),n.jsx("span",{children:""}),n.jsxs("span",{className:"text-xs",children:["Criada ",Zr(new Date(t.created_at),{addSuffix:!0,locale:Js})]})]})]})]}),n.jsxs("div",{className:"flex gap-2",children:[y?n.jsxs(E,{variant:"outline",size:"sm",onClick:k,disabled:x,className:"gap-2",children:[x?n.jsx(_t,{className:"h-4 w-4 animate-spin"}):n.jsx(vc,{className:"h-4 w-4"}),"Sair"]}):n.jsxs(E,{variant:"default",size:"sm",onClick:C,disabled:x,className:"gap-2",children:[x?n.jsx(_t,{className:"h-4 w-4 animate-spin"}):n.jsx(Sa,{className:"h-4 w-4"}),"Participar"]}),t.is_admin&&n.jsx(E,{variant:"outline",size:"sm",className:"gap-2",asChild:!0,children:n.jsxs(S,{to:`/communities/${s}/edit`,children:[n.jsx(xc,{className:"h-4 w-4"}),"Gerenciar"]})})]})]}),n.jsx(ee,{className:"px-6 pb-4",children:n.jsx("p",{className:"text-muted-foreground",children:t.description||"Sem descrio disponvel"})}),n.jsxs(ae,{className:"px-6 py-4 border-t flex justify-between",children:[n.jsxs("div",{className:"flex gap-6",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(Ee,{variant:"outline",className:"gap-1",children:[n.jsx(Tn,{className:"h-3.5 w-3.5"}),n.jsx("span",{children:a.length||0})]}),n.jsx("span",{className:"text-xs text-muted-foreground",children:"Posts"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(Ee,{variant:"outline",className:"gap-1",children:[n.jsx(Ms,{className:"h-3.5 w-3.5"}),n.jsx("span",{children:t.comment_count||0})]}),n.jsx("span",{className:"text-xs text-muted-foreground",children:"Comentrios"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(Ee,{variant:"outline",className:"gap-1",children:[n.jsx(Vt,{className:"h-3.5 w-3.5"}),n.jsx("span",{children:t.post_today_count||0})]}),n.jsx("span",{className:"text-xs text-muted-foreground",children:"Hoje"})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(E,{variant:"ghost",size:"sm",className:"gap-1",onClick:N,disabled:v,children:[n.jsx(Pa,{className:`h-4 w-4 ${v?"animate-spin":""}`}),"Atualizar"]}),y&&n.jsx(E,{variant:"default",size:"sm",className:"gap-1",asChild:!0,children:n.jsxs(S,{to:`/communities/${s}/post/new`,children:[n.jsx(Ht,{className:"h-4 w-4"}),"Novo Post"]})})]})]})]}),n.jsxs($t,{value:m,onValueChange:g,className:"space-y-4",children:[n.jsxs(dt,{children:[n.jsxs(ue,{value:"posts",className:"gap-2",children:[n.jsx(Tn,{className:"h-4 w-4"}),"Posts"]}),n.jsxs(ue,{value:"about",className:"gap-2",children:[n.jsx(yc,{className:"h-4 w-4"}),"Sobre"]})]}),n.jsx(he,{value:"posts",className:"space-y-4",children:l?n.jsx(Mo,{}):a.length>0?n.jsx("div",{className:"space-y-4",children:a.map(O=>n.jsx(En,{post:O},O.id))}):n.jsxs(U,{className:"border-dashed",children:[n.jsxs(z,{className:"text-center pb-2",children:[n.jsx(X,{children:"Nenhuma publicao ainda"}),n.jsx(ce,{children:"Seja o primeiro a postar nesta comunidade"})]}),y&&n.jsx(ae,{className:"flex justify-center pt-2",children:n.jsx(E,{asChild:!0,children:n.jsx(S,{to:`/communities/${s}/post/new`,children:"Criar Post"})})})]})}),n.jsx(he,{value:"about",children:n.jsxs(U,{children:[n.jsx(z,{children:n.jsxs(X,{children:["Sobre ",t.name]})}),n.jsxs(ee,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium mb-1",children:"Descrio"}),n.jsx("p",{className:"text-muted-foreground",children:t.description||"Sem descrio disponvel"})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium mb-1",children:"Informaes"}),n.jsxs("ul",{className:"space-y-2",children:[n.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[n.jsx(Vt,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("span",{children:["Criada em: ",new Date(t.created_at).toLocaleDateString("pt-BR")]})]}),n.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[n.jsx(kt,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("span",{children:[t.member_count||0," membros"]})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium mb-1",children:"Administradores"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:((W=t.admins)==null?void 0:W.map(O=>n.jsx(S,{to:`/profile/${O.username}`,children:n.jsx(Ee,{variant:"secondary",className:"cursor-pointer",children:O.display_name||O.username})},O.id)))||n.jsx(Ee,{variant:"outline",children:"Sem informaes de administradores"})})]})]})]})})]})]}):n.jsx("div",{className:"max-w-5xl mx-auto py-8",children:n.jsxs(U,{children:[n.jsx(z,{children:n.jsx(X,{children:"Comunidade no encontrada"})}),n.jsxs(ee,{children:[n.jsx("p",{children:"A comunidade que voc est procurando no existe ou foi removida."}),n.jsx(S,{to:"/communities",children:n.jsx(E,{className:"mt-4",children:"Ver todas as comunidades"})})]})]})})}function up(){return n.jsxs("div",{className:"space-y-6",children:[n.jsxs(U,{className:"border-b",children:[n.jsx("div",{className:"h-[120px] bg-muted rounded-t-lg"}),n.jsxs(z,{className:"pt-8 px-6 flex flex-row items-start justify-between",children:[n.jsxs("div",{className:"flex flex-row items-center gap-4",children:[n.jsx(I,{className:"h-16 w-16 rounded-full -mt-12"}),n.jsxs("div",{children:[n.jsx(I,{className:"h-7 w-[200px]"}),n.jsxs("div",{className:"flex gap-2 mt-2",children:[n.jsx(I,{className:"h-4 w-[100px]"}),n.jsx(I,{className:"h-4 w-[120px]"})]})]})]}),n.jsx("div",{className:"flex gap-2",children:n.jsx(I,{className:"h-9 w-28 rounded-md"})})]}),n.jsxs(ee,{className:"px-6 pb-4",children:[n.jsx(I,{className:"h-4 w-full"}),n.jsx(I,{className:"h-4 w-4/5 mt-2"})]}),n.jsxs(ae,{className:"px-6 py-4 border-t flex justify-between",children:[n.jsx("div",{className:"flex gap-6",children:Array(3).fill(0).map((s,e)=>n.jsx(I,{className:"h-6 w-24"},e))}),n.jsx(I,{className:"h-9 w-28"})]})]}),n.jsx(I,{className:"h-10 w-[200px]"}),n.jsx(Mo,{})]})}function Mo(){return n.jsx("div",{className:"space-y-4",children:Array(2).fill(0).map((s,e)=>n.jsxs(U,{className:"space-y-3 p-4",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx(I,{className:"h-10 w-10 rounded-full"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(I,{className:"h-4 w-[200px]"}),n.jsx(I,{className:"h-3 w-[150px]"})]})]}),n.jsx(I,{className:"h-5 w-4/5"}),n.jsx(I,{className:"h-20 w-full"}),n.jsxs("div",{className:"flex pt-2",children:[n.jsx(I,{className:"h-8 w-16 rounded-md"}),n.jsx(I,{className:"h-8 w-16 rounded-md ml-2"})]})]},e))})}function hp(){const{user:s}=je(),e=Be(),[t,r]=h.useState([]),[a,i]=h.useState([]),[o,c]=h.useState(!0),[l,d]=h.useState(null),[u,f]=h.useState(""),[m,g]=h.useState({}),[v,p]=h.useState("todas");h.useEffect(()=>{x()},[s]);async function x(){c(!0),d(null);try{const w=await fi();if(r(w),s){const N=w.filter(C=>{var k;return(k=C.community_members)==null?void 0:k.some(F=>F.user_id===s.id)});i(N)}else i([])}catch(w){console.error("Erro ao buscar comunidades:",w),d("No foi possvel carregar as comunidades. Tente novamente mais tarde."),R({title:"Erro",description:"No foi possvel carregar as comunidades",variant:"destructive"})}finally{c(!1)}}const b=async w=>{if(!s){R({title:"Login necessrio",description:"Faa login para participar de comunidades.",variant:"destructive"}),e("/login");return}g(N=>({...N,[w]:!0}));try{if(await en(w)){R({title:"Sucesso!",description:"Voc agora faz parte desta comunidade."});const C=t.find(k=>k.id===w);C&&i(k=>[...k,C])}else throw new Error("No foi possvel entrar na comunidade")}catch(N){console.error("Erro ao entrar na comunidade:",N),R({title:"Erro",description:"No foi possvel entrar na comunidade. Tente novamente.",variant:"destructive"})}finally{g(N=>({...N,[w]:!1}))}},y=async w=>{g(N=>({...N,[w]:!0}));try{if(await mi(w))R({title:"Sucesso!",description:"Voc saiu desta comunidade."}),i(C=>C.filter(k=>k.id!==w));else throw new Error("No foi possvel sair da comunidade")}catch(N){console.error("Erro ao sair da comunidade:",N),R({title:"Erro",description:"No foi possvel sair da comunidade. Tente novamente.",variant:"destructive"})}finally{g(N=>({...N,[w]:!1}))}},j=t.filter(w=>{var N;return((N=w.name)==null?void 0:N.toLowerCase().includes(u.toLowerCase()))||w.description&&w.description.toLowerCase().includes(u.toLowerCase())}),_=()=>t.filter(w=>!a.some(N=>N.id===w.id)).slice(0,6);return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Comunidades"}),s&&n.jsx(E,{asChild:!0,children:n.jsxs(S,{to:"/communities/new",className:"gap-2",children:[n.jsx(Ht,{className:"h-4 w-4"}),"Nova Comunidade"]})})]}),n.jsxs("div",{className:"relative",children:[n.jsx(Ss,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),n.jsx(Z,{type:"search",placeholder:"Pesquisar comunidades...",className:"w-full pl-8",value:u,onChange:w=>f(w.target.value)})]}),n.jsxs($t,{value:v,onValueChange:p,className:"w-full",children:[n.jsxs(dt,{className:"grid w-full grid-cols-3",children:[n.jsx(ue,{value:"todas",children:"Todas"}),n.jsxs(ue,{value:"minhas",disabled:!s,children:["Minhas Comunidades",a.length>0&&n.jsx(Ee,{variant:"secondary",className:"ml-2",children:a.length})]}),n.jsx(ue,{value:"recomendadas",children:"Recomendadas"})]}),n.jsx(he,{value:"todas",className:"mt-6",children:o?n.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:Array(6).fill(0).map((w,N)=>n.jsx(yr,{},N))}):l?n.jsxs(U,{className:"border-destructive",children:[n.jsxs(z,{children:[n.jsx(X,{className:"text-destructive",children:"Erro"}),n.jsx(ce,{children:l})]}),n.jsx(ae,{children:n.jsx(E,{onClick:x,children:"Tentar novamente"})})]}):j.length===0?n.jsxs(U,{className:"text-center",children:[n.jsxs(z,{children:[n.jsx(X,{children:"Nenhuma comunidade encontrada"}),n.jsx(ce,{children:"Tente pesquisar outro termo ou crie uma nova comunidade"})]}),s&&n.jsx(ae,{className:"flex justify-center",children:n.jsx(E,{asChild:!0,children:n.jsx(S,{to:"/communities/new",children:"Criar Comunidade"})})})]}):n.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:j.map(w=>n.jsx(xr,{community:w,isMember:a.some(N=>N.id===w.id),onJoin:()=>b(w.id),onLeave:()=>y(w.id),isLoading:m[w.id]},w.id))})}),n.jsx(he,{value:"minhas",className:"mt-6",children:o?n.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:Array(2).fill(0).map((w,N)=>n.jsx(yr,{},N))}):s?a.length===0?n.jsxs(U,{className:"text-center",children:[n.jsxs(z,{children:[n.jsx(X,{children:"Voc ainda no participa de nenhuma comunidade"}),n.jsx(ce,{children:"Explore as comunidades disponveis ou crie a sua prpria"})]}),n.jsxs(ae,{className:"flex justify-center gap-4",children:[n.jsx(E,{variant:"outline",onClick:()=>p("todas"),children:"Explorar Comunidades"}),n.jsx(E,{asChild:!0,children:n.jsx(S,{to:"/communities/new",children:"Criar Comunidade"})})]})]}):n.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:a.map(w=>n.jsx(xr,{community:w,isMember:!0,onLeave:()=>y(w.id),isLoading:m[w.id]},w.id))}):n.jsxs(U,{className:"text-center",children:[n.jsxs(z,{children:[n.jsx(X,{children:"Faa login para ver suas comunidades"}),n.jsx(ce,{children:"Entre na sua conta para participar das comunidades"})]}),n.jsx(ae,{className:"flex justify-center",children:n.jsx(E,{asChild:!0,children:n.jsx(S,{to:"/login",children:"Entrar"})})})]})}),n.jsx(he,{value:"recomendadas",className:"mt-6",children:o?n.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:Array(3).fill(0).map((w,N)=>n.jsx(yr,{},N))}):_().length===0?n.jsxs(U,{className:"text-center",children:[n.jsxs(z,{children:[n.jsx(X,{children:"Nenhuma recomendao disponvel"}),n.jsx(ce,{children:s?"Voc j participa de todas as comunidades!":"Faa login para ver recomendaes personalizadas"})]}),n.jsx(ae,{className:"flex justify-center",children:s?n.jsx(E,{variant:"outline",onClick:()=>p("todas"),children:"Ver Todas Comunidades"}):n.jsx(E,{asChild:!0,children:n.jsx(S,{to:"/login",children:"Entrar"})})})]}):n.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:_().map(w=>n.jsx(xr,{community:w,onJoin:()=>b(w.id),isLoading:m[w.id]},w.id))})})]})]})}function xr({community:s,isMember:e=!1,onJoin:t,onLeave:r,isLoading:a}){var c;const o=(l=>{const d=["bg-blue-600","bg-red-600","bg-green-600","bg-purple-600","bg-amber-600","bg-indigo-600","bg-pink-600","bg-teal-600"],u=(l==null?void 0:l.charCodeAt(0))%d.length||0;return d[u]})(s==null?void 0:s.name);return n.jsxs(U,{className:"overflow-hidden transition-shadow hover:shadow-md",children:[n.jsxs(z,{className:"flex flex-row items-center gap-4 pb-2",children:[n.jsxs(de,{className:"h-12 w-12",children:[n.jsx(_e,{src:s==null?void 0:s.icon_url,alt:s==null?void 0:s.name}),n.jsx(le,{className:`${o} text-white`,children:((c=s==null?void 0:s.name)==null?void 0:c.charAt(0))||"?"})]}),n.jsxs("div",{children:[n.jsx(X,{className:"text-xl",children:s==null?void 0:s.name}),n.jsxs(ce,{children:[(s==null?void 0:s.member_count)||0," membros"]})]})]}),n.jsx(ee,{children:n.jsx("p",{className:"text-sm text-muted-foreground line-clamp-3",children:(s==null?void 0:s.description)||"Sem descrio disponvel."})}),n.jsxs(ae,{className:"flex gap-2",children:[n.jsx(E,{className:"flex-1 gap-2",variant:e?"outline":"default",onClick:e?r:t,disabled:a,children:a?n.jsxs(n.Fragment,{children:[n.jsx(_t,{className:"h-4 w-4 animate-spin"}),e?"Saindo...":"Entrando..."]}):n.jsxs(n.Fragment,{children:[n.jsx(kt,{className:"h-4 w-4"}),e?"Participando":"Participar"]})}),n.jsx(E,{variant:"secondary",asChild:!0,className:"gap-2",children:n.jsx(S,{to:`/communities/${s==null?void 0:s.id}`,children:"Ver"})})]})]})}function yr(){return n.jsxs(U,{children:[n.jsxs(z,{className:"flex flex-row items-center gap-4",children:[n.jsx("div",{className:"h-12 w-12 rounded-full bg-muted animate-pulse"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"h-5 w-24 bg-muted animate-pulse rounded"}),n.jsx("div",{className:"h-4 w-16 bg-muted animate-pulse rounded"})]})]}),n.jsx(ee,{children:n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"h-4 w-full bg-muted animate-pulse rounded"}),n.jsx("div",{className:"h-4 w-full bg-muted animate-pulse rounded"}),n.jsx("div",{className:"h-4 w-2/3 bg-muted animate-pulse rounded"})]})}),n.jsx(ae,{children:n.jsx("div",{className:"h-10 w-full bg-muted animate-pulse rounded"})})]})}function fp(){const s=Be(),[e,t]=h.useState(""),[r,a]=h.useState(""),[i,o]=h.useState(""),[c,l]=h.useState(""),[d,u]=h.useState(""),[f,m]=h.useState({}),[g,v]=h.useState(!1),[p,x]=h.useState("details"),b=_=>{const w=_.target.value;t(w);const N=w.toLowerCase().replace(/[^\w\s]/gi,"").replace(/\s+/g,"-");a(N)},y=()=>{const _={};return e.trim()||(_.name="Nome da comunidade  obrigatrio"),r.trim()?/^[a-z0-9\-]+$/.test(r)||(_.slug="Slug deve conter apenas letras minsculas, nmeros e hfens"):_.slug="Slug da comunidade  obrigatrio",i.trim()||(_.description="Descrio da comunidade  obrigatria"),m(_),Object.keys(_).length===0},j=async _=>{if(_.preventDefault(),!!y()){v(!0);try{const N=await Gh({name:e,slug:r,description:i,icon_url:c||null,banner_url:d||null});R({title:"Comunidade criada com sucesso!",description:`A comunidade ${e} foi criada.`}),s(`/community/${r}`)}catch(w){console.error("Erro ao criar comunidade:",w),w.message==="slug_already_exists"||w.message.includes("unique constraint")||w.code&&w.code==="23505"?(m({...f,slug:"Este slug j est em uso. Escolha outro nome para sua comunidade."}),R({title:"Erro ao criar comunidade",description:"Este slug j est em uso. Escolha outro nome para sua comunidade.",variant:"destructive"})):R({title:"Erro ao criar comunidade",description:"No foi possvel criar a comunidade. Tente novamente.",variant:"destructive"})}finally{v(!1)}}};return n.jsxs("div",{className:"space-y-6",children:[n.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Criar Nova Comunidade"}),n.jsxs(U,{children:[n.jsxs(z,{children:[n.jsx(X,{children:"Informaes da Comunidade"}),n.jsx(ce,{children:"Preencha os dados para criar sua comunidade na UFRJ Hub"})]}),n.jsx(ee,{children:n.jsxs($t,{value:p,onValueChange:x,className:"w-full",children:[n.jsxs(dt,{className:"grid w-full grid-cols-2",children:[n.jsx(ue,{value:"details",children:"Detalhes"}),n.jsx(ue,{value:"appearance",children:"Aparncia"})]}),n.jsxs("form",{onSubmit:j,children:[n.jsxs(he,{value:"details",className:"space-y-4 mt-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(G,{htmlFor:"name",children:["Nome da Comunidade",n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsx(Z,{id:"name",value:e,onChange:b,placeholder:"Ex: Engenharia de Computao UFRJ",className:f.name?"border-destructive":""}),f.name&&n.jsxs("p",{className:"text-xs text-destructive mt-1 flex items-center gap-1",children:[n.jsx(jt,{className:"h-3 w-3"}),f.name]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(G,{htmlFor:"slug",children:["Slug da Comunidade",n.jsx("span",{className:"text-destructive",children:"*"}),n.jsx("span",{className:"text-xs text-muted-foreground ml-1",children:"(ser usado na URL)"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"text-muted-foreground mr-1",children:"/community/"}),n.jsx(Z,{id:"slug",value:r,onChange:_=>a(_.target.value.toLowerCase().replace(/[^\w\-]/g,"")),placeholder:"engenharia-computacao",className:`${f.slug?"border-destructive":""}`})]}),f.slug&&n.jsxs("p",{className:"text-xs text-destructive mt-1 flex items-center gap-1",children:[n.jsx(jt,{className:"h-3 w-3"}),f.slug]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(G,{htmlFor:"description",children:["Descrio",n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsx(Qs,{id:"description",value:i,onChange:_=>o(_.target.value),placeholder:"Descreva sua comunidade...",rows:4,className:f.description?"border-destructive":""}),f.description&&n.jsxs("p",{className:"text-xs text-destructive mt-1 flex items-center gap-1",children:[n.jsx(jt,{className:"h-3 w-3"}),f.description]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Uma boa descrio ajuda as pessoas a entenderem o propsito da sua comunidade."})]})]}),n.jsxs(he,{value:"appearance",className:"space-y-4 mt-4",children:[n.jsx("div",{className:"bg-amber-50 dark:bg-amber-950 border border-amber-200 dark:border-amber-800 p-4 rounded-md mb-4",children:n.jsxs("p",{className:"text-amber-700 dark:text-amber-400 text-sm",children:[n.jsx("strong",{children:"Nota:"})," O upload de imagens no est disponvel no momento. As URLs de cone e banner sero ignoradas ao criar a comunidade."]})}),n.jsxs("div",{className:"space-y-2 opacity-60",children:[n.jsx(G,{htmlFor:"icon_url",children:"URL do cone (no suportado)"}),n.jsx(Z,{id:"icon_url",value:c,onChange:_=>l(_.target.value),placeholder:"https://exemplo.com/icone.png",disabled:!0}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"URL para uma imagem quadrada que ser usada como cone da comunidade."})]}),n.jsxs("div",{className:"space-y-2 opacity-60",children:[n.jsx(G,{htmlFor:"banner_url",children:"URL do Banner (no suportado)"}),n.jsx(Z,{id:"banner_url",value:d,onChange:_=>u(_.target.value),placeholder:"https://exemplo.com/banner.jpg",disabled:!0}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"URL para uma imagem de capa que ser exibida no topo da pgina da comunidade."})]}),n.jsxs("div",{className:"rounded-md border p-4 mt-4 opacity-60",children:[n.jsx("h3",{className:"font-medium mb-2",children:"Dicas para futuras implementaes:"}),n.jsxs("ul",{className:"list-disc list-inside text-sm text-muted-foreground space-y-1",children:[n.jsx("li",{children:"Use um cone quadrado com pelo menos 128x128 pixels"}),n.jsx("li",{children:"O banner deve ter proporo 3:1 (ex: 1200x400 pixels)"}),n.jsx("li",{children:"Formatos recomendados: PNG ou JPG"}),n.jsx("li",{children:"Tamanho mximo: 2MB por imagem"})]})]})]}),n.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[n.jsx(E,{type:"button",variant:"outline",onClick:()=>s("/communities"),disabled:g,children:"Cancelar"}),n.jsx(E,{type:"submit",disabled:g,children:g?"Criando...":"Criar Comunidade"})]})]})]})})]})]})}function mp(){const s=Be(),{user:e}=je(),[t,r]=h.useState([]),[a,i]=h.useState(!0),[o,c]=h.useState("upcoming");h.useEffect(()=>{l(o)},[o]);const l=async(m="upcoming")=>{try{i(!0);const g=await ef({filter:m});r(g||[])}catch(g){console.error("Erro ao buscar eventos:",g),R.error("No foi possvel carregar os eventos")}finally{i(!1)}},d=m=>{const g=new Date(m);return uh(g,"PPP 's' HH:mm",{locale:Js})},u=m=>{const g=new Date(m),v=new Date,p=eu(v,2);return mh(g,v)&&gh(g,p)},f=async m=>{if(!e){R.error("Voc precisa estar logado para participar de eventos"),s("/login");return}try{await tf(m),R.success("Voc est participando deste evento!")}catch(g){console.error("Erro ao participar do evento:",g),R.error("No foi possvel participar do evento")}};return n.jsx(Xr,{children:n.jsxs("div",{className:"container py-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Eventos"}),n.jsxs(E,{onClick:()=>s("/events/new"),children:[n.jsx(An,{className:"mr-2 h-4 w-4"}),"Criar Evento"]})]}),n.jsxs($t,{defaultValue:"upcoming",value:o,onValueChange:c,children:[n.jsxs(dt,{className:"mb-6",children:[n.jsx(ue,{value:"upcoming",children:"Prximos Eventos"}),n.jsx(ue,{value:"past",children:"Eventos Passados"})]}),n.jsx(he,{value:"upcoming",className:"mt-0",children:a?n.jsx("div",{className:"flex justify-center py-10",children:n.jsx(Ca,{})}):t.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(wc,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-lg font-semibold",children:"Nenhum evento futuro encontrado"}),n.jsx("p",{className:"text-muted-foreground mt-2",children:"Seja o primeiro a criar um evento para sua comunidade!"}),n.jsxs(E,{className:"mt-4",onClick:()=>s("/events/new"),children:[n.jsx(An,{className:"mr-2 h-4 w-4"}),"Criar Evento"]})]}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(m=>{var g,v;return n.jsxs(U,{className:"overflow-hidden h-full flex flex-col",children:[n.jsxs(z,{className:"pb-3",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsx(X,{className:"text-lg line-clamp-2",children:m.title}),u(m.event_date)&&n.jsx(Ee,{variant:"purple",className:"ml-2 whitespace-nowrap",children:"Em breve"})]}),n.jsx(ce,{children:n.jsx(S,{to:`/communities/${(g=m.community)==null?void 0:g.slug}`,className:"text-primary hover:underline",children:(v=m.community)==null?void 0:v.name})})]}),n.jsx(ee,{className:"pb-3 flex-grow",children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Rn,{className:"h-4 w-4 text-muted-foreground shrink-0 mt-0.5"}),n.jsx("span",{children:d(m.event_date)})]}),m.is_online?n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Dn,{className:"h-4 w-4 text-muted-foreground shrink-0 mt-0.5"}),n.jsx("span",{children:"Evento online"})]}):m.location?n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(br,{className:"h-4 w-4 text-muted-foreground shrink-0 mt-0.5"}),n.jsx("span",{children:m.location})]}):null,n.jsx("p",{className:"text-sm mt-3 line-clamp-3",children:m.description})]})}),n.jsx(ae,{className:"pt-3 border-t",children:n.jsxs("div",{className:"flex gap-3 w-full",children:[n.jsx(E,{variant:"outline",className:"flex-1",onClick:()=>s(`/events/${m.id}`),children:"Ver Detalhes"}),n.jsx(E,{className:"flex-1",onClick:()=>f(m.id),children:"Participar"})]})})]},m.id)})})}),n.jsx(he,{value:"past",className:"mt-0",children:a?n.jsx("div",{className:"flex justify-center py-10",children:n.jsx(Ca,{})}):t.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(bc,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-lg font-semibold",children:"Nenhum evento passado encontrado"}),n.jsx("p",{className:"text-muted-foreground mt-2",children:"Eventos passados aparecero aqui."})]}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(m=>{var g,v;return n.jsxs(U,{className:"overflow-hidden h-full flex flex-col opacity-80 hover:opacity-100 transition-opacity",children:[n.jsxs(z,{className:"pb-3",children:[n.jsx(X,{className:"text-lg line-clamp-2",children:m.title}),n.jsx(ce,{children:n.jsx(S,{to:`/communities/${(g=m.community)==null?void 0:g.slug}`,className:"text-primary hover:underline",children:(v=m.community)==null?void 0:v.name})})]}),n.jsx(ee,{className:"pb-3 flex-grow",children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Rn,{className:"h-4 w-4 text-muted-foreground shrink-0 mt-0.5"}),n.jsx("span",{children:d(m.event_date)})]}),m.is_online?n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Dn,{className:"h-4 w-4 text-muted-foreground shrink-0 mt-0.5"}),n.jsx("span",{children:"Evento online"})]}):m.location?n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(br,{className:"h-4 w-4 text-muted-foreground shrink-0 mt-0.5"}),n.jsx("span",{children:m.location})]}):null,n.jsx("p",{className:"text-sm mt-3 line-clamp-3",children:m.description})]})}),n.jsx(ae,{className:"pt-3 border-t",children:n.jsx(E,{variant:"outline",className:"w-full",onClick:()=>s(`/events/${m.id}`),children:"Ver Detalhes"})})]},m.id)})})})]})]})})}const qr=T.forwardRef(({className:s,children:e,...t},r)=>n.jsx("div",{ref:r,className:P("relative overflow-auto",s),...t,children:e}));qr.displayName="ScrollArea";function gp(){const{user:s,profile:e}=je(),[t,r]=h.useState([]),[a,i]=h.useState(null),[o,c]=h.useState([]),[l,d]=h.useState(""),[u,f]=h.useState(""),m=h.useRef(null);h.useEffect(()=>{s&&(v(),x())},[s]),h.useEffect(()=>{a&&p(a.id)},[a]),h.useEffect(()=>{g()},[o]);const g=()=>{var y;(y=m.current)==null||y.scrollIntoView({behavior:"smooth"})},v=async()=>{try{const{data:y,error:j}=await D.from("conversations").select(`
          id,
          participants:conversation_participants(
            user:profiles(id, display_name, avatar_url)
          ),
          last_message,
          updated_at
        `).eq("conversation_participants.user_id",s.id).order("updated_at",{ascending:!1});if(j)throw j;const _=y.map(w=>{var N;return{id:w.id,otherUser:(N=w.participants.find(C=>C.user.id!==s.id))==null?void 0:N.user,lastMessage:w.last_message,updatedAt:w.updated_at}});r(_)}catch(y){console.error("Erro ao buscar conversas:",y)}},p=async y=>{try{const{data:j,error:_}=await D.from("messages").select(`
          id,
          content,
          created_at,
          sender:profiles(id, display_name, avatar_url)
        `).eq("conversation_id",y).order("created_at",{ascending:!0});if(_)throw _;c(j)}catch(j){console.error("Erro ao buscar mensagens:",j)}},x=()=>{const y=D.channel("messages").on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`conversation_id=eq.${a==null?void 0:a.id}`},j=>{j.new.sender_id!==s.id&&p(a.id)}).subscribe();return()=>{y.unsubscribe()}},b=async y=>{if(y.preventDefault(),!(!l.trim()||!a))try{const{error:j}=await D.from("messages").insert({conversation_id:a.id,sender_id:s.id,content:l});if(j)throw j;await D.from("conversations").update({last_message:l,updated_at:new Date().toISOString()}).eq("id",a.id),d(""),p(a.id)}catch(j){console.error("Erro ao enviar mensagem:",j)}};return n.jsxs("div",{className:"flex h-[calc(100vh-4rem)] gap-4",children:[n.jsxs("div",{className:"w-80 border-r",children:[n.jsx("div",{className:"p-4 border-b",children:n.jsxs("div",{className:"relative",children:[n.jsx(Ss,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),n.jsx(Z,{type:"search",placeholder:"Buscar conversas...",className:"pl-8",value:u,onChange:y=>f(y.target.value)})]})}),n.jsx(qr,{className:"h-[calc(100vh-8rem)]",children:t.filter(y=>y.otherUser.display_name.toLowerCase().includes(u.toLowerCase())).map(y=>n.jsxs("button",{className:P("w-full p-4 flex items-center gap-3 hover:bg-accent transition-colors",(a==null?void 0:a.id)===y.id&&"bg-accent"),onClick:()=>i(y),children:[n.jsxs(de,{children:[n.jsx(_e,{src:y.otherUser.avatar_url}),n.jsx(le,{children:y.otherUser.display_name.charAt(0)})]}),n.jsxs("div",{className:"flex-1 text-left",children:[n.jsx("p",{className:"font-medium",children:y.otherUser.display_name}),n.jsx("p",{className:"text-sm text-muted-foreground truncate",children:y.lastMessage})]})]},y.id))})]}),a?n.jsxs("div",{className:"flex-1 flex flex-col",children:[n.jsxs("div",{className:"p-4 border-b flex items-center gap-3",children:[n.jsxs(de,{children:[n.jsx(_e,{src:a.otherUser.avatar_url}),n.jsx(le,{children:a.otherUser.display_name.charAt(0)})]}),n.jsx("div",{children:n.jsx("p",{className:"font-medium",children:a.otherUser.display_name})})]}),n.jsx(qr,{className:"flex-1 p-4",children:n.jsxs("div",{className:"space-y-4",children:[o.map(y=>n.jsxs("div",{className:P("flex gap-3",y.sender.id===s.id&&"justify-end"),children:[y.sender.id!==s.id&&n.jsxs(de,{children:[n.jsx(_e,{src:y.sender.avatar_url}),n.jsx(le,{children:y.sender.display_name.charAt(0)})]}),n.jsx("div",{className:P("rounded-lg p-3 max-w-[70%]",y.sender.id===s.id?"bg-primary text-primary-foreground":"bg-muted"),children:n.jsx("p",{children:y.content})})]},y.id)),n.jsx("div",{ref:m})]})}),n.jsx("form",{onSubmit:b,className:"p-4 border-t",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Z,{value:l,onChange:y=>d(y.target.value),placeholder:"Digite sua mensagem...",className:"flex-1"}),n.jsxs(E,{type:"submit",size:"icon",children:[n.jsx(jc,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Enviar mensagem"})]})]})})]}):n.jsx("div",{className:"flex-1 flex items-center justify-center text-muted-foreground",children:"Selecione uma conversa para comear"})]})}function wr({children:s}){const{user:e}=je();return e?s:n.jsx(Vo,{to:"/login"})}function pp(){console.log("Renderizando App...");const s=window.location.hostname==="chpgo.github.io"?"/ufrj-social":"";return n.jsx(Fd,{children:n.jsx(Id,{children:n.jsxs(qo,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:[n.jsx(Qd,{}),n.jsxs(zo,{children:[n.jsxs(ve,{element:n.jsx(Xr,{}),children:[n.jsx(ve,{path:s+"/",element:n.jsx(Yg,{})}),n.jsx(ve,{path:s+"/post/:id",element:n.jsx(cp,{})}),n.jsx(ve,{path:s+"/community/:slug",element:n.jsx(dp,{})}),n.jsx(ve,{path:s+"/communities",element:n.jsx(hp,{})}),n.jsx(ve,{path:s+"/events",element:n.jsx(mp,{})}),n.jsx(ve,{path:s+"/messages",element:n.jsx(gp,{})}),n.jsx(ve,{path:s+"/profile",element:n.jsx(wr,{children:n.jsx(sp,{})})}),n.jsx(ve,{path:s+"/posts/new",element:n.jsx(wr,{children:n.jsx(lp,{})})}),n.jsx(ve,{path:s+"/communities/new",element:n.jsx(wr,{children:n.jsx(fp,{})})}),n.jsx(ve,{path:"*",element:n.jsx("div",{className:"flex min-h-[50vh] items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Pgina no encontrada"}),n.jsx("p",{className:"text-muted-foreground",children:"A pgina que voc est procurando no existe."})]})})})]}),n.jsx(ve,{path:s+"/login",element:n.jsx(Kg,{})}),n.jsx(ve,{path:s+"/register",element:n.jsx(Qg,{})})]})]})})})}console.log("Iniciando aplicao...");const Io=document.getElementById("root");if(!Io)throw console.error("Elemento root no encontrado!"),new Error("Elemento root no encontrado");console.log("Elemento root encontrado, renderizando aplicao...");try{jr.createRoot(Io).render(n.jsx(T.StrictMode,{children:n.jsx(pp,{})})),console.log("Aplicao renderizada com sucesso!")}catch(s){console.error("Erro ao renderizar aplicao:",s)}
//# sourceMappingURL=index-BafotLut.js.map
